window.__require=function t(e,i,n){function r(s,c){if(!i[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!c&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return r(e[s][1][t]||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e){function i(t,e){var i=[],n=[];return null==e&&(e=function(t,e){return i[0]===e?"[Circular ~]":"[Circular ~."+n.slice(0,i.indexOf(e)).join(".")+"]"}),function(r,o){if(i.length>0){var s=i.indexOf(this);~s?i.splice(s+1):i.push(this),~s?n.splice(s,1/0,r):n.push(r),~i.indexOf(o)&&(o=e.call(this,r,o))}else i.push(o);return null==t?o:t.call(this,r,o)}}(e.exports=function(t,e,n,r){return JSON.stringify(t,i(e,r),n)}).getSerialize=i},{}],2:[function(t,e){"use strict";var i=t("json-stringify-safe"),n=function(){var t=4022871197;return function(e){if(e){e=e.toString();for(var i=0;i<e.length;i++){var n=.02519603282416938*(t+=e.charCodeAt(i));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)}t=4022871197}},r=function(t){return function(){var e,r,o=48,s=1,c=o,a=new Array(o),u=0,h=new n;for(e=0;e<o;e++)a[e]=h(Math.random());var d=function(){++c>=o&&(c=0);var t=1768863*a[c]+2.3283064365386963e-10*s;return a[c]=t-(s=0|t)},l=function(t){return Math.floor(t*(d()+11102230246251565e-32*(2097152*d()|0)))};l.string=function(t){var e,i="";for(e=0;e<t;e++)i+=String.fromCharCode(33+l(94));return i};var p=function(){var t=Array.prototype.slice.call(arguments);for(e=0;e<t.length;e++)for(r=0;r<o;r++)a[r]-=h(t[e]),a[r]<0&&(a[r]+=1)};return l.cleanString=function(t){return(t=(t=t.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[\x00-\x1F]/gi,"")).replace(/\n /,"\n")},l.hashString=function(t){for(t=l.cleanString(t),h(t),e=0;e<t.length;e++)for(u=t.charCodeAt(e),r=0;r<o;r++)a[r]-=h(u),a[r]<0&&(a[r]+=1)},l.seed=function(t){null==t&&(t=Math.random()),"string"!=typeof t&&(t=i(t,function(t,e){return"function"==typeof e?e.toString():e})),l.initState(),l.hashString(t)},l.addEntropy=function(){var t=[];for(e=0;e<arguments.length;e++)t.push(arguments[e]);p(u+++(new Date).getTime()+t.join("")+Math.random())},l.initState=function(){for(h(),e=0;e<o;e++)a[e]=h(" ");s=1,c=o},l.done=function(){h=null},void 0!==t&&l.seed(t),l.range=function(t){return l(t)},l.random=function(){return l(Number.MAX_VALUE-1)/Number.MAX_VALUE},l.floatBetween=function(t,e){return l.random()*(e-t)+t},l.intBetween=function(t,e){return Math.floor(l.random()*(e-t+1))+t},l}()};r.create=function(t){return new r(t)},e.exports=r},{"json-stringify-safe":1}],IngameScene:[function(t,e){"use strict";cc._RF.push(e,"41ca6i+HA9Ooqx0Sr36WHSO","IngameScene");var i=t("RiddleFrameController"),n=t("ResultPopup"),r=t("./component/ScoreLabel"),o=t("./constants"),s=t("./lib/helpers"),c=t("./lib/riddleGenerate");cc.Class({extends:cc.Component,properties:{riddleFrameCtor:i,resultPopup:n,notificaitonText:cc.Label,resultText:cc.Label,timerProgressBar:cc.ProgressBar,timerText:cc.Label,questtionText:cc.Label,scoreText:r,chainText:cc.Label},onLoad:function(){this.rand=t("random-seed").create(),this.rand.initState(),this.rand.seed(Math.random()),this.riddleFrameCtor.node.on("answer",this.onResult,this),this.resultPopup.node.on("restart",this.onRestart,this)},start:function(){this.resetAndStartGame(),this.resultPopup.node.active=!0,this.resultPopup.hide(!0)},update:function(t){var e=this;this.isPlaying&&(this.timer-=1e3*t,this.timerText.string=s.formatTimer(this.timer+""),this.timerProgressBar.progress=this.timer/o.ROUND_DURATION,this.chainTimer-=1e3*t,this.timerProgressBar.barSprite.node.color=new cc.Color(255,this.timer/o.ROUND_DURATION*255,this.timer/o.ROUND_DURATION*255,255),this.timer<0&&(this.isPlaying=!1,this.riddleFrameCtor.locked=!0,this.resultText.string="TIME UP!",this.resultText.node.color=(new cc.Color).fromHEX("#d35400"),this.resultText.node.y=-30,this.resultText.node.active=!0,this.resultText.node.opacity=0,cc.tween(this.resultText.node).to(.3,{position:cc.v2(0,0),opacity:255}).delay(.7).call(function(){e.resultPopup.show(e.score)}).start()))},resetAndStartGame:function(){var t=this;this.reset(),this.animateGoText(function(){t.notificaitonText.node.active=!1,t.riddleFrameCtor.node.active=!0,t.startNewRiddle()})},reset:function(){this.isPlaying=!1,this.questionNumber=1,this.chain=0,this.timer=o.ROUND_DURATION,this.chainTimer=0,this.score=0,this.displayingScore=0,this.chainText.node.active=!1,this.resultText.node.active=!1,this.riddleFrameCtor.node.active=!1,this.notificaitonText.node.active=!0,this.notificaitonText.node.setScale(0),this.timerProgressBar.progress=1,this.timerText.string=s.formatTimer(this.timer+""),this.questtionText.string="Question "+this.questionNumber,this.scoreText.setScore(this.score,!0)},animateGoText:function(t){var e=this;cc.tween(this.notificaitonText.node).delay(.4).call(function(){e.notificaitonText.node.setScale(.3),e.notificaitonText.string="READY"}).to(.35,{scale:{value:1,easing:"sineOut"}}).delay(.2).to(.35,{scale:{value:.35,easing:"sineIn"}}).call(function(){e.notificaitonText.node.setScale(.4),e.notificaitonText.string="GO!"}).to(.5,{scale:{value:1.3,easing:"sineOut"}}).to(.3,{scale:{value:1.2,easing:"sineIn"}}).call(function(){t()}).start()},nextRiddle:function(){this.questionNumber++,this.questtionText.string="Question "+this.questionNumber,this.startNewRiddle()},startNewRiddle:function(){var t=c(this.getCurrentDifficulty(),this.rand);this.riddleFrameCtor.optainNewRiddle(t),this.isPlaying=!0,this.chainTimer=o.CHAIN_DURATION},onResult:function(t){var e=this;this.riddleFrameCtor.locked=!0;var i="correct"===t;if(this.resultText.string=i?"CORRECT":"INCORRECT",this.resultText.node.color=(new cc.Color).fromHEX(i?"#16a085":"#d35400"),this.resultText.node.y=-30,this.resultText.node.active=!0,this.resultText.node.opacity=0,i){this.chainTimer>0?this.chain=Math.min(++this.chain,o.MAX_CHAIN):this.chain=0;var n=o.SCORING*Math.max(this.chain,1);this.score+=n,cc.tween(this.scoreText.node).delay(.2).to(.1,{color:(new cc.Color).fromHEX("#ffffff")}).call(function(){e.scoreText.setScore(e.score)}).to(.1,{color:(new cc.Color).fromHEX("#ffffff")}).to(.1,{color:(new cc.Color).fromHEX("#e67e22")}).to(.1,{color:(new cc.Color).fromHEX("#ffffff")}).to(.1,{color:(new cc.Color).fromHEX("#e67e22")}).to(.1,{color:(new cc.Color).fromHEX("#ffffff")}).start(),this.chain>1&&(this.chainText.node.active=!0,this.chainText.node.x=this.scoreText.node.width/2-10,this.chainText.node.setScale(0),this.chainText.string="Chain x"+this.chain,cc.tween(this.chainText.node).delay(.2).to(.2,{scale:{value:1,easing:"bounceOut"}}).delay(.3).to(.2,{scale:0}).call(function(){e.chainText.node.active=!1}).start())}cc.tween(this.resultText.node).to(.2,{position:cc.v2(0,0),opacity:255}).delay(.4).to(.2,{position:cc.v2(0,-30),opacity:0}).call(function(){e.resultText.node.active=!1,e.riddleFrameCtor.locked=!1,i?e.nextRiddle():(e.riddleFrameCtor.clearInput(),e.chainTimer=-1)}).start()},onRestart:function(){this.resultPopup.hide(),this.resetAndStartGame()},getCurrentDifficulty:function(){return 1+~~(this.currentQuestion/o.DIFFICULTY_STEP)}}),cc._RF.pop()},{"./component/ScoreLabel":"ScoreLabel","./constants":"constants","./lib/helpers":"helpers","./lib/riddleGenerate":"riddleGenerate",ResultPopup:"ResultPopup",RiddleFrameController:"RiddleFrameController","random-seed":2}],InputFrameController:[function(t,e){"use strict";cc._RF.push(e,"34795oJcMBF0ZeRU5Ut18Zv","InputFrameController"),cc.Class({extends:cc.Component,properties:{button_0:cc.Button,button_1:cc.Button,button_2:cc.Button,button_3:cc.Button,button_4:cc.Button,button_5:cc.Button,button_6:cc.Button,button_7:cc.Button,button_8:cc.Button,button_9:cc.Button,button_Plus:cc.Button,button_Minus:cc.Button,button_Multiple:cc.Button,button_Divide:cc.Button,button_C:cc.Button,button_Enter:cc.Button},onLoad:function(){this.isKeyboardShifed=!1,this.button_0.node.on("click",this.onButtonClicked,this),this.button_1.node.on("click",this.onButtonClicked,this),this.button_2.node.on("click",this.onButtonClicked,this),this.button_3.node.on("click",this.onButtonClicked,this),this.button_4.node.on("click",this.onButtonClicked,this),this.button_5.node.on("click",this.onButtonClicked,this),this.button_6.node.on("click",this.onButtonClicked,this),this.button_7.node.on("click",this.onButtonClicked,this),this.button_8.node.on("click",this.onButtonClicked,this),this.button_9.node.on("click",this.onButtonClicked,this),this.button_Plus.node.on("click",this.onButtonClicked,this),this.button_Minus.node.on("click",this.onButtonClicked,this),this.button_Multiple.node.on("click",this.onButtonClicked,this),this.button_Divide.node.on("click",this.onButtonClicked,this),this.button_C.node.on("click",this.onButtonClicked,this),this.button_Enter.node.on("click",this.onButtonClicked,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},start:function(){},onKeyDown:function(t){t.keyCode===cc.macro.KEY.shift&&(this.isKeyboardShifed=!0)},onKeyPressed:function(t){if(t.keyCode!==cc.macro.KEY.shift)switch(t.keyCode){case cc.macro.KEY[0]:case cc.macro.KEY.num0:this.node.emit("input",0);break;case cc.macro.KEY[1]:case cc.macro.KEY.num1:this.node.emit("input",1);break;case cc.macro.KEY[2]:case cc.macro.KEY.num2:this.node.emit("input",2);break;case cc.macro.KEY[3]:case cc.macro.KEY.num3:this.node.emit("input",3);break;case cc.macro.KEY[4]:case cc.macro.KEY.num4:this.node.emit("input",4);break;case cc.macro.KEY[5]:case cc.macro.KEY.num5:this.node.emit("input",5);break;case cc.macro.KEY[6]:case cc.macro.KEY.num6:this.node.emit("input",6);break;case cc.macro.KEY[7]:case cc.macro.KEY.num7:this.node.emit("input",7);break;case cc.macro.KEY[8]:if(this.isKeyboardShifed){this.node.emit("input","*");break}case cc.macro.KEY.num8:this.node.emit("input",8);break;case cc.macro.KEY[9]:case cc.macro.KEY.num9:this.node.emit("input",9);break;case cc.macro.KEY["+"]:this.node.emit("input","+");break;case cc.macro.KEY.dash:case cc.macro.KEY["-"]:this.node.emit("input","-");break;case cc.macro.KEY["*"]:this.node.emit("input","*");break;case cc.macro.KEY.forwardslash:case cc.macro.KEY["/"]:this.node.emit("input","/");break;case cc.macro.KEY.numdel:case cc.macro.KEY.Delete:case cc.macro.KEY.backspace:this.node.emit("input","C");break;case cc.macro.KEY.equal:if(this.isKeyboardShifed){this.node.emit("input","+");break}case cc.macro.KEY.enter:case cc.macro.KEY.space:case cc.macro.KEY["="]:this.node.emit("input","Enter")}else this.isKeyboardShifed=!1},onButtonClicked:function(t){switch(t){case this.button_0:this.node.emit("input",0);break;case this.button_1:this.node.emit("input",1);break;case this.button_2:this.node.emit("input",2);break;case this.button_3:this.node.emit("input",3);break;case this.button_4:this.node.emit("input",4);break;case this.button_5:this.node.emit("input",5);break;case this.button_6:this.node.emit("input",6);break;case this.button_7:this.node.emit("input",7);break;case this.button_8:this.node.emit("input",8);break;case this.button_9:this.node.emit("input",9);break;case this.button_Plus:this.node.emit("input","+");break;case this.button_Minus:this.node.emit("input","-");break;case this.button_Multiple:this.node.emit("input","*");break;case this.button_Divide:this.node.emit("input","/");break;case this.button_C:this.node.emit("input","C");break;case this.button_Enter:this.node.emit("input","Enter");break;default:cc.error("undefined input button")}}}),cc._RF.pop()},{}],LandingScene:[function(t,e){"use strict";cc._RF.push(e,"f81c9Et825BE4flcrHLshzh","LandingScene"),cc.Class({extends:cc.Component,properties:{},start:function(){},onPlayButtonClicked:function(){cc.director.loadScene("ingame")}}),cc._RF.pop()},{}],ResultPopup:[function(t,e){"use strict";cc._RF.push(e,"e8a928f/TVLLa/SAULl17y6","ResultPopup"),cc.Class({extends:cc.Component,properties:{overlay:cc.Node,frame:cc.Node,scoreText:cc.Label,highScoreText:cc.Label},start:function(){},show:function(t,e){void 0===e&&(e=!1),this.overlay.active=!0,this.frame.active=!0,this.scoreText.string="You scored: "+t,this.highScoreText.node.active=e,this.frame.setScale(.3),cc.tween(this.frame).to(.4,{scale:{value:1,easing:"sineInOut"}}).start()},hide:function(t){var e=this;this.overlay.active=!1,t?(this.frame.active=!1,this.frame.setScale(0)):cc.tween(this.frame).to(.4,{scale:{value:0,easing:"sineInOut"}}).call(function(){e.frame.active=!1}).start()},onBackToMenuClicked:function(){cc.director.loadScene("landing")},onRestartClicked:function(){this.node.emit("restart")}}),cc._RF.pop()},{}],RiddleFrameController:[function(t,e){"use strict";cc._RF.push(e,"d5071e/oO5PXr2IjDcs85iC","RiddleFrameController");var i=t("InputFrameController"),n=t("./lib/helpers");cc.Class({extends:cc.Component,properties:{inputCtor:i,leftRiddleText:cc.Label,rightRiddleText:cc.Label,inputText:cc.Label,inputFrame:cc.Sprite},onLoad:function(){this.locked=!0,this.inputCtor.node.on("input",this.onInput,this)},start:function(){},onInput:function(t){this.locked||this.currentRiddle&&(isNaN(t)||"operator"===this.currentRiddle.riddlePart?"operator"===this.currentRiddle.riddlePart&&n.isInputOperator(t)?(this.input=t,this.inputText.string=n.getInputCharacter(t)):"C"===t?this.clearInput():"Enter"===t&&this.node.emit("answer",n.checkAnswer(this.currentRiddle,this.input)?"correct":"incorrect"):(null===this.input&&(this.input=0),this.input<=99&&(this.input=10*this.input+t,this.inputText.string=this.input>0?this.input.toString():"")))},clearInput:function(){this.input=null,this.inputText.string=""},optainNewRiddle:function(t){t=t||{},this.currentRiddle={},this.currentRiddle.operand1=t.operand1||0,this.currentRiddle.operand2=t.operand2||0,this.currentRiddle.result=t.result||0,this.currentRiddle.operator=t.operator||"+",this.currentRiddle.riddlePart=t.riddlePart||"operator",this.clearInput();var e="operator"===this.currentRiddle.riddlePart?80:165;switch(this.currentRiddle.riddlePart){case"operand1":this.leftRiddleText.string="",this.rightRiddleText.string=this.currentRiddle.operator+" "+this.currentRiddle.operand2+" = "+this.currentRiddle.result;break;case"operand2":this.leftRiddleText.string=this.currentRiddle.operand1+" "+this.currentRiddle.operator,this.rightRiddleText.string="= "+this.currentRiddle.result;break;case"result":this.leftRiddleText.string=this.currentRiddle.operand1+" "+this.currentRiddle.operator+" "+this.currentRiddle.operand2+" =",this.rightRiddleText.string="";break;case"operator":this.leftRiddleText.string=this.currentRiddle.operand1,this.rightRiddleText.string=this.currentRiddle.operand2+" = "+this.currentRiddle.result}this.inputText.string="",this.leftRiddleText._forceUpdateRenderData(),this.rightRiddleText._forceUpdateRenderData(),this.inputFrame.node.width=e;var i=this.leftRiddleText.node.width+this.rightRiddleText.node.width+this.inputFrame.node.width+16;this.leftRiddleText.node.x=(this.leftRiddleText.node.width-i)/2,this.inputFrame.node.x=this.leftRiddleText.node.x+(this.leftRiddleText.node.width+this.inputFrame.node.width)/2+8,this.rightRiddleText.node.x=this.inputFrame.node.x+(this.inputFrame.node.width+this.rightRiddleText.node.width)/2+16,this.inputText.node.x=this.inputFrame.node.x,this.locked=!1}}),cc._RF.pop()},{"./lib/helpers":"helpers",InputFrameController:"InputFrameController"}],ScoreLabel:[function(t,e){"use strict";cc._RF.push(e,"5084cB+tM5CloykXwkNTDDl","ScoreLabel"),cc.Class({extends:cc.Component,properties:{},start:function(){this.label=this.getComponent(cc.Label),this.displayingScore=0,this.lerpingScore=0,this.score=0,this.label.string="- SCORE: "+this.displayingScore+" -",this.lerpingTime=0,this.lerpingValue=0},setScore:function(t,e){void 0===e&&(e=!1),this.score=t,e?(this.lerpingTime=0,this.lerpingValue=0,this.lerpingScore=this.score):(this.lerpingTime=20,this.lerpingValue=(this.score-this.lerpingScore)/20)},update:function(){this.lerpingTime<=0?(this.lerpingValue=0,this.lerpingScore=this.score):this.lerpingTime>0&&(this.lerpingScore+=this.lerpingValue,this.lerpingTime--),this.displayingScore!=this.lerpingScore&&(this.displayingScore=this.lerpingScore,this.label.string="-SCORE: "+~~this.displayingScore+" -")}}),cc._RF.pop()},{}],constants:[function(t,e){"use strict";cc._RF.push(e,"ae788ZEYsVNlbkaEu3AUFYR","constants"),e.exports={ROUND_DURATION:6e4,CHAIN_DURATION:3e3,DIFFICULTY_STEP:5,SCORING:7,MAX_CHAIN:5},cc._RF.pop()},{}],helpers:[function(t,e){"use strict";cc._RF.push(e,"afb7asBM+VM7IeOCTmPqp3J","helpers"),e.exports.isInputOperator=function(t){return"+"===t||"-"===t||"*"===t||"/"===t},e.exports.getInputCharacter=function(t){return"/"===t?"\xf7":"*"===t?"x":t},e.exports.checkAnswer=function(t,e){switch(t.riddlePart){case"operand1":return parseInt(e)===t.operand1;case"operand2":return parseInt(e)===t.operand2;case"result":return parseInt(e)===t.result;case"operator":if(e===t.operator)return!0;switch(e){case"+":return t.operand1+t.operand2===t.result;case"-":return t.operand1-t.operand2===t.result;case"*":return t.operand1*t.operand2===t.result;case"/":return t.operand1/t.operand2===t.result;default:return!1}}return!1},e.exports.formatDurationDHMSObject=function(t){t=Math.max(0,t);var e=Math.floor(.5+t/1e3),i=Math.floor(e/60),n=Math.floor(i/60),r=Math.floor(n/24);return{seconds:e%=60,minutes:i%=60,hours:n%=24,days:r}},e.exports.formatTimer=function(t){var e=this.formatDurationDHMSObject(t),i=e.seconds,n=e.minutes,r=e.hours,o=e.days,s=n>9||0===r?n:"0"+n,c=i>9?i:"0"+i;return o>=1?o+":"+r+":"+n+":"+i:r>=1?r+":"+s+":"+c:s+":"+c},cc._RF.pop()},{}],riddleGenerate:[function(t,e){"use strict";cc._RF.push(e,"5373bUE27RLNKrfYsZy6MUA","riddleGenerate"),e.exports=function(t,e){var i=e.range(t>=2?4:2),n=e(4),r=3*t,o=10*t,s=0,c=0,a=0,u="";0===i?(u="+",a=(s=e.intBetween(r,o))-(c=e.intBetween(1,s-1))):1===i?(u="-",s=(c=e.intBetween(r,o))-(a=e.intBetween(1,c-1))):2===i?(u="*",s=e.intBetween(r,o),s=(c=e.intBetween(2,s/2-2))*(a=Math.round(s/c))):3===i&&(u="/",c=e.intBetween(r,o),a=e.intBetween(2,c/2-2),c=(s=Math.round(c/a))*a);var h="result";switch(n){case 0:h="result";break;case 1:h="operand1";break;case 2:h="operand2";break;case 3:h="operator"}return{result:s,operand1:c,operand2:a,operator:u,riddlePart:h}},cc._RF.pop()},{}]},{},["IngameScene","InputFrameController","LandingScene","ResultPopup","RiddleFrameController","ScoreLabel","constants","helpers","riddleGenerate"]);