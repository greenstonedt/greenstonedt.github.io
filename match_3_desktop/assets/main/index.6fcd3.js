window.__require=function t(e,i,o){function a(s,l){if(!i[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var c="function"==typeof __require&&__require;if(!l&&c)return c(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){return a(e[s][1][t]||t)},u,u.exports,t,e,i,o)}return i[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<o.length;s++)a(o[s]);return a}({1:[function(t,e){var i="en",o="jp",a={jp:{play:"\u30b9\u30bf\u30fc\u30c8"},en:{play:"Play Now!"}},n=500;function s(){this._isInitialised=!1,this._splashAdShown=!1}function l(t){for(var e in t=t||{})void 0===t[e]&&delete t[e];return t}function r(t,e){console.error(t),(e=e||{}).noBreak?e.noBreak():(e.beforeBreak&&e.beforeBreak(),e.afterBreak&&e.afterBreak())}function c(){if(!navigator.language)return o;let t=navigator.language.toLowerCase().substr(0,2);return a[t]?t:i}s.prototype.initialize=function(t){if(this._isInitialised)console.warn("h5ad: already initialized");else{if(this._isInitialised=!0,t&&void 0!==t.adBreakTimeout&&(n=t.adBreakTimeout),!window.adsbygoogle){var e=document.createElement("script");e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",e.setAttribute("data-ad-client","ca-pub-123456789"),e.setAttribute("data-adbreak-test","on"),e.async=!0,document.head.appendChild(e),window.adsbygoogle=window.adsbygoogle||[],adBreak=window.adBreak=function(t){console.log("adBreak:",t),window.adsbygoogle.push(t)},adConfig=window.adConfig=function(t){console.log("adConfig:",t),window.adsbygoogle.push(t)}}adConfig({sound:"on"})}},s.prototype.onStart=function(t){if(t=t||{},this._isInitialised||this.initialize({adBreakTimeout:t.adBreakTimeout}),this._splashAdShown)console.warn("h5ad: onStart has already been called");else{this._splashAdShown=!0;var e="";e+=".splahContainer {",e+="    background-color: black;",e+="    position: absolute;",e+="    width: 100%;",e+="    height: 100%;",e+="    text-align: left;",e+="}",e+=".splahContainer .gameIcon {",e+="    position: relative;",e+="    width: 100px;",e+="    height: 100px;",e+="    background-size: 100%;",e+="    transform: translate(-50%, -100%);",e+="    left: 50%;",e+="    top: 31%;",e+="    border-radius: 10px;",e+="    border: 2px white solid;",e+="    border-radius: min(2vh,2vw);",e+="    border: min(0.7vw, 0.7vh) white solid;",e+="    width: min(30vw, 20vh);",e+="    height: min(30vw, 20vh);",e+="}",e+=".splahContainer .startButton {",e+="    background-color: rgb(255, 193, 7);",e+="    padding: 20px 30px;",e+="    border-radius: 13px;",e+="    transform: translate(-50%, 100%);",e+="    left: 50%;",e+="    top: 40%;",e+="    border: 5px solid white;",e+="    position: relative;",e+="    cursor: pointer;",e+="    font-size: 26px;",e+="    font-family: arial, verdana;",e+="    color: white;",e+="    text-align: center;",e+="    transition: all 0.1s;",e+="    width: min(50vw,27vh);",e+="    padding: min(3vw,3vh);",e+="    font-size: min(4vh,9vw);",e+="    border-radius: min(2vh,2vw);",e+="    border: min(1vw, 1vh) white solid;",e+="}",e+=".splahContainer .startButton:hover {",e+="    transform: translate(-50%, 100%) scale(1.1);",e+="    background-color: rgb(255 217 104);",e+="}";var i=document.createElement("style");i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(i);var o=document.createElement("div");t.color&&(o.style.backgroundColor=t.color),o.className="splahContainer";var s=document.createElement("div");s.textContent=a[c()].play,s.className="startButton",o.appendChild(s);var u=document.createElement("div");u.className="gameIcon",t.icon&&(u.style.backgroundImage="url("+t.icon+")"),o.appendChild(u),document.body.appendChild(o),s.onclick=function(){afterBreakCallbackCalled=!1;let e=setTimeout(function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,t.afterBreak&&t.afterBreak())},n);try{adBreak(l({type:"start",name:t.name||"splash_screen",beforeBreak:function(){clearTimeout(e)},afterBreak:function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,t.afterBreak&&t.afterBreak())}}))}catch(i){r(i,t)}setTimeout(function(){document.body.removeChild(o)},200)}}},s.prototype.onNext=function(t){(t=t||{}).type="next",this.adBreak(t)},s.prototype.onBrowse=function(t){(t=t||{}).type="browse",this.adBreak(t)},s.prototype.onPause=function(t){(t=t||{}).type="pause",this.adBreak(t)},s.prototype.adBreak=function(t){if("next"!==(t=t||{}).type&&"browse"!==t.type&&"pause"!==t.type)return console.error("H5ad: unknown type",t.type);let e=setTimeout(function(){t.noBreak&&t.noBreak()},n);try{adBreak(l({type:t.type,name:t.name||t.type,beforeBreak:function(){clearTimeout(e),t.beforeBreak&&t.beforeBreak()},afterBreak:function(){t.afterBreak&&t.afterBreak()}}))}catch(i){r(i,t)}},s.prototype.onMute=function(){adConfig({sound:"off"})},s.prototype.onUnmute=function(){adConfig({sound:"on"})},e.exports=new s},{}],BoardCtor:[function(t,e){"use strict";cc._RF.push(e,"0ea50FT3DVG2K3QWJ/jwsKD","BoardCtor");var i=s(t("./constants")),o=s(t("./libs/helpers")),a=s(t("./objects/Tile")),n=s(t("./EffectorCtor"));function s(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{hintNode1:cc.Node,hintNode2:cc.Node,tilePrefab:cc.Prefab,effectorCtor:n.default},onLoad:function(){this.tilePool=new cc.NodePool("tile"),this.ingameCtor=this.getComponent("IngameCtor"),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this)},update:function(t){if(this.ingameCtor.isPlaying&&!this.isHintShowing&&(this.hintCountdown-=t,this.hintCountdown<0)){var e=this.currentPossibleMoves[~~(Math.random()*this.currentPossibleMoves.length)];this.showHint(e.toMove,e.moveTo)}},init:function(){this.board=[],window.board=this.board,this.cellList=[],this.justSwappedCells=[],this.stopHint();for(var t=0;t<i.default.BOARD_ROW_SIZE;t++){for(var e=[],o=0;o<i.default.BOARD_COLUMN_SIZE;o++){var a={x:o,y:t,tile:null};e.push(a),this.cellList.push(a)}this.board.push(e)}},reshuffleBoard:function(){var t=this;this.ingameCtor.uiController.showReshuffleNotification(),this.scheduleOnce(function(){t.animateReshuffleBoard(),t.scheduleOnce(t.generateTiles.bind(t,!1,!1),i.default.ANIMATE_DURATION_CLEAR_BOARD_EACH_ROW+i.default.ANIMATE_DURATION_CLEAR_BOARD_BREAK_EACH_ROW*i.default.BOARD_ROW_SIZE)},i.default.ANIMATE_DURATION_NOTIF_SHOW+i.default.ANIMATE_DURATION_NOTIF_WAIT)},generateTiles:function(t,e){var o=this,a=[],n=i.default.BOARD_ROW_SIZE;this.cellList.forEach(function(s){null===s.tile&&(o.createTile(s,t?i.default.TUTORIAL_LAYOUT[s.y][s.x]:e?-2:-1),a.push(s),n=Math.min(n,s.y))}),this.animateDropGeneratedTiles(a,n),this.scheduleOnce(this.adjoinTiles.bind(this,null),i.default.ANIMATE_DURATION_DROP_GENERATED_TILES_EACH_ROW+i.default.ANIMATE_DURATION_DROP_GENERATED_TILES_BREAK_EACH_ROW*(i.default.BOARD_ROW_SIZE-n))},createTile:function(t,e){if(this.tilePool.size()<=0){var o=cc.instantiate(this.tilePrefab);this.tilePool.put(o)}var n,s=this.tilePool.get(),l=s.getComponent(a.default);if(s.parent=this.node,n=e>=0?e:~~(Math.random()*i.default.TILE_TYPE_NORMAL_NUMBER),-2===e)for(var r=n;!this.checkforInitValidity(n,t);)if((n=(n+1)%i.default.TILE_TYPE_NORMAL_NUMBER)===r)return cc.error("check validity failed"),!1;return l.setup(n,t),t.tile=l,!0},swapTileAtCell:function(t,e){if(this.ingameCtor.isInTutorial){var o=this.board[i.default.TUTORIAL_MOVES[this.ingameCtor.tutorialStep][0].y][i.default.TUTORIAL_MOVES[this.ingameCtor.tutorialStep][0].x],a=this.board[i.default.TUTORIAL_MOVES[this.ingameCtor.tutorialStep][1].y][i.default.TUTORIAL_MOVES[this.ingameCtor.tutorialStep][1].x];if(t===o&&e===a);else if(t!==a||e!==o)return}this.currentChain=0,this.ingameCtor.pauseGameForAnimating(),this.stopHint(),this.ingameCtor.tutorialStep++;for(var n=!1,s=0;s<this.currentPossibleMoves.length;s++){var l=this.currentPossibleMoves[s];if(l.toMove===t&&l.moveTo===e||l.toMove===e&&l.moveTo===t){n=!0;break}}if(n){var r=t.tile;t.tile=e.tile,e.tile=r,this.justSwappedCells=[t,e],this.animateSwap(t,e)}else this.animateSwapForthBack(t,e);this.scheduleOnce(this.activateSpecicalTiles.bind(this,t,e),n?i.default.ANIMATE_DURATION_SWAP:2*i.default.ANIMATE_DURATION_SWAP)},activateSpecicalTiles:function(t,e){var o=null,a=null;t.tile.type>=i.default.TILE_TYPE_NORMAL_NUMBER?t.tile.type===i.default.TILE_TYPE_INDEX_SPECIAL_MATCH&&e.tile.type>=i.default.TILE_TYPE_NORMAL_NUMBER?(o=e,a=t):t.tile.type===i.default.TILE_TYPE_INDEX_SPECIAL_TIME&&e.tile.type===i.default.TILE_TYPE_INDEX_SPECIAL_LINE?(o=e,a=t):(o=t,a=e):e.tile.type>=i.default.TILE_TYPE_NORMAL_NUMBER&&(o=e,a=t),null===o?this.adjoinTiles(null):o.tile.type===i.default.TILE_TYPE_INDEX_SPECIAL_LINE?this.activateLineTile(o,a):o.tile.type===i.default.TILE_TYPE_INDEX_SPECIAL_TIME?this.activateTimeTile(o,a):o.tile.type===i.default.TILE_TYPE_INDEX_SPECIAL_MATCH?this.activateMatchTile(o,a):this.adjoinTiles(null)},activateLineTile:function(t,e){var o=[];if(e.x===t.x)for(var a=0;a<i.default.BOARD_ROW_SIZE;a++)o.push(this.board[a][t.x]);else for(a=0;a<i.default.BOARD_COLUMN_SIZE;a++)o.push(this.board[t.y][a]);this.adjoinTiles(o)},activateTimeTile:function(t,e){var i=[t,e];this.adjoinTiles(i)},activateMatchTile:function(t,e){var i=[];i.push(t),this.cellList.forEach(function(t){t.tile&&t.tile.type===e.tile.type&&i.push(t)}),this.adjoinTiles(i)},adjoinTiles:function(t){void 0===t&&(t=null);var e=this.gatherAdjoinedLines(),o=this.gatherAdjoinedSpecialSpawns(e);this.justSwappedCells=[],e.length>0||t?(t&&e.push(t),this.scoring(e),this.animateAdjoin(e),o.length>0?this.scheduleOnce(this.spawnSpecialTiles.bind(this,o),i.default.ANIMATE_DURATION_ADJOIN):this.scheduleOnce(this.dropTiles,i.default.ANIMATE_DURATION_ADJOIN)):!this.ingameCtor.checkForLevelCompleted()||this.ingameCtor.isInTutorial?(this.currentPossibleMoves=this.gatherPossibleMoves(),0===this.currentPossibleMoves.length&&this.ingameCtor._time>0?this.reshuffleBoard():(this.ingameCtor.resumeGameFromAnimating(),this.ingameCtor.isInTutorial?this.showHint(this.board[i.default.TUTORIAL_MOVES[this.ingameCtor.tutorialStep][0].y][i.default.TUTORIAL_MOVES[this.ingameCtor.tutorialStep][0].x],this.board[i.default.TUTORIAL_MOVES[this.ingameCtor.tutorialStep][1].y][i.default.TUTORIAL_MOVES[this.ingameCtor.tutorialStep][1].x]):this.startHintCountdown())):this.ingameCtor.nextLevel()},startHintCountdown:function(){this.isHintShowing=!1,this.hintCountdown=i.default.TILE_HINT_SHOWUP_TIME},showHint:function(t,e){this.isHintShowing=!0,this.hintTween&&this.hintTween.stop(),this.hintNode1.active=!0,this.hintNode2.active=!0,o.default.localPositionFromTileCoords((t.x+e.x)/2,(t.y+e.y)/2),this.hintNode1.position=o.default.localPositionFromTileCoords(t.x,t.y),this.hintNode2.position=o.default.localPositionFromTileCoords(e.x,e.y),this.hintNode1.scale=0,this.hintNode2.scale=0,this.hintTween1=cc.tween(this.hintNode1).parallel(cc.tween().to(.5,{scale:1}),cc.tween().repeatForever(cc.tween().by(5,{angle:360}))).start(),this.hintTween2=cc.tween(this.hintNode2).parallel(cc.tween().to(.5,{scale:1}),cc.tween().repeatForever(cc.tween().by(5,{angle:360}))).start()},stopHint:function(){var t=this;this.hintTween1||this.hintTween2?(cc.tween(this.hintNode1).to(.1,{scale:0}).call(function(){t.hintNode1.active=!1,t.hintTween1.stop()}).start(),cc.tween(this.hintNode2).to(.1,{scale:0}).call(function(){t.hintNode2.active=!1,t.hintTween2.stop()}).start()):(this.hintNode1.active=!1,this.hintNode2.active=!1)},scoring:function(t){var e=this,a=o.default.getScoreScale(this.currentChain),n=[];t.forEach(function(t){t.forEach(function(t){if(!n.includes(t)&&t.tile){n.push(t);var s=o.default.localPositionFromTileCoords(t.x,t.y);if(t.tile.type===i.default.TILE_TYPE_INDEX_SPECIAL_TIME)e.effectorCtor.addTimeBonusFx(s,i.default.TILE_SPECIAL_BONUS_TIME,function(){e.ingameCtor.addTime(i.default.TILE_SPECIAL_BONUS_TIME)});else{e.ingameCtor.addScore(a);var l=cc.v2(s.x+e.effectorCtor.translatedBoardPos.x,s.y+e.effectorCtor.translatedBoardPos.y);e.effectorCtor.addScoreFx(l,"score",a)}}})}),this.currentChain+=t.length},spawnSpecialTiles:function(t){var e=this,o=[];t.time.forEach(function(t){null===t.tile&&(e.createTile(t,i.default.TILE_TYPE_INDEX_SPECIAL_TIME),o.push(t))}),t.line.forEach(function(t){null===t.tile&&(e.createTile(t,i.default.TILE_TYPE_INDEX_SPECIAL_LINE),o.push(t))}),t.match.forEach(function(t){null===t.tile&&(e.createTile(t,i.default.TILE_TYPE_INDEX_SPECIAL_MATCH),o.push(t))}),o.forEach(function(t){var e=t.tile;e.node.scale=0,cc.tween(e.node).to(2*i.default.ANIMATE_DURATION_SPAWN_SPECIAL,{scale:{value:e.getDefaultScale(),easing:"sineOut"}}).start()}),this.dropTiles()},dropTiles:function(){var t=this.calculateDropTiles();this.animateDropTiles(t),this.scheduleOnce(this.generateTiles.bind(this,!1,!1),i.default.ANIMATE_DURATION_DROP_TILES)},checkforInitValidity:function(t,e){return!(e.x>=2&&this.board[e.y][e.x-1].tile&&this.board[e.y][e.x-2].tile&&this.board[e.y][e.x-1].tile.type===t&&this.board[e.y][e.x-2].tile.type===t||e.y>=2&&this.board[e.y-1][e.x].tile&&this.board[e.y-2][e.x].tile&&this.board[e.y-1][e.x].tile.type===t&&this.board[e.y-2][e.x].tile.type===t)},calculateDropTiles:function(){for(var t=[],e=0;e<i.default.BOARD_COLUMN_SIZE;e++)for(var o=0;o<i.default.BOARD_ROW_SIZE;o++)if(null===this.board[o][e].tile)for(var a=o+1;a<i.default.BOARD_ROW_SIZE;a++)if(null!==this.board[a][e].tile){this.board[o][e].tile=this.board[a][e].tile,this.board[a][e].tile=null,this.board[o][e].tile.cell=this.board[o][e],t.push(this.board[o][e]);break}return t},gatherPossibleMoves:function(){var t=this,e=[];return this.cellList.forEach(function(o){var a=o.x,n=o.y,s=null,l=t.getTileTypeAtCell(a,n);if(l>=i.default.TILE_TYPE_NORMAL_NUMBER)null!==(s=t.getTileTypeAtCell(a-1,n))&&e.push({toMove:t.board[n][a-1],moveTo:o,type:s}),null!==(s=t.getTileTypeAtCell(a+1,n))&&e.push({toMove:t.board[n][a+1],moveTo:o,type:s}),null!==(s=t.getTileTypeAtCell(a,n-1))&&e.push({toMove:t.board[n-1][a],moveTo:o,type:s}),null!==(s=t.getTileTypeAtCell(a,n+1))&&e.push({toMove:t.board[n+1][a],moveTo:o,type:s});else{if(null!==(s=t.getTileTypeAtCell(a-1,n))&&s!==l&&l<i.default.TILE_TYPE_NORMAL_NUMBER){var r=!1;t.getTileTypeAtCell(a+1,n)===s&&t.getTileTypeAtCell(a+2,n)===s?r=!0:t.getTileTypeAtCell(a,n-1)===s&&t.getTileTypeAtCell(a,n-2)===s?r=!0:t.getTileTypeAtCell(a,n-1)===s&&t.getTileTypeAtCell(a,n+1)===s?r=!0:t.getTileTypeAtCell(a,n+1)===s&&t.getTileTypeAtCell(a,n+2)===s&&(r=!0),r&&e.push({toMove:t.board[n][a-1],moveTo:o,type:s})}if(null!==(s=t.getTileTypeAtCell(a+1,n))&&s!==l&&l<i.default.TILE_TYPE_NORMAL_NUMBER){var c=!1;t.getTileTypeAtCell(a-1,n)===s&&t.getTileTypeAtCell(a-2,n)===s?c=!0:t.getTileTypeAtCell(a,n-1)===s&&t.getTileTypeAtCell(a,n-2)===s?c=!0:t.getTileTypeAtCell(a,n-1)===s&&t.getTileTypeAtCell(a,n+1)===s?c=!0:t.getTileTypeAtCell(a,n+1)===s&&t.getTileTypeAtCell(a,n+2)===s&&(c=!0),c&&e.push({toMove:t.board[n][a+1],moveTo:o,type:s})}if(null!==(s=t.getTileTypeAtCell(a,n-1))&&s!==l&&l<i.default.TILE_TYPE_NORMAL_NUMBER){var u=!1;t.getTileTypeAtCell(a,n+1)===s&&t.getTileTypeAtCell(a,n+2)===s?u=!0:t.getTileTypeAtCell(a-1,n)===s&&t.getTileTypeAtCell(a-2,n)===s?u=!0:t.getTileTypeAtCell(a-1,n)===s&&t.getTileTypeAtCell(a+1,n)===s?u=!0:t.getTileTypeAtCell(a+1,n)===s&&t.getTileTypeAtCell(a+2,n)===s&&(u=!0),u&&e.push({toMove:t.board[n-1][a],moveTo:o,type:s})}if(null!==(s=t.getTileTypeAtCell(a,n+1))&&s!==l&&l<i.default.TILE_TYPE_NORMAL_NUMBER){var d=!1;t.getTileTypeAtCell(a,n-1)===s&&t.getTileTypeAtCell(a,n-2)===s?d=!0:t.getTileTypeAtCell(a-1,n)===s&&t.getTileTypeAtCell(a-2,n)===s?d=!0:t.getTileTypeAtCell(a-1,n)===s&&t.getTileTypeAtCell(a+1,n)===s?d=!0:t.getTileTypeAtCell(a+1,n)===s&&t.getTileTypeAtCell(a+2,n)===s&&(d=!0),d&&e.push({toMove:t.board[n+1][a],moveTo:o,type:s})}}}),e},gatherAdjoinedLines:function(){for(var t=this,e=[],o=[],a=[],n=0;n<i.default.BOARD_ROW_SIZE;n++){for(var s=[],l=0;l<i.default.BOARD_COLUMN_SIZE;l++)s.push({vertical:!1,horizonal:!1});a.push(s)}return this.cellList.forEach(function(n){var s=n.tile.type;if(s<i.default.TILE_TYPE_NORMAL_NUMBER){if(!a[n.y][n.x].horizonal&&t.getTileTypeAtCell(n.x+1,n.y)===s&&t.getTileTypeAtCell(n.x+2,n.y)===s){var l=[n,t.board[n.y][n.x+1],t.board[n.y][n.x+2]];a[n.y][n.x+1].horizonal=!0,a[n.y][n.x+2].horizonal=!0;for(var r=n.x+3;t.getTileTypeAtCell(r,n.y)===s;)a[n.y][r].horizonal=!0,l.push(t.board[n.y][r]),r++;e.push(l)}if(!a[n.y][n.x].vertical&&(a[n.y][n.x].vertical=!0,t.getTileTypeAtCell(n.x,n.y+1)===s&&t.getTileTypeAtCell(n.x,n.y+2)===s)){l=[n,t.board[n.y+1][n.x],t.board[n.y+2][n.x]],a[n.y+1][n.x].vertical=!0,a[n.y+2][n.x].vertical=!0;for(var c=n.y+3;t.getTileTypeAtCell(n.x,c)===s;)a[c][n.x].vertical=!0,l.push(t.board[c][n.x]),c++;o.push(l)}}}),e.concat(o)},gatherAdjoinedSpecialSpawns:function(t){for(var e=[],i=[],o=[],a=0;a<t.length;a++)for(var n=a+1;n<t.length;n++){for(var s=!1,l=0;l<t[a].length;l++)if(t[n].includes(t[a][l])){e.push(t[a][l]),s=!0;break}if(s)break}for(a=0;a<t.length;a++)if(t[a].length>=5){var r=this.localeSpawnCell(t[a],e);r&&i.push(r)}else if(4===t[a].length){var c=this.localeSpawnCell(t[a],e);c&&o.push(c)}return{time:e,line:o,match:i,length:e.length+o.length+i.length}},localeSpawnCell:function(t,e){for(var i=0,o=!1,a=0;a<this.justSwappedCells.length;a++)if(t.includes(this.justSwappedCells[a])){i=t.indexOf(this.justSwappedCells[a]),o=!0;break}o||(i=~~(Math.random()*t.length));for(var n=i;n<t.length+i;n++){var s=i%t.length;if(!e.includes[t[s]])return t[s]}return null},getTileTypeAtCell:function(t,e){return t<0||t>=i.default.BOARD_COLUMN_SIZE?null:e<0||e>=i.default.BOARD_ROW_SIZE?null:null===this.board[e][t].tile?null:this.board[e][t].tile.type},animateSwap:function(t,e){var a=o.default.localPositionFromTileCoords(t.x,t.y),n=o.default.localPositionFromTileCoords(e.x,e.y);cc.tween(t.tile.node).to(i.default.ANIMATE_DURATION_SWAP,{position:cc.v2(a.x,a.y)}).start(),cc.tween(e.tile.node).to(i.default.ANIMATE_DURATION_SWAP,{position:cc.v2(n.x,n.y)}).start()},animateSwapForthBack:function(t,e){var a=o.default.localPositionFromTileCoords(t.x,t.y),n=o.default.localPositionFromTileCoords(e.x,e.y);cc.tween(t.tile.node).to(i.default.ANIMATE_DURATION_SWAP,{position:cc.v2(n.x,n.y)}).to(i.default.ANIMATE_DURATION_SWAP,{position:cc.v2(a.x,a.y)}).start(),cc.tween(e.tile.node).to(i.default.ANIMATE_DURATION_SWAP,{position:cc.v2(a.x,a.y)}).to(i.default.ANIMATE_DURATION_SWAP,{position:cc.v2(n.x,n.y)}).start()},animateAdjoin:function(t){var e=this;t.forEach(function(t){t.forEach(function(t){if(null!==t.tile){var o=t.tile;t.tile=null,cc.tween(o.node).to(i.default.ANIMATE_DURATION_ADJOIN,{scale:{value:0,easing:"sineOutIn"}}).call(function(){e.tilePool.put(o.node)}).start()}})})},animateDropTiles:function(t){t.forEach(function(t){var e=o.default.localPositionFromTileCoords(t.x,t.y);cc.tween(t.tile.node).to(i.default.ANIMATE_DURATION_DROP_TILES,{position:cc.v2(e.x,e.y)}).start()})},animateDropGeneratedTiles:function(t,e){t.forEach(function(t){var a=t.tile;a.node.y=Math.max(a.node.y+200,390);var n=o.default.localPositionFromTileCoords(t.x,t.y);cc.tween(a.node).delay(i.default.ANIMATE_DURATION_DROP_GENERATED_TILES_BREAK_EACH_ROW*(t.y-e)).to(i.default.ANIMATE_DURATION_DROP_GENERATED_TILES_EACH_ROW,{position:cc.v2(n.x,n.y)}).start()})},animateReshuffleBoard:function(){var t=this;this.cellList.forEach(function(e){if(e.tile){var a=e.tile;e.tile=null;var n=o.default.localPositionFromTileCoords(e.x,e.y);cc.tween(a.node).delay(i.default.ANIMATE_DURATION_CLEAR_BOARD_BREAK_EACH_ROW*e.y).to(i.default.ANIMATE_DURATION_CLEAR_BOARD_EACH_ROW,{position:cc.v2(n.x,Math.min(n.y-200,-290)),opacity:0}).call(function(){t.tilePool.put(a.node)}).start()}})},onTouch:function(t){if(this.ingameCtor.isPlaying){var e=this.node.convertToNodeSpaceAR(t.getLocation()),i=o.default.tileCoordsFromlocalPosition(e.x,e.y);i.spriteInBound?this.selected=this.board[i.y][i.x]:this.selected=null}},onTouchMove:function(t){if(this.ingameCtor.isPlaying&&this.selected){var e=this.node.convertToNodeSpaceAR(t.getLocation()),i=o.default.tileCoordsFromlocalPosition(e.x,e.y);!i.spriteInBound||this.selected.x===i.x&&this.selected.y===i.y||Math.abs(i.x-this.selected.x)+Math.abs(i.y-this.selected.y)<=1&&(this.swapTileAtCell(this.selected,this.board[i.y][i.x]),this.selected=null)}},onTouchEnded:function(){this.ingameCtor.isPlaying&&(this.selected=null)}}),cc._RF.pop()},{"./EffectorCtor":"EffectorCtor","./constants":"constants","./libs/helpers":"helpers","./objects/Tile":"Tile"}],EffectorCtor:[function(t,e){"use strict";cc._RF.push(e,"ef9db8BYsdP6a1usAcFMmvG","EffectorCtor");var i=a(t("./constants")),o=a(t("./IngameCtor"));function a(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{ingameController:o.default,scoreFxPrefab:cc.Prefab,timeFxPrefab:cc.Prefab,timeBurstFxPrefab:cc.Prefab},onLoad:function(){this.uiController=this.ingameController.uiController,this.uiTimeBar=this.uiController.timeProgressBar,this.scoreTextPool=new cc.NodePool("scoreText"),this.timeFxPool=new cc.NodePool("timeFx"),this.translatedBoardPos=new cc.v2,this.translatedBoardPos.x=this.ingameController.node.x-this.node.x,this.translatedBoardPos.y=this.ingameController.node.y-this.node.y,this.translatedTimeBarPos=new cc.v2,this.translatedTimeBarPos.x=this.uiTimeBar.node.x+this.uiController.node.x-this.node.x,this.translatedTimeBarPos.y=this.uiTimeBar.node.y+this.uiController.node.y-this.node.y},addScoreFx:function(t,e,o){var a=this;if(this.scoreTextPool.size()<=0){var n=cc.instantiate(this.scoreFxPrefab);this.scoreTextPool.put(n)}var s=this.scoreTextPool.get(),l=s.getComponent(cc.Label);s.color="time"===e?new cc.color("#FECA05"):new cc.color("#ffffff"),l.string="+"+o,s.parent=this.node,s.position=t,s.opacity=255,cc.tween(s).to(i.default.ANIMATE_DURATION_SCORE_TEXT,{position:{value:cc.v2(t.x-5+10*Math.random(),t.y+30*Math.random()+50),easing:"sineOutIn"},opacity:{value:0,easing:"sineOutIn"}}).call(function(){a.scoreTextPool.put(s)}).start()},addTimeBonusFx:function(t,e,i){var o=this;if(this.timeFxPool.size()<=0){var a=cc.instantiate(this.timeFxPrefab);this.timeFxPool.put(a)}var n=this.timeFxPool.get();n.parent=this.node,n.position=this.translatedBoardPos.add(t);var s=.4+.4*Math.random(),l=Math.random();n.getComponent(cc.MotionStreak).fadeTime=.8*s;var r=cc.tween,c=this.calculateCurrentTimeBarPos();r(n).parallel(r().to(s,{x:{value:c.x,easing:l>.5?"sineInOut":"linear"}}),r().to(s,{y:{value:c.y,easing:l>.5?"linear":"sineInOut"}})).call(function(){o.addScoreFx(o.calculateCurrentTimeBarPos(),"time",e),n.destroy();var t=cc.instantiate(o.timeBurstFxPrefab);t.parent=o.node,t.position=c,i()}).start()},calculateCurrentTimeBarPos:function(){return cc.v2(this.translatedTimeBarPos.x+(this.uiTimeBar.progress-.5)*this.uiTimeBar.node.width,this.translatedTimeBarPos.y)}}),cc._RF.pop()},{"./IngameCtor":"IngameCtor","./constants":"constants"}],IngameCtor:[function(t,e){"use strict";cc._RF.push(e,"14ba6kJELlDmpaThJABQGdw","IngameCtor"),n(t("./BoardCtor"));var i=n(t("./constants")),o=n(t("./libs/helpers")),a=n(t("./UICtor"));function n(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{uiController:a.default,tutorialFrames:[cc.Node],isPlaying:{get:function(){return this._isGameStart&&!this._isAnimating&&!this._isPaused}},tutorialStep:{get:function(){return this._tutorialStep},set:function(t){this._tutorialStep=t}},isInTutorial:{get:function(){return this._tutorialStep<i.default.TUTORIAL_MOVES.length}}},onLoad:function(){this.board=this.getComponent("BoardCtor"),this.uiController.ingameController=this,this.isAdShown=!1,cc.audioEngine.setMusicVolume(.6),this.sound=cc.sys.localStorage.getItem("massplay.animalFlash.sound")||"on",this.uiController.updateSoundToggle("on"===this.sound),this.updateBgm()},start:function(){this._isGameStart=!1,this._isAnimating=!1,this._tutorialStep=0,this.tutorialFrames.forEach(function(t){t.active=!1}),this.board.init(),this._level=0,this._score=0,this.setNewLevel()},resetLevelInfo:function(){this._startTime=o.default.getLevelTime(this._level),this._time=o.default.getLevelTime(this._level),this._targetScore=o.default.getLevelScore(this._level),this.uiController.updateStartTime(this._startTime),this.uiController.updateTime(this._time),this.uiController.updateTargetScore(this._targetScore),this.uiController.updateScore(this._score)},update:function(t){this._isGameStart&&!this.isInTutorial&&(this._time-=1e3*t,this.uiController.updateTime(this._time),this._time<=0&&!this._isAnimating&&this.endGame())},addScore:function(t){this._score+=t,this.uiController.updateScore(this._score)},addTime:function(t){this._time=Math.min(this._time+1e3*t,this._startTime),this.uiController.updateTime(this._time)},checkForLevelCompleted:function(){return this._score>=this._targetScore},pauseGameForAnimating:function(){this._isAnimating=!0,this.tutorialFrames.forEach(function(t){t.active=!1})},resumeGameFromAnimating:function(){this._isAnimating=!1,this.isInTutorial&&(this.tutorialFrames[this._tutorialStep].active=!0)},nextLevel:function(){var t=this;this._level++,this._isGameStart=!1,this.board.animateReshuffleBoard(),this.scheduleOnce(function(){t.setNewLevel()},i.default.ANIMATE_DURATION_CLEAR_BOARD_EACH_ROW+i.default.ANIMATE_DURATION_CLEAR_BOARD_BREAK_EACH_ROW*i.default.BOARD_ROW_SIZE)},setNewLevel:function(){var t=this;this.uiController.showNextLevelNotification(this._level),this.uiController.updateLevel(this._level),this.scheduleOnce(function(){t.resetLevelInfo(),t.board.currentChain=0,t.pauseGameForAnimating(),t.board.generateTiles(0===t._tutorialStep&&0==t._level,!1),t.scheduleOnce(function(){t._isGameStart=!0},i.default.ANIMATE_DURATION_DROP_GENERATED_TILES_EACH_ROW+i.default.ANIMATE_DURATION_DROP_GENERATED_TILES_BREAK_EACH_ROW*i.default.BOARD_ROW_SIZE)},i.default.ANIMATE_DURATION_NOTIF_SHOW+i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL)},pauseGame:function(){this.isInTutorial||(this._isPaused=!0,this.uiController.show("pause"),this.scheduleOnce(function(){cc.director.pause()},i.default.ANIMATE_DURATION_POPUP_SHOW))},resumeGame:function(){cc.director.resume(),this._isPaused=!1,this.uiController.hide("pause")},endGame:function(){var t=this;this._isGameStart=!1,this.uiController.shoWOutOfTimeNotification(),this.scheduleOnce(function(){t.uiController.updateResultValue(t._level,t._score,t._targetScore),t.uiController.show("result")},i.default.ANIMATE_DURATION_NOTIF_SHOW+i.default.ANIMATE_DURATION_NOTIF_WAIT+i.default.ANIMATE_DURATION_NOTIF_HIDE)},restartGame:function(){this.isAdShown||(this.isAdShown=!0,cc.audioEngine.stopAll(),o.default.showAds("next",!0,function(){cc.director.resume(),cc.director.loadScene("ingame")}))},quitGame:function(){this.isAdShown||(this.isAdShown=!0,cc.audioEngine.stopAll(),o.default.showAds("browse",!0,function(){cc.director.resume(),cc.director.loadScene("landing")}))},onToggleSound:function(){this.sound="on"===this.sound?"off":"on",cc.sys.localStorage.setItem("massplay.animalFlash.sound",this.sound),this.uiController.updateSoundToggle("on"===this.sound),this.updateBgm()},updateBgm:function(){}}),cc._RF.pop()},{"./BoardCtor":"BoardCtor","./UICtor":"UICtor","./constants":"constants","./libs/helpers":"helpers"}],LandingCtor:[function(t,e){"use strict";cc._RF.push(e,"55339on/wRL07IkyMYu8FJw","LandingCtor");var i=t("h5ad"),o=t("./libs/helpers");cc.Class({extends:cc.Component,properties:{soundButtonSprite:cc.Sprite,soundOnSprite:cc.SpriteFrame,soundOffSprite:cc.SpriteFrame,openingAnimation:cc.Animation},onLoad:function(){var t=this;this.sound=cc.sys.localStorage.getItem("massplay.animalFlash.sound")||"on",cc.audioEngine.setMusicVolume(.6),this.updateSoundToggle("on"===this.sound),this.node.active=!1,i.onStart({icon:o.getResourceUrl("icon"),color:"#3189DD",afterBreak:function(){t.node.active=!0,t.openingAnimation.play()}})},start:function(){},onPlayClicked:function(){cc.director.loadScene("ingame")},onToggleSoundClicked:function(){this.sound="on"===this.sound?"off":"on",cc.sys.localStorage.setItem("massplay.animalFlash.sound",this.sound),this.updateSoundToggle("on"===this.sound)},updateSoundToggle:function(t){this.soundButtonSprite.spriteFrame=t?this.soundOnSprite:this.soundOffSprite}}),cc._RF.pop()},{"./libs/helpers":"helpers",h5ad:1}],Tile:[function(t,e){"use strict";cc._RF.push(e,"d4edekFanxESLFqIaLf7XiX","Tile");var i=a(t("../libs/helpers")),o=a(t("../constants"));function a(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{typeSpriteFrames:[cc.SpriteFrame],debugLabel:cc.Label},start:function(){},setup:function(t,e){this.type=t,this.cell=e,this.isSpecial=this.type>=o.default.TILE_TYPE_NORMAL_NUMBER,this.getComponent(cc.Sprite).spriteFrame=this.typeSpriteFrames[t];var a=i.default.localPositionFromTileCoords(e.x,e.y);this.node.scale=this.getDefaultScale(),this.node.opacity=255,this.node.x=a.x,this.node.y=a.y,this.node.width=o.default.TILE_SPRITE_SIZE,this.node.height=o.default.TILE_SPRITE_SIZE,this.debugLabel.node.active=!1,this.unhighlight()},hightlight:function(){this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).repeatForever(cc.tween().to(.5,{color:new cc.color(o.default.TILE_HINT_COLOR)}).to(.5,{color:new cc.color("#000000")})).start()},unhighlight:function(){this.tween&&(this.tween.stop(),cc.tween(this.node).to(.2,{color:new cc.color("#000000")}).start())},update:function(){this.debugLabel.string="("+this.cell.x+", "+this.cell.y+")\n"+this.type},getDefaultScale:function(){return this.isSpecial?o.default.TILE_SPECIAL_SCALE:1}}),cc._RF.pop()},{"../constants":"constants","../libs/helpers":"helpers"}],UICtor:[function(t,e){"use strict";cc._RF.push(e,"32604sN3YpLH7A3Rg8oHRNn","UICtor");var i=a(t("./constants")),o=a(t("./libs/helpers"));function a(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{timeProgressBar:cc.ProgressBar,scoreProgressBar:cc.ProgressBar,scoreLabel:cc.Label,targetScoreLabel:cc.Label,timeMinLabel:cc.Label,timeSecLabel:cc.Label,roundLabel:cc.Label,roundResultLabel:cc.Label,scoreResultLabel:cc.Label,targetScoreResultLabel:cc.Label,popupOverlay:cc.Node,pausePopup:cc.Node,resultPopup:cc.Node,reshuffleNotification:cc.Node,nextLevelNotification:cc.Node,nextLevelNotificationAnimationFrame:cc.Node,nextLevelNotificationEffect:cc.Node,nextLevelNotificationLeftProp:cc.Node,nextLevelNotificationRightProp:cc.Node,nextLevelNotificationLabel:cc.Label,timeoutNotification:cc.Node,soundButtonSprite1:cc.Sprite,soundButtonSprite2:cc.Sprite,soundOnSprite:cc.SpriteFrame,soundOffSprite:cc.SpriteFrame},onLoad:function(){this.popupOverlay.active=!1,this.pausePopup.active=!1,this.resultPopup.active=!1,this.reshuffleNotification.active=!1,this.nextLevelNotification.active=!1,this.timeoutNotification.active=!1},start:function(){},updateStartTime:function(t){this.startTime=t},updateLevel:function(t){this.roundLabel.string=t+1},updateTime:function(t){t=Math.max(0,t);var e=o.default.formatTimer(t);this.timeMinLabel.string=e.minute,this.timeSecLabel.string=e.second;var i=t/this.startTime;i>0&&i<.1&&(i=.1),this.timeProgressBar.progress=i},updateTargetScore:function(t){this.targetScore=t,this.targetScoreLabel.string=t},updateScore:function(t){this.scoreLabel.string=t;var e=t/this.targetScore;e>0&&e<.1&&(e=.1),this.scoreProgressBar.progress=e},updateResultValue:function(t,e,i){this.roundResultLabel.string=t+1,this.targetScoreResultLabel.string=i,this.scoreResultLabel.string=e},show:function(t){this.popupOverlay.active=!0;var e=null;switch(t){case"pause":e=this.pausePopup;break;case"result":e=this.resultPopup}null!==e&&(e.active=!0,e.scale=0,cc.tween(e).to(i.default.ANIMATE_DURATION_POPUP_SHOW,{scale:1}).start())},hide:function(t){this.popupOverlay.active=!1;var e=null;switch(t){case"pause":e=this.pausePopup;break;case"result":e=this.resultPopup}null!==e&&cc.tween(e).to(i.default.ANIMATE_DURATION_POPUP_SHOW,{scale:0}).call(function(){e.active=!0}).start()},showNextLevelNotification:function(t){var e=this;this.nextLevelNotificationLabel.string=""+(t+1),this.nextLevelNotification.active=!0,this.nextLevelNotificationAnimationFrame.opacity=0,this.nextLevelNotificationAnimationFrame.y=-100,this.nextLevelNotificationEffect.scale=0;var o=cc.tween(this.nextLevelNotificationEffect).parallel(cc.tween().to(.5,{scale:1}),cc.tween().repeatForever(cc.tween().by(5,{angle:360}))).start();cc.tween(this.nextLevelNotificationEffect).delay(i.default.ANIMATE_DURATION_NOTIF_SHOW+i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL-.3).to(.3,{scale:.3}).call(function(){e.nextLevelNotificationEffect.scale=0,o.stop()}).start();var a=cc.v2(5*Math.random()+10,10*Math.random()+20),n=cc.v2(5*Math.random()+10,10*Math.random()+20),s=cc.v2(5*Math.random()+10,10*Math.random()+20),l=cc.v2(5*Math.random()+10,10*Math.random()+20);cc.tween(this.nextLevelNotificationLeftProp).delay(i.default.ANIMATE_DURATION_NOTIF_SHOW-.3*Math.random()).by(i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL/4,{x:-a.x,y:a.y}).by(i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL/4,{x:a.x,y:-a.y}).by(i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL/3.4,{x:-n.x,y:n.y}).by(i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL/3.4,{x:n.x,y:-n.y}).start(),cc.tween(this.nextLevelNotificationRightProp).delay(i.default.ANIMATE_DURATION_NOTIF_SHOW-.3*Math.random()).by(i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL/3.4,{x:s.x,y:s.y}).by(i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL/3.4,{x:-s.x,y:-s.y}).by(i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL/4,{x:l.x,y:l.y}).by(i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL/4,{x:-l.x,y:-l.y}).start(),cc.tween(this.nextLevelNotificationAnimationFrame).to(i.default.ANIMATE_DURATION_NOTIF_SHOW,{position:cc.v2(0,0),opacity:255}).delay(i.default.ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL).to(i.default.ANIMATE_DURATION_NOTIF_HIDE,{position:cc.v2(0,-100),opacity:0}).start()},showReshuffleNotification:function(){this.reshuffleNotification.active=!0,this.reshuffleNotification.opacity=0,this.reshuffleNotification.y=-100,cc.tween(this.reshuffleNotification).to(i.default.ANIMATE_DURATION_NOTIF_SHOW,{position:cc.v2(0,0),opacity:255}).delay(i.default.ANIMATE_DURATION_NOTIF_WAIT).to(i.default.ANIMATE_DURATION_NOTIF_HIDE,{position:cc.v2(0,-100),opacity:0}).start()},shoWOutOfTimeNotification:function(){this.timeoutNotification.active=!0,this.timeoutNotification.opacity=0,this.timeoutNotification.y=-100,cc.tween(this.timeoutNotification).to(i.default.ANIMATE_DURATION_NOTIF_SHOW,{position:cc.v2(0,0),opacity:255}).delay(i.default.ANIMATE_DURATION_NOTIF_WAIT).to(i.default.ANIMATE_DURATION_NOTIF_HIDE,{position:cc.v2(0,-100),opacity:0}).start()},updateSoundToggle:function(t){this.soundButtonSprite1.spriteFrame=t?this.soundOnSprite:this.soundOffSprite,this.soundButtonSprite2.spriteFrame=t?this.soundOnSprite:this.soundOffSprite},pauseClicked:function(){this.ingameController.pauseGame()},resumeClicked:function(){this.ingameController.resumeGame()},quitClicked:function(){this.ingameController.quitGame()},restartClicked:function(){this.ingameController.restartGame()},onSoundClicked:function(){this.ingameController.onToggleSound()}}),cc._RF.pop()},{"./constants":"constants","./libs/helpers":"helpers"}],constants:[function(t,e,i){"use strict";cc._RF.push(e,"027081N1wNHhZgaQobZoi8J","constants"),i.__esModule=!0,i.default=void 0,i.default={TILE_TYPE_NORMAL_NUMBER:5,TILE_TYPE_INDEX_SPECIAL_LINE:5,TILE_TYPE_INDEX_SPECIAL_TIME:6,TILE_TYPE_INDEX_SPECIAL_MATCH:7,TILE_TYPE_INDEX_SPECIAL_ROCK:8,TILE_SPECIAL_SCALE:1.3,TILE_SPECIAL_BONUS_TIME:15,TILE_SIZE:72,TILE_SPRITE_SIZE:64,BOARD_COLUMN_SIZE:7,BOARD_ROW_SIZE:7,TILE_HINT_COLOR:"333300",TILE_HINT_SHOWUP_TIME:3,LEVEL_SCORE:[3e3,6e3,1e4,15e3,21e3,28e3,35e3,42e3,49e3,56e3,61e3,68e3,75e3,82e3,9e4],LEVEL_TIME:[180,160,130,120,110,105,105,100,95,90,85,80,75,70,65,60],ANIMATE_DURATION_SWAP:.2,ANIMATE_DURATION_ADJOIN:.2,ANIMATE_DURATION_SPAWN_SPECIAL:.2,ANIMATE_DURATION_DROP_TILES:.25,ANIMATE_DURATION_DROP_GENERATED_TILES_EACH_ROW:.4,ANIMATE_DURATION_DROP_GENERATED_TILES_BREAK_EACH_ROW:.14,ANIMATE_DURATION_CLEAR_BOARD_EACH_ROW:.36,ANIMATE_DURATION_CLEAR_BOARD_BREAK_EACH_ROW:.1,ANIMATE_DURATION_SCORE_TEXT:.6,ANIMATE_DURATION_POPUP_SHOW:.2,ANIMATE_DURATION_NOTIF_SHOW:.3,ANIMATE_DURATION_NOTIF_WAIT:1,ANIMATE_DURATION_NOTIF_WAIT_NEXT_LEVEL:1,ANIMATE_DURATION_NOTIF_HIDE:.3,TUTORIAL_LAYOUT:[[0,1,2,3,2,0,1],[3,4,0,1,4,3,4],[1,2,3,4,0,4,3],[4,0,4,3,3,2,2],[2,3,2,0,1,0,1],[4,0,1,2,3,4,0],[3,4,0,1,2,3,4]],TUTORIAL_MOVES:[[{x:2,y:2},{x:2,y:3}],[{x:4,y:1},{x:4,y:2}],[{x:3,y:2},{x:4,y:2}]]},e.exports=i.default,cc._RF.pop()},{}],helpers:[function(t,e){"use strict";cc._RF.push(e,"25b0ch0ZN5CTrLtkqwGvZ7C","helpers");var i,o=(i=t("../constants"))&&i.__esModule?i:{default:i},a=t("h5ad");e.exports.getScoreScale=function(t){return 40+20*t},e.exports.localPositionFromTileCoords=function(t,e){return cc.v2((t-o.default.BOARD_COLUMN_SIZE/2+.5)*o.default.TILE_SIZE,(e-o.default.BOARD_ROW_SIZE/2+.5)*o.default.TILE_SIZE)},e.exports.tileCoordsFromlocalPosition=function(t,e){var i=o.default.TILE_SPRITE_SIZE/o.default.TILE_SIZE/2,a=(t+(o.default.BOARD_COLUMN_SIZE/2-.5)*o.default.TILE_SIZE)/o.default.TILE_SIZE,n=(e+(o.default.BOARD_ROW_SIZE/2-.5)*o.default.TILE_SIZE)/o.default.TILE_SIZE,s=Math.round(a),l=Math.round(n);return{x:s,y:l,spriteInBound:Math.abs(a-s)<=i&&Math.abs(n-l)<=i&&s>=0&&s<o.default.BOARD_COLUMN_SIZE&&l>=0&&l<o.default.BOARD_ROW_SIZE}},e.exports.formatDurationDHMSObject=function(t){t=Math.max(0,t);var e=Math.ceil(t/1e3),i=Math.floor(e/60),o=Math.floor(i/60),a=Math.floor(o/24);return{seconds:e%=60,minutes:i%=60,hours:o%=24,days:a}},e.exports.formatTimer=function(t){var e=this.formatDurationDHMSObject(t),i=e.seconds,o=e.minutes,a=e.hours,n=e.days,s=o>9||0===a?o:"0"+o,l=i>9?i:"0"+i;return n>=1?n+":"+a+":"+o+":"+i:a>=1?a+":"+s+":"+l:{hour:0,minute:s,second:l}},e.exports.getLevelScore=function(t){return t<o.default.LEVEL_SCORE.length?o.default.LEVEL_SCORE[t]:o.default.LEVEL_SCORE[o.default.LEVEL_SCORE.length-1]+5e3*(t-o.default.LEVEL_SCORE.length+1)},e.exports.getLevelTime=function(t){return 1e3*o.default.LEVEL_TIME[Math.min(t,o.default.LEVEL_TIME.length-1)]},e.exports.showAds=function(t,e,i){a.adBreak({type:t,beforeBreak:function(){e&&(cc.director.pause(),cc.audioEngine.pauseAll())},afterBreak:function(){e&&(cc.director.resume(),cc.audioEngine.resumeAll()),i&&i()},noBreak:function(){i&&i()}})},e.exports.getResourceUrl=function(t){var e=cc.resources.getInfoWithPath(t),i=e.uuid;return e.nativeVer&&(i+="."+e.nativeVer),"./assets/resources/native/"+i.substr(0,2)+"/"+i+".png"},cc._RF.pop()},{"../constants":"constants",h5ad:1}]},{},["BoardCtor","EffectorCtor","IngameCtor","LandingCtor","UICtor","constants","helpers","Tile"]);