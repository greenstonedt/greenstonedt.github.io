window.__require=function t(e,i,a){function o(n,r){if(!i[n]){if(!e[n]){var l=n.split("/");if(l=l[l.length-1],!e[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+n+"'")}n=l}var h=i[n]={exports:{}};e[n][0].call(h.exports,function(t){return o(e[n][1][t]||t)},h,h.exports,t,e,i,a)}return i[n].exports}for(var s="function"==typeof __require&&__require,n=0;n<a.length;n++)o(a[n]);return o}({BagBoosterItem:[function(t,e){"use strict";cc._RF.push(e,"522aaV68pdPjKN16YogApeQ","BagBoosterItem"),cc.Class({extends:cc.Component,properties:{airplane:{default:null,type:cc.SpriteFrame},fairystick:{default:null,type:cc.SpriteFrame},hammer:{default:null,type:cc.SpriteFrame},paintbrush:{default:null,type:cc.SpriteFrame},rocket:{default:null,type:cc.SpriteFrame},wheel:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.quantityLabel=this.node.getChildByName("quantity").getComponent(cc.Label),this.button=this.node.getChildByName("button"),this.button.on("click",this.onClicked,this)},loadData:function(t,e){this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.quantityLabel=this.node.getChildByName("quantity").getComponent(cc.Label),this.button=this.node.getChildByName("button"),this.data=t,this.onItemClicked=e,this.icon.spriteFrame=this[t.id],this.quantityLabel.string="x"+(t.amount||0)},updateNumber:function(t){this.quantityLabel.string="x"+(0|t)},onClicked:function(){this.onItemClicked&&this.onItemClicked(this.data.id)}}),cc._RF.pop()},{}],BagSubscene:[function(t,e){"use strict";cc._RF.push(e,"813cbcI64NCwrG5dM76T4yo","BagSubscene");var i=n(t("../../constants")),a=n(t("../../userState")),o=n(t("../../staticData/yard")),s=n(t("../../models/supplyModel"));function n(t){return t&&t.__esModule?t:{default:t}}function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var l=i.default.DEBUG,c=i.default.TIME_SPAN,h=l.FEEDING_ENVIRONMENT?20:c.ONE_SECOND;cc.Class({extends:cc.Component,properties:{BoosterItem:{default:null,type:cc.Prefab},SupplyItem:{default:null,type:cc.Prefab},GlowItem:{default:null,type:cc.Prefab},material_glow:{default:null,type:cc.Material}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.subsceneController=cc.find("Canvas").getComponent("SubsceneController"),this.wallpaper=this.node.getChildByName("wallpaper"),this.topFrame=this.node.getChildByName("topFrame"),this.topBar=this.topFrame.getChildByName("top"),this.topBg=this.topFrame.getChildByName("bg"),this.boostersTab=this.topFrame.getChildByName("boostersTab"),this.suppliesTab=this.topFrame.getChildByName("suppliesTab"),this.bottomFrame=this.node.getChildByName("bottomFrame"),this.bottomFramePlace=this.bottomFrame.getChildByName("frame"),this.bottomFrameEmpty=this.bottomFrame.getChildByName("placeNotification"),this.placeButton=this.bottomFramePlace.getChildByName("placeButton").getComponent(cc.Button),this.bottomFramePlace.active=!1,this.bottomFrameEmpty.active=!0,this.placeButton.node.on("click",this.onPlaceButtonClicked,this),this.boostersScrollView=this.node.getChildByName("boostersScrollview"),this.boostersScrollFrame=this.boostersScrollView.getChildByName("view").getChildByName("content"),this.suppliesScrollView=this.node.getChildByName("suppliesScrollview"),this.suppliesScrollFrame=this.suppliesScrollView.getChildByName("view").getChildByName("content"),this.glowLayer=this.suppliesScrollFrame.getChildByName("GlowLayer"),this.glowLayer.zIndex=2,this.topBg.zIndex=-2,this.boostersTab.on("click",this.onBoostersTabClicked,this),this.suppliesTab.on("click",this.onSuppliesTabClicked,this),this.selectTab("boosters"),this.app.boostersRefreshRequest=!0,this.app.suppliesRefreshRequest=!0,this.boosterItems={},this.supplyItems={},this.glowItems={},this.selectingSuppliesCount=0,this.glowTimer=0},onEnable:function(){this.app.boostersRefreshRequest&&(this.loadBoosterItems(),this.app.boostersRefreshRequest=!1),this.app.suppliesRefreshRequest&&(this.loadSupplyItems(),this.app.suppliesRefreshRequest=!1),this.clearGlowingSupplies()},onOpened:function(t){t&&t.tab&&this.selectTab(t.tab)},update:function(t){this.selectingSuppliesCount&&(this.glowTimer+=.7*t,this.material_glow.setProperty("hl_timer",this.glowTimer))},loadBoosterItems:function(){for(var t in this.boosterItems)this.boosterItems[t].node.destroy();this.boosterItems={};var e=a.default.getBoosters(),i=0;for(var o in e){var s=e[o];if(s.amount){var n=cc.instantiate(this.BoosterItem).getComponent("BagBoosterItem");n.node.setParent(this.boostersScrollFrame),n.node.x=i%2?240:-240,n.node.y=-50-640*Math.floor(.5*i),n.loadData(r({id:o},s),this.onBoosterItemClicked.bind(this)),this.boosterItems[o]=n,i++}}this.boostersScrollFrame.height=640*Math.ceil(.5*i)+100},loadSupplyItems:function(){for(var t in this.supplyItems)this.supplyItems[t].node.destroy();for(var e in this.glowItems)this.glowItems[e].node.destroy();this.supplyItems={},this.glowItems={};var i=s.default.getStarData().items,n=a.default.getYard(),r=0;for(var l in o.default.items){var c=cc.instantiate(this.SupplyItem).getComponent("BagSupplyItem");if(c.node.setParent(this.suppliesScrollFrame),c.node.x=r%2?240:-240,c.node.y=-50-500*Math.floor(.5*r),i.includes(l)?c.loadData({id:l,isPlaced:!!n[l]},this.onSupplyItemClicked.bind(this)):c.loadData(null,null),this.supplyItems[l]=c,r++,c.data){var h=cc.instantiate(this.GlowItem).getComponent("YardGlow");h.node.setParent(this.glowLayer),h.node.x=c.node.x+c.icon.node.x,h.node.y=c.node.y+c.icon.node.y+c.icon.node.height*c.icon.node.scale*.5,h.node.scale=c.node.scale*c.icon.node.scale,this.glowItems[l]=h,h.setGlowShape(c.data.id),h.node.active=!1}}this.suppliesScrollFrame.height=500*Math.ceil(.5*r)+100+this.bottomFrame.height*this.bottomFrame.scale},selectTab:function(t){this.selectingTab!==t&&(this.selectingTab=t,"boosters"===t?(this.boostersTab.getChildByName("selected").active=!0,this.boostersTab.getChildByName("unselected").active=!1,this.suppliesTab.getChildByName("selected").active=!1,this.suppliesTab.getChildByName("unselected").active=!0,this.boostersTab.zIndex=1,this.suppliesTab.zIndex=-1,this.boostersScrollView.active=!0,this.suppliesScrollView.active=!1,this.bottomFrame.active=!1):"supplies"===t&&(this.boostersTab.getChildByName("selected").active=!1,this.boostersTab.getChildByName("unselected").active=!0,this.suppliesTab.getChildByName("selected").active=!0,this.suppliesTab.getChildByName("unselected").active=!1,this.boostersTab.zIndex=-1,this.suppliesTab.zIndex=1,this.boostersScrollView.active=!1,this.suppliesScrollView.active=!0,this.bottomFrame.active=!0,this.clearGlowingSupplies()))},clearGlowingSupplies:function(){for(var t in this.bottomFramePlace.active=!1,this.bottomFrameEmpty.active=!0,this.selectingSuppliesCount=0,this.glowTimer=0,this.glowItems)this.glowItems[t].node.active=!1},onBoostersTabClicked:function(){this.selectTab("boosters")},onSuppliesTabClicked:function(){this.selectTab("supplies")},onBoosterItemClicked:function(t){this.subsceneController.switchScene("shop",{id:t})},onSupplyItemClicked:function(t){this.supplyItems[t].isPlaced||(this.glowItems[t].node.active?(this.glowItems[t].node.active=!1,this.selectingSuppliesCount--):(this.glowItems[t].node.active=!0,this.selectingSuppliesCount++,this.glowTimer=0),this.bottomFramePlace.active=this.selectingSuppliesCount>0,this.bottomFrameEmpty.active=0===this.selectingSuppliesCount)},onPlaceButtonClicked:function(){var t=a.default.getYard();for(var e in this.glowItems){var i=this.glowItems[e],s=this.supplyItems[e];i.node.active&&(t[e]||(t[e]={playingCat:null,nextUpdate:Date.now()+o.default.items[e].interval*h,x:-1,y:-1}),s.setPlaced(),i.node.active=!1)}a.default.saveYard(),this.app.yardViewRefreshRequest=!0,this.clearGlowingSupplies()},updateScreenSize:function(t,e){this.wallpaper.height=this.node.height,this.topFrame.y=.5*this.node.height,this.topFrame.scale=e,this.topBar.width=this.node.width/e,this.topBg.scale=this.node.scale/e;var i=162*e;this.bottomFrame.scale=e,this.bottomFrame.y=.5*-this.node.height+i+.5*this.bottomFrame.height*e;var a=this.topFrame.height*e;this.boostersScrollView.height=this.node.height-i-a,this.boostersScrollView.y=.5*(i-a),this.suppliesScrollView.height=this.node.height-i-a,this.suppliesScrollView.y=.5*(i-a)}}),cc._RF.pop()},{"../../constants":"constants","../../models/supplyModel":"supplyModel","../../staticData/yard":"yard","../../userState":"userState"}],BagSupplyItem:[function(t,e){"use strict";cc._RF.push(e,"73969qcc6xIXYVDwfzZPHIG","BagSupplyItem"),cc.Class({extends:cc.Component,properties:{bed:{default:null,type:cc.SpriteFrame},cushion:{default:null,type:cc.SpriteFrame},featherToy:{default:null,type:cc.SpriteFrame},hamburgerCushion:{default:null,type:cc.SpriteFrame},paperBag1:{default:null,type:cc.SpriteFrame},paperBag2:{default:null,type:cc.SpriteFrame},plushDoll:{default:null,type:cc.SpriteFrame},pot:{default:null,type:cc.SpriteFrame},rubberBallRainbow:{default:null,type:cc.SpriteFrame},rubberBallRed:{default:null,type:cc.SpriteFrame},stretchingBoard:{default:null,type:cc.SpriteFrame},swimRing:{default:null,type:cc.SpriteFrame},swing:{default:null,type:cc.SpriteFrame},tent:{default:null,type:cc.SpriteFrame},tower:{default:null,type:cc.SpriteFrame},tunnel:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.placedIcon=this.node.getChildByName("placed-icon"),this.materialNormal=this.icon.getMaterial(0),this.node.on("click",this.onClicked,this)},loadData:function(t,e){if(this.data=t,this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),t){var i=Math.max(this.icon.node.width,this.icon.node.height,400);this.icon.node.scale=400/i,this.onItemClicked=e,this.icon.spriteFrame=this[t.id],t.isPlaced&&this.setPlaced()}else this.placedIcon=this.node.getChildByName("placed-icon"),this.icon.node.active=!1,this.placedIcon.active=!1},setPlaced:function(){this.isPlaced=!0,this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.placedIcon=this.node.getChildByName("placed-icon"),this.icon.node.active=!1,this.placedIcon.active=!0},onClicked:function(){this.onItemClicked&&this.onItemClicked(this.data.id)}}),cc._RF.pop()},{}],BoosterController:[function(t,e){"use strict";cc._RF.push(e,"73f37xT8fJBY4i4PELSjVmR","BoosterController");var i=o(t("../userState")),a=o(t("../staticData/boosters"));function o(t){return t&&t.__esModule?t:{default:t}}var s=[0,20];cc.Class({extends:cc.Component,properties:{BoosterItem:{default:null,type:cc.Prefab}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.container=this.node.getChildByName("container"),this.overlay=this.container.getChildByName("overlay"),this.contentFrame=this.overlay.getChildByName("content"),this.boostersFrame=this.contentFrame.getChildByName("boosters");var t=this.contentFrame.getChildByName("effect");this.lightstar=t.getChildByName("lightstar"),this.starFx1=t.getChildByName("star1").getComponent(cc.ParticleSystem),this.starFx2=t.getChildByName("star2").getComponent(cc.ParticleSystem),this.overlay.zIndex=1,this.overlay.active=!1,this.isActive=!1,this.selectingType=null,this.selectingTemporary=null,this.lockedUserInteraction=!1,this.animating=!1,this.starFx1.node.active=!1,this.starFx2.node.active=!1,this.selectedSubcolor="basic1",this.paintbrushFrame=this.boostersFrame.getChildByName("paintbrush"),this.paintbrushFrame.getChildByName("basic1").on("click",this.onColorSelelected,this),this.paintbrushFrame.getChildByName("basic2").on("click",this.onColorSelelected,this),this.paintbrushFrame.getChildByName("basic3").on("click",this.onColorSelelected,this),this.paintbrushFrame.getChildByName("basic4").on("click",this.onColorSelelected,this),this.paintbrushFrame.getChildByName("basic5").on("click",this.onColorSelelected,this),this.selectedColorCursor=this.paintbrushFrame.getChildByName("selected"),this.selectedColorCursor.position=this.paintbrushFrame.getChildByName(this.selectedSubcolor).position,this.boosterItems=null},getPaintbrushTargetType:function(){return this.selectedSubcolor},preAddTemporaryBoosters:function(t,e,i){this.temporaryBoosters||(this.temporaryBoosters={}),this.temporaryBoosters[t]||(this.temporaryBoosters[t]={amount:0,catId:null}),this.temporaryBoosters[t].amount+=i,this.temporaryBoosters[t].catId=e},init:function(t){this.gameBoard=t.gameBoard,this.tutorialController=t.tutorialController,this.isActive=!1;var e=t.level,o=(null==e?void 0:e.mandatoryBoosters)||{},n=(null==e?void 0:e.bonusBoosters)||{};for(var r in this.temporaryBoosters||(this.temporaryBoosters={}),this.data=i.default.getBoosters(),this.tempItems={},this.items={},this.lockedUserInteraction=!1,this.container=this.node.getChildByName("container"),n)this.data[r].amount+=n[r];i.default.saveBoostersState();var l=Object.keys(this.temporaryBoosters).length;for(var c in a.default)(this.data[c]&&this.data[c].selected||o[c])&&l++;var h=s[0]-95*(l-1),d=0;for(var u in this.boosterItems={},this.temporaryBoosters){var p={},m=u,f=this.temporaryBoosters[u].amount,g=this.temporaryBoosters[u].catId;p=cc.instantiate(this.BoosterItem).getComponent("BoosterItem"),this.tempItems[m]=p,p.node.parent=this.container,p.node.x=h+190*d,p.node.y=s[1]+.5*this.node.height,p.node.scale=160/p.node.width,p.loadBooster({type:m,number:f,isTemporary:!0,catId:g},this.onItemClicked.bind(this)),d++}for(var y in a.default)if(this.data[y]&&(this.data[y].selected||o[y])){var b={},v=this.data[y].amount;b=cc.instantiate(this.BoosterItem).getComponent("BoosterItem"),this.items[y]=b,b.node.parent=this.container,b.node.x=h+190*d,b.node.y=s[1]+.5*this.node.height,b.node.scale=160/b.node.width,b.loadBooster({type:y,number:v},this.onItemClicked.bind(this)),d++,this.boosterItems[y]=b}},update:function(t){this.lightstar&&this.app&&(this.lightstar.angle+=20*t,this.lightstar.scale=.9+.05*Math.sin(this.app.now/1e3*4))},onItemClicked:function(t,e){this.animating||this.lockedUserInteraction||this.tutorialController.validateBooster(t)&&(this.isActive?this.cancelBoosterMode():this.gameBoard.isIdle&&(e||0!==this.data[t].amount)&&(e&&0===this.temporaryBoosters[t].amount||this.tutorialController.stepUp("booster")&&this.enterBoosterMode(t,e)))},onCancelButtonClicked:function(){this.cancelBoosterMode()},onColorSelelected:function(t){this.tutorialController.validatePaintbrush(t.node.name)&&this.tutorialController.stepUp("paintbrush")&&(this.selectedSubcolor=t.node.name,this.selectedColorCursor.position=this.paintbrushFrame.getChildByName(this.selectedSubcolor).position,this.tutorialController.triggerTutorial())},lockUserInteraction:function(){this.lockedUserInteraction=!0,this.cancelBoosterMode()},unlockUserInteraction:function(){this.lockedUserInteraction=!1},enterBoosterMode:function(t,e){var i=this;this.isActive=!0,this.selectingType=t,this.selectingTemporary=e,this.gameBoard.enterBoosterMode(t,e);var a=e?this.tempItems:this.items;a[t].node.zIndex=2,a[t].setSelected(!0),this.boostersFrame.children.forEach(function(e){e.active=e.name===t}),this.starFx1.resetSystem(),this.starFx2.resetSystem(),this.animating=!0,this.overlay.active=!0,this.overlay.opacity=0,cc.tween(this.overlay).to(.3,{opacity:255},{easing:"quadOut"}).call(function(){i.starFx1.resetSystem(),i.starFx2.resetSystem(),i.starFx1.node.active=!0,i.starFx2.node.active=!0,i.animating=!1,i.tutorialController.triggerTutorial()}).start()},exitBoosterMode:function(t,e,i){var a=this;if(this.isActive){this.isActive=!1,i?this.tempItems:this.items;var o=this.selectingTemporary?this.tempItems:this.items;this.selectingType&&(o[this.selectingType].node.zIndex=0),this.selectingType&&o[this.selectingType].setSelected(!1),this.selectingType=null,this.selectingTemporary=null,this.overlay.active=!1,t&&this.reduceType(e,i),this.starFx1.node.active=!1,this.starFx2.node.active=!1,this.animating=!0,this.overlay.active=!0,this.overlay.opacity=255,cc.tween(this.overlay).to(.3,{opacity:0},{easing:"quadOut"}).call(function(){a.overlay.active=!1,a.animating=!1}).start()}},cancelBoosterMode:function(){this.exitBoosterMode(!1),this.gameBoard.cancelBoosterMode()},reduceType:function(t,e){e?(this.temporaryBoosters[t].amount=Math.max(this.temporaryBoosters[t].amount-1,0),this.tempItems[t].updateNumber(this.temporaryBoosters[t].amount)):(this.data[t].amount=Math.max(this.data[t].amount-1,0),i.default.saveBoostersState(),this.items[t].updateNumber(this.data[t].amount))}}),cc._RF.pop()},{"../staticData/boosters":"boosters","../userState":"userState"}],BoosterItem:[function(t,e){"use strict";cc._RF.push(e,"9f92beGPJNOEZqDiRsEd+7l","BoosterItem"),cc.Class({extends:cc.Component,properties:{airplane:{default:null,type:cc.SpriteFrame},fairystick:{default:null,type:cc.SpriteFrame},hammer:{default:null,type:cc.SpriteFrame},paintbrush:{default:null,type:cc.SpriteFrame},rocket:{default:null,type:cc.SpriteFrame},wheel:{default:null,type:cc.SpriteFrame},bella:{default:null,type:cc.SpriteFrame},bob:{default:null,type:cc.SpriteFrame},dora:{default:null,type:cc.SpriteFrame},leo:{default:null,type:cc.SpriteFrame},lily:{default:null,type:cc.SpriteFrame},luna:{default:null,type:cc.SpriteFrame},max:{default:null,type:cc.SpriteFrame},milo:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.frame=this.node.getChildByName("frame"),this.frameSelected=this.node.getChildByName("frame_selected"),this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.tempCat=this.node.getChildByName("tempCat").getComponent(cc.Sprite),this.numberLabel=this.node.getChildByName("number").getComponent(cc.Label),this.redPoint=this.node.getChildByName("redpoint"),this.lockIcon=this.node.getChildByName("lockIcon"),this.frameSelected.active=!1,this.node.on("click",this.onClicked,this)},loadBooster:function(t,e){void 0===e&&(e=null),this.onItemClicked=e,this.type=t.type,this.icon.spriteFrame=this[t.type],this.numberLabel.string=t.number||0,this.isTemporary=t.isTemporary||!1,this.icon.node.active=!0,this.redPoint.active=!0,this.numberLabel.node.active=!0,this.lockIcon.active=!1,this.tempCat.node.active=this.isTemporary,this.isTemporary&&(this.tempCat.spriteFrame=this[t.catId])},setLocked:function(){this.icon.node.active=!1,this.redPoint.active=!1,this.numberLabel.node.active=!1,this.lockIcon.active=!0,this.tempCat.node.active=!1},setSelected:function(t){this.frame.active=!t,this.frameSelected.active=t},updateNumber:function(t){this.numberLabel.string=0|t},onClicked:function(){this.onItemClicked&&this.onItemClicked(this.type,this.isTemporary)}}),cc._RF.pop()},{}],BottomUIButton:[function(t,e){"use strict";cc._RF.push(e,"f724adbdLVFYYWo/SCy2BYs","BottomUIButton"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.animating=!1},setSelected:function(t,e){void 0===e&&(e=!1),this.selectedBacker=this.node.getChildByName("choosebg"),this.selectedIconBacker=this.node.getChildByName("choose-iconBg"),this.normalIconBacker=this.node.getChildByName("iconBg"),this.icon=this.node.getChildByName("icon"),this.label=this.node.getChildByName("label"),e?(this.animating=!0,t?(this.selectedBacker.active=!0,this.selectedIconBacker.active=!0,this.label.active=!0,cc.tween(this.selectedBacker).to(.3,{opacity:255},{easing:"quadOut"}).start(),cc.tween(this.selectedIconBacker).to(.3,{opacity:255,y:50},{easing:"quadOut"}).start(),cc.tween(this.normalIconBacker).to(.15,{opacity:0,y:52},{easing:"quadOut"}).call(this.normalIconBacker.active=!1).start(),cc.tween(this.label).to(.3,{opacity:255,y:-56},{easing:"quadOut"}).start(),cc.tween(this.icon).to(.3,{scale:1,y:56},{easing:"quadOut"}).call(this.animating=!1).start()):(this.normalIconBacker.active=!0,cc.tween(this.selectedBacker).to(.3,{opacity:0},{easing:"quadOut"}).call(this.selectedBacker.active=!1).start(),cc.tween(this.selectedIconBacker).to(.3,{opacity:0,y:0},{easing:"quadOut"}).call(this.selectedIconBacker.active=!1).start(),cc.tween(this.normalIconBacker).to(.3,{opacity:255,y:0},{easing:"quadOut"}).start(),cc.tween(this.label).to(.3,{opacity:0,y:-106},{easing:"quadOut"}).call(this.label.active=!1).start(),cc.tween(this.icon).to(.3,{scale:.9,y:-4},{easing:"quadOut"}).call(this.animating=!1).start())):(this.selectedBacker.active=t,this.selectedIconBacker.active=t,this.normalIconBacker.active=!t,this.label.active=t,this.selectedBacker.opacity=t?255:0,this.selectedIconBacker.y=t?50:0,this.selectedIconBacker.opacity=t?255:0,this.normalIconBacker.opacity=t?0:255,this.normalIconBacker.y=t?52:0,this.label.opacity=t?255:0,this.label.y=t?-56:-106,this.icon.y=t?56:-4,this.icon.scale=t?1:.9)}}),cc._RF.pop()},{}],BottomUI:[function(t,e){"use strict";cc._RF.push(e,"5d81bVhjMFBDJtD02dDq0ze","BottomUI"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.homeButton=this.node.getChildByName("HomeButton").getComponent("BottomUIButton"),this.shopButton=this.node.getChildByName("ShopButton").getComponent("BottomUIButton"),this.catButton=this.node.getChildByName("CatButton").getComponent("BottomUIButton"),this.bagButton=this.node.getChildByName("BagButton").getComponent("BottomUIButton"),this.settingsButton=this.node.getChildByName("SettingsButton").getComponent("BottomUIButton"),this.homeButton.node.on("click",this.onButtonClicked,this),this.shopButton.node.on("click",this.onButtonClicked,this),this.catButton.node.on("click",this.onButtonClicked,this),this.bagButton.node.on("click",this.onButtonClicked,this),this.settingsButton.node.on("click",this.onButtonClicked,this),this.buttonMap={home:this.homeButton,shop:this.shopButton,cat:this.catButton,bag:this.bagButton,settings:this.settingsButton},this.selectedId=!1,this.homeButton.setSelected(!1),this.shopButton.setSelected(!1),this.catButton.setSelected(!1),this.bagButton.setSelected(!1),this.settingsButton.setSelected(!1)},onButtonClicked:function(t){if(!this.isButtonAnimating()){var e=null;for(var i in this.buttonMap)if(this.buttonMap[i].node===t.node){e=i;break}e&&this.selectedId!==e&&this.node.emit("buttonClicked",e)}},selectButton:function(t,e){void 0===e&&(e=!1);var i=this.buttonMap[this.selectedId],a=this.buttonMap[t];this.selectedId&&i.setSelected(!1,e),a.setSelected(!0,e),this.selectedId=t},isButtonAnimating:function(){return this.homeButton.animating||this.shopButton.animating||this.catButton.animating||this.bagButton.animating||this.settingsButton.animating},show:function(t){var e=this;void 0===t&&(t=!1),this.node.active=!0,t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:255},{easing:"quadOut"}).call(function(){e.animating=!1}).start()):this.node.opacity=255},hide:function(t){var e=this;void 0===t&&(t=!1),t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:0},{easing:"quadOut"}).call(function(){e.node.active=!1,e.animating=!1}).start()):(this.node.active=!1,this.node.opacity=0)},updateScreenSize:function(t,e){this.node.scale=e,this.node.getChildByName("backer").width=this.node.width/e*Math.max(1,t.ratio)}}),cc._RF.pop()},{}],CatCommands:[function(t,e,i){"use strict";cc._RF.push(e,"724e2Ntk2BA9b92owQ+pVr/","CatCommands"),i.__esModule=!0,i.default=void 0;var a=s(t("../userState")),o=s(t("../models/catModels"));function s(t){return t&&t.__esModule?t:{default:t}}var n={feed:function(t,e){var i=o.default.getCat(t),s=a.default.getFish(),n=Math.min(s,e,i.config.feedablePerDay-i.data.dailyFed,i.intimacyCap-i.data.fishFed),r={cat:i,dailyFeedChanged:!1,intimacyChanged:!1};if(!n)return r;var l=i.getIntimacyLevel();r.dailyFeedChanged=!0,i.data.dailyFed+=n,i.data.fishFed+=n,a.default.updateFish(-n),a.default.saveCats();var c=i.getIntimacyLevel();return r.intimacyChanged=c!==l,r}};i.default=n,e.exports=i.default,cc._RF.pop()},{"../models/catModels":"catModels","../userState":"userState"}],CatItem:[function(t,e){"use strict";cc._RF.push(e,"73eebhOTUhA8bG8m3daRema","CatItem"),cc.Class({extends:cc.Component,properties:{normalBacker:{default:null,type:cc.SpriteFrame},lockedBacker:{default:null,type:cc.SpriteFrame},thumbnail_bella:{default:null,type:cc.SpriteFrame},thumbnail_bob:{default:null,type:cc.SpriteFrame},thumbnail_dora:{default:null,type:cc.SpriteFrame},thumbnail_leo:{default:null,type:cc.SpriteFrame},thumbnail_lily:{default:null,type:cc.SpriteFrame},thumbnail_luna:{default:null,type:cc.SpriteFrame},thumbnail_max:{default:null,type:cc.SpriteFrame},thumbnail_milo:{default:null,type:cc.SpriteFrame},thumbnail_locked:{default:null,type:cc.SpriteFrame},normalColor:{default:cc.Color.WHITE},lockedColor:{default:cc.Color.WHITE}},loadItem:function(t,e){void 0===e&&(e=null),this.onClickCb=e,this.node.on("click",this.onClicked,this),this.cat=t;var i=t.data.unlocked,a=t.getIntimacyLevel(),o=this.node.getComponent(cc.Sprite),s=this.node.getChildByName("nameLabel").getComponent(cc.Label),n=this.node.getChildByName("catImage").getComponent(cc.Sprite);o.spriteFrame=i?this.normalBacker:this.lockedBacker,s.string=t.config.name,s.color=i?this.normalColor:this.lockedColor,n.spriteFrame=i?this["thumbnail_"+t.id]:this.thumbnail_locked;for(var r=1;r<=3;r++)this.node.getChildByName("intimacyBar_"+r).active=r<=a&&i},onClicked:function(){this.onClickCb&&this.onClickCb(this.cat)}}),cc._RF.pop()},{}],CatSubscene:[function(t,e){"use strict";cc._RF.push(e,"2c554SOoSBPrrxCAZVTgPLw","CatSubscene");var i,a=(i=t("../../models/catModels"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{yardItemView:{default:null,type:cc.Prefab}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.subsceneController=cc.find("Canvas").getComponent("SubsceneController");var t=this.node.getChildByName("popup").getChildByName("frame").getChildByName("innerFrame");this.catContainer=t.getChildByName("catContainer"),this.detailFrame=this.node.getChildByName("detailFrame"),this.detailFrame.getChildByName("backIcon").on("click",this.hideDetail,this),this.app.catRefreshRequest=!0},onEnable:function(){this.detailFrame.active=!1,this.app.catRefreshRequest&&(this.refreshCatItems(),this.app.catRefreshRequest=!1)},refreshCatItems:function(){var t=this;a.default.getAllCats().forEach(function(e){var i=t.catContainer.getChildByName("CatItem_"+e.id).getComponent("CatItem");i&&i.loadItem(e,t.showDetail.bind(t))})},updateScreenSize:function(t,e){this.uiScale=e,this.frame=t,this.node.getChildByName("wallpaper").scale=Math.max(1024/1940/t.ratio,.7);var i=this.node.getChildByName("popup");i.scale=Math.min(1.15*e,1.1),i.y=64*i.scale;var a=this.node.getChildByName("detailFrame"),o=a.getChildByName("backIcon"),s=a.getChildByName("name"),n=a.getChildByName("intimacyFrame"),r=a.getChildByName("skillFrame"),l=a.getChildByName("favoriteFrame");o.scale=e,o.x=.5*-this.node.width+100*e,o.y=.5*this.node.height-100*e,s.scale=e,s.y=.5*this.node.height-100*e,n.scale=e,n.y=s.y-.5*s.height*s.scale-(.5*n.height*n.scale+62*e),r.scale=e,r.y=n.y-.5*n.height*n.scale-(.5*r.height*r.scale+140*e),l.scale=e,l.y=r.y-.5*r.height*r.scale-(.5*l.height*l.scale+130*e)},showDetail:function(t){this.detailFrame.active=!0,this.updateScreenSize(this.frame,this.uiScale),this.detailFrame.getChildByName("backIcon");var e=this.detailFrame.getChildByName("name").getComponent(cc.Label),i=this.detailFrame.getChildByName("intimacyFrame"),a=i.getChildByName("catImageFrame"),o=a.getChildByName("cat").getComponent("CatView"),s=a.getChildByName("number").getComponent(cc.Label),n=i.getChildByName("progressBar").getComponent(cc.ProgressBar),r=n.node.getChildByName("gift1"),l=n.node.getChildByName("gift2"),c=this.detailFrame.getChildByName("skillFrame"),h=c.getChildByName("label").getComponent(cc.Label),d=this.detailFrame.getChildByName("favoriteFrame"),u=d.getChildByName("container");e.string=t.config.name,s.string=String(t.number).padStart(2,"0"),h.string=t.getCurrentSkillDesc(),n.progress=t.data.fishFed/t.intimacyCap,r.x=.5*-n.node.width+n.node.width*(t.config.feedLevels[1]/t.intimacyCap),l.x=.5*-n.node.width+n.node.width*(t.config.feedLevels[2]/t.intimacyCap),o.loadCat(t.id),u.children.forEach(function(t){t.destroy()});var p=t.favorites.length>4?2:1;d.height=2===p?380:240,u.height=d.height-50,d.y=c.y-.5*c.height*c.scale-(.5*d.height*d.scale+130*this.uiScale);for(var m=u.width/Math.min(t.favorites.length,4),f=u.height/Math.ceil(t.favorites.length/4),g=Math.min(m,f),y=0;y<t.favorites.length;y++){var b=cc.instantiate(this.yardItemView).getComponent("YardItemView");u.addChild(b.node),b.loadItem(t.favorites[y]);var v=Math.floor(y/4),C=Math.min(t.favorites.length-4*v,4);b.node.x=-C*g*.5+.5*g+y%4*g,b.node.y=g*p*.5-.5*g-v*g;var S=Math.max(Math.max(b.node.width,b.node.height)/g,1);b.node.width/=S,b.node.height/=S}},hideDetail:function(){this.detailFrame.active=!1}}),cc._RF.pop()},{"../../models/catModels":"catModels"}],CatView:[function(t,e){"use strict";cc._RF.push(e,"5c9e1L16tlFoY74Ty0CinZy","CatView"),cc.Class({extends:cc.Component,properties:{bella:{default:null,type:cc.SpriteFrame},bob:{default:null,type:cc.SpriteFrame},dora:{default:null,type:cc.SpriteFrame},leo:{default:null,type:cc.SpriteFrame},lily:{default:null,type:cc.SpriteFrame},luna:{default:null,type:cc.SpriteFrame},max:{default:null,type:cc.SpriteFrame},milo:{default:null,type:cc.SpriteFrame}},loadCat:function(t){this.node.getComponent(cc.Sprite).spriteFrame=this[t]||null}}),cc._RF.pop()},{}],ConfirmationController:[function(t,e){"use strict";cc._RF.push(e,"eb639vxdeZL+LoDGmNo9NYm","ConfirmationController"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.backer=this.node.getChildByName("backer"),this.popup=this.node.getChildByName("popup"),this.text=this.popup.getChildByName("text").getComponent(cc.Label),this.yesButton=this.popup.getChildByName("yesButton").getComponent(cc.Button),this.noButton=this.popup.getChildByName("noButton").getComponent(cc.Button),this.animating=!1,this.yesButton.node.on("click",this.onYesButtonClicked,this),this.noButton.node.on("click",this.onNoButtonClicked,this),this.hide()},hide:function(t){var e=this;return void 0===t&&(t=!1),new Promise(function(i){if(!t)return e.node.active=!1,void i();e.animating=!0,e.popup.scale=1,e.popup.opacity=255,e.backer.opacity=200,cc.tween(e.backer).to(.3,{opacity:0},{easing:"sineOut"}).start(),cc.tween(e.popup).to(.4,{scale:0,opacity:0},{easing:"sineOut"}).call(function(){e.animating=!1,e.node.active=!1,i()}).start()})},show:function(t,e,i){var a=this;return void 0===i&&(i=!1),this.text.string=t,this.callback=e,new Promise(function(t){a.node.active=!0,i?(a.animating=!0,a.popup.scale=0,a.popup.opacity=0,a.backer.opacity=0,cc.tween(a.backer).to(.3,{opacity:200},{easing:"quadOut"}).start(),a.popup.scale=0,a.popup.opacity=0,cc.tween(a.popup).to(.4,{scale:1,opacity:255},{easing:"quadOut"}).call(function(){a.animating=!1}).start()):t()})},updateScreenSize:function(){var t=this.node.parent;this.node.width=t.width,this.node.height=t.height,this.node.getChildByName("backer").height=this.node.height},onYesButtonClicked:function(){var t=this;this.animating||this.hide(!0).then(function(){return t.callback&&t.callback()})},onNoButtonClicked:function(){this.animating||this.hide(!0)}}),cc._RF.pop()},{}],1:[function(t,e){"use strict";const i=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(t("./simplex-noise.js"));i.default.SimplexNoise=i.default,e.exports=i.default},{"./simplex-noise.js":2}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.buildPermutationTable=i.SimplexNoise=void 0;const a=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,s=1/3,n=1/6,r=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20,c=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),h=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);class d{constructor(t=Math.random){const e="function"==typeof t?t:p(t);this.p=u(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(let i=0;i<512;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}noise2D(t,e){const i=this.permMod12,s=this.perm;let n=0,r=0,l=0;const h=(t+e)*a,d=Math.floor(t+h),u=Math.floor(e+h),p=(d+u)*o,m=t-(d-p),f=e-(u-p);let g,y;m>f?(g=1,y=0):(g=0,y=1);const b=m-g+o,v=f-y+o,C=m-1+2*o,S=f-1+2*o,w=255&d,B=255&u;let I=.5-m*m-f*f;if(I>=0){const t=3*i[w+s[B]];n=(I*=I)*I*(c[t]*m+c[t+1]*f)}let x=.5-b*b-v*v;if(x>=0){const t=3*i[w+g+s[B+y]];r=(x*=x)*x*(c[t]*b+c[t+1]*v)}let F=.5-C*C-S*S;if(F>=0){const t=3*i[w+1+s[B+1]];l=(F*=F)*F*(c[t]*C+c[t+1]*S)}return 70*(n+r+l)}noise3D(t,e,i){const a=this.permMod12,o=this.perm;let r,l,h,d;const u=(t+e+i)*s,p=Math.floor(t+u),m=Math.floor(e+u),f=Math.floor(i+u),g=(p+m+f)*n,y=t-(p-g),b=e-(m-g),v=i-(f-g);let C,S,w,B,I,x;y>=b?b>=v?(C=1,S=0,w=0,B=1,I=1,x=0):y>=v?(C=1,S=0,w=0,B=1,I=0,x=1):(C=0,S=0,w=1,B=1,I=0,x=1):b<v?(C=0,S=0,w=1,B=0,I=1,x=1):y<v?(C=0,S=1,w=0,B=0,I=1,x=1):(C=0,S=1,w=0,B=1,I=1,x=0);const F=y-C+n,k=b-S+n,_=v-w+n,T=y-B+2*n,N=b-I+2*n,M=v-x+2*n,O=y-1+3*n,P=b-1+3*n,E=v-1+3*n,R=255&p,L=255&m,D=255&f;let A=.6-y*y-b*b-v*v;if(A<0)r=0;else{const t=3*a[R+o[L+o[D]]];r=(A*=A)*A*(c[t]*y+c[t+1]*b+c[t+2]*v)}let j=.6-F*F-k*k-_*_;if(j<0)l=0;else{const t=3*a[R+C+o[L+S+o[D+w]]];l=(j*=j)*j*(c[t]*F+c[t+1]*k+c[t+2]*_)}let U=.6-T*T-N*N-M*M;if(U<0)h=0;else{const t=3*a[R+B+o[L+I+o[D+x]]];h=(U*=U)*U*(c[t]*T+c[t+1]*N+c[t+2]*M)}let Y=.6-O*O-P*P-E*E;if(Y<0)d=0;else{const t=3*a[R+1+o[L+1+o[D+1]]];d=(Y*=Y)*Y*(c[t]*O+c[t+1]*P+c[t+2]*E)}return 32*(r+l+h+d)}noise4D(t,e,i,a){const o=this.perm;let s,n,c,d,u;const p=(t+e+i+a)*r,m=Math.floor(t+p),f=Math.floor(e+p),g=Math.floor(i+p),y=Math.floor(a+p),b=(m+f+g+y)*l,v=t-(m-b),C=e-(f-b),S=i-(g-b),w=a-(y-b);let B=0,I=0,x=0,F=0;v>C?B++:I++,v>S?B++:x++,v>w?B++:F++,C>S?I++:x++,C>w?I++:F++,S>w?x++:F++;const k=B>=3?1:0,_=I>=3?1:0,T=x>=3?1:0,N=F>=3?1:0,M=B>=2?1:0,O=I>=2?1:0,P=x>=2?1:0,E=F>=2?1:0,R=B>=1?1:0,L=I>=1?1:0,D=x>=1?1:0,A=F>=1?1:0,j=v-k+l,U=C-_+l,Y=S-T+l,X=w-N+l,G=v-M+2*l,q=C-O+2*l,V=S-P+2*l,H=w-E+2*l,z=v-R+3*l,W=C-L+3*l,J=S-D+3*l,Q=w-A+3*l,Z=v-1+4*l,K=C-1+4*l,$=S-1+4*l,tt=w-1+4*l,et=255&m,it=255&f,at=255&g,ot=255&y;let st=.6-v*v-C*C-S*S-w*w;if(st<0)s=0;else{const t=o[et+o[it+o[at+o[ot]]]]%32*4;s=(st*=st)*st*(h[t]*v+h[t+1]*C+h[t+2]*S+h[t+3]*w)}let nt=.6-j*j-U*U-Y*Y-X*X;if(nt<0)n=0;else{const t=o[et+k+o[it+_+o[at+T+o[ot+N]]]]%32*4;n=(nt*=nt)*nt*(h[t]*j+h[t+1]*U+h[t+2]*Y+h[t+3]*X)}let rt=.6-G*G-q*q-V*V-H*H;if(rt<0)c=0;else{const t=o[et+M+o[it+O+o[at+P+o[ot+E]]]]%32*4;c=(rt*=rt)*rt*(h[t]*G+h[t+1]*q+h[t+2]*V+h[t+3]*H)}let lt=.6-z*z-W*W-J*J-Q*Q;if(lt<0)d=0;else{const t=o[et+R+o[it+L+o[at+D+o[ot+A]]]]%32*4;d=(lt*=lt)*lt*(h[t]*z+h[t+1]*W+h[t+2]*J+h[t+3]*Q)}let ct=.6-Z*Z-K*K-$*$-tt*tt;if(ct<0)u=0;else{const t=o[et+1+o[it+1+o[at+1+o[ot+1]]]]%32*4;u=(ct*=ct)*ct*(h[t]*Z+h[t+1]*K+h[t+2]*$+h[t+3]*tt)}return 27*(s+n+c+d+u)}}function u(t){const e=new Uint8Array(256);for(let i=0;i<256;i++)e[i]=i;for(let i=0;i<255;i++){const a=i+~~(t()*(256-i)),o=e[i];e[i]=e[a],e[a]=o}return e}function p(t){let e=0,i=0,a=0,o=1;const s=m();return e=s(" "),i=s(" "),a=s(" "),(e-=s(t))<0&&(e+=1),(i-=s(t))<0&&(i+=1),(a-=s(t))<0&&(a+=1),function(){const t=2091639*e+2.3283064365386963e-10*o;return e=i,i=a,a=t-(o=0|t)}}function m(){let t=4022871197;return function(e){e=e.toString();for(let i=0;i<e.length;i++){let a=.02519603282416938*(t+=e.charCodeAt(i));a-=t=a>>>0,t=(a*=t)>>>0,t+=4294967296*(a-=t)}return 2.3283064365386963e-10*(t>>>0)}}i.SimplexNoise=d,i.default=d,i.buildPermutationTable=u},{}],3:[function(t,e){"use strict";var i={linear:function(t,e,i,a){return(i-e)*t/a+e},easeInQuad:function(t,e,i,a){return(i-e)*(t/=a)*t+e},easeOutQuad:function(t,e,i,a){return-(i-e)*(t/=a)*(t-2)+e},easeInOutQuad:function(t,e,i,a){var o=i-e;return(t/=a/2)<1?o/2*t*t+e:-o/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,a){return(i-e)*(t/=a)*t*t+e},easeOutCubic:function(t,e,i,a){return(i-e)*((t=t/a-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,a){var o=i-e;return(t/=a/2)<1?o/2*t*t*t+e:o/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,a){return(i-e)*(t/=a)*t*t*t+e},easeOutQuart:function(t,e,i,a){return-(i-e)*((t=t/a-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,a){var o=i-e;return(t/=a/2)<1?o/2*t*t*t*t+e:-o/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,a){return(i-e)*(t/=a)*t*t*t*t+e},easeOutQuint:function(t,e,i,a){return(i-e)*((t=t/a-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,a){var o=i-e;return(t/=a/2)<1?o/2*t*t*t*t*t+e:o/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,a){var o=i-e;return-o*Math.cos(t/a*(Math.PI/2))+o+e},easeOutSine:function(t,e,i,a){return(i-e)*Math.sin(t/a*(Math.PI/2))+e},easeInOutSine:function(t,e,i,a){return-(i-e)/2*(Math.cos(Math.PI*t/a)-1)+e},easeInExpo:function(t,e,i,a){return 0==t?e:(i-e)*Math.pow(2,10*(t/a-1))+e},easeOutExpo:function(t,e,i,a){var o=i-e;return t==a?e+o:o*(1-Math.pow(2,-10*t/a))+e},easeInOutExpo:function(t,e,i,a){var o=i-e;return 0===t?e:t===a?e+o:(t/=a/2)<1?o/2*Math.pow(2,10*(t-1))+e:o/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,a){return-(i-e)*(Math.sqrt(1-(t/=a)*t)-1)+e},easeOutCirc:function(t,e,i,a){return(i-e)*Math.sqrt(1-(t=t/a-1)*t)+e},easeInOutCirc:function(t,e,i,a){var o=i-e;return(t/=a/2)<1?-o/2*(Math.sqrt(1-t*t)-1)+e:o/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,a){var o,s,n,r=i-e;return n=1.70158,0===t?e:1==(t/=a)?e+r:((s=0)||(s=.3*a),(o=r)<Math.abs(r)?(o=r,n=s/4):n=s/(2*Math.PI)*Math.asin(r/o),-o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-n)*Math.PI/s)+e)},easeOutElastic:function(t,e,i,a){var o,s,n,r=i-e;return n=1.70158,0===t?e:1==(t/=a)?e+r:((s=0)||(s=.3*a),(o=r)<Math.abs(r)?(o=r,n=s/4):n=s/(2*Math.PI)*Math.asin(r/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*a-n)*Math.PI/s)+r+e)},easeInOutElastic:function(t,e,i,a){var o,s,n,r=i-e;return n=1.70158,0===t?e:2==(t/=a/2)?e+r:((s=0)||(s=.3*1.5*a),(o=r)<Math.abs(r)?(o=r,n=s/4):n=s/(2*Math.PI)*Math.asin(r/o),t<1?o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-n)*Math.PI/s)*-.5+e:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*a-n)*Math.PI/s)*.5+r+e)},easeInBack:function(t,e,i,a,o){return void 0===o&&(o=1.70158),(i-e)*(t/=a)*t*((o+1)*t-o)+e},easeOutBack:function(t,e,i,a,o){return void 0===o&&(o=1.70158),(i-e)*((t=t/a-1)*t*((o+1)*t+o)+1)+e},easeInOutBack:function(t,e,i,a,o){var s=i-e;return void 0===o&&(o=1.70158),(t/=a/2)<1?s/2*t*t*((1+(o*=1.525))*t-o)+e:s/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e},easeInBounce:function(t,e,a,o){var s=a-e;return s-i.easeOutBounce(o-t,0,s,o)+e},easeOutBounce:function(t,e,i,a){var o=i-e;return(t/=a)<1/2.75?7.5625*o*t*t+e:t<2/2.75?o*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?o*(7.5625*(t-=2.25/2.75)*t+.9375)+e:o*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,a,o){var s=a-e;return t<o/2?.5*i.easeInBounce(2*t,0,s,o)+e:.5*i.easeOutBounce(2*t-o,0,s,o)+.5*s+e}};e.exports=i},{}],Debugger:[function(t,e){"use strict";cc._RF.push(e,"ee21a3k8GhHzbMAz/l30mL6","Debugger"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],GameBoard:[function(t,e,i){"use strict";cc._RF.push(e,"85de1ItBUxA9JPr2s2uGZBY","GameBoard"),i.__esModule=!0,i.default=void 0;var a=h(t("./GameItem/bumper.js")),o=h(t("./GameItem/cabinet.js")),s=h(t("../constants.js")),n=h(t("./GameItem/GameItem.js")),r=h(t("../helpers.js")),l=h(t("./Rnd.js")),c=h(t("./GameItem/simpleCrate.js"));function h(t){return t&&t.__esModule?t:{default:t}}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}function u(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=p(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function p(t,e){if(t){if("string"==typeof t)return m(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var f=s.default.GAMEPLAY,g=f.TILE_SIZE,y=f.ITEM_SIZE,b=f.ITEM_SCALE,v=f.BOOSTER_SCALE,C=f.GRAVITY,S=f.LOGIC_UPDATE_INTERVAL,w=f.Z_INDEX,B=f.GROUP_TYPE_PRIORITY,I=f.GROUP_TYPE_POWERUP,x=(f.BOMB_EXPLOSION_DURATION,f.BOMB_RADIUS),F=f.MISSILE_VELOCITY,k=f.BOOSTER_PROJECTILE_VELOCITY,_=f.DISCOBALL_DELAY_BETWEEN_ITEMS,T=f.SNIPER_SPEED,N=f.SNIPER_ROTATION_SPEED,M=f.SNIPER_EXPLOSION_DURATION,O=f.SNIPER_TAKE_OFF_DURATION,P=f.ITEM_TRANSFORM_DURATION,E=f.ITEM_EXPLODE_DURATION,R=f.DYNAMIC_USER_INTERACTION,L=f.NO_MOVE_DETECTION_DELAY,D=f.NO_MOVE_FIX_DURATION,A=f.SPINE_NAMES,j=f.RAY_OF_LIGHT_SCALE,U=f.HINT_DELAY,Y=[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:0,y:1}],X=function(){},G=function(){function t(t){var e=this,i=t.app,a=r.default.deepCopy(t.pattern),o=r.default.deepCopy(t.spawnPattern),s=t.underlayPattern,c=t.view,h=t.GameTile,d=t.GameItem,u=t.GameItemSpawner,p=t.boosterController,m=t.tutorialController,f=t.objectiveController,y=t.spriteCollection,b=t.onGameItemDestroy||X,v=t.onIdle||X,C=t.onMoveTriggered||X,B=t.onBoosterModeEnd||X,I=t.onCombo||X,x=t.onPowerUpSpawn||X,F=t.onPowerUpTrigger||X;this.app=i,this.view=c,this.GameItem=d,this.spriteCollection=y,this.boosterController=p,this.tutorialController=m,this.objectiveController=f,this.onGameItemDestroy=b,this.onIdle=v,this.onMoveTriggered=C,this.onBoosterModeEnd=B,this.onCombo=I,this.onPowerUpSpawn=x,this.onPowerUpTrigger=F,this.validatePattern(a,o),this.rnd=new l.default,console.log("Rnd seed:",this.rnd.getSeed()),this.width=a[0].length,this.height=a.length+1,this.background=[],this.board=[],this.previous=[],this.next=[],this.final=[],this.spawnBlindSpot=[],this.spawners=[],this.underlay=[],this.isCascading=!1,this.startCascadeRequest=!1,this.checkMatchesRequest=!1,this.updateSpawnBlindSpotRequest=!1,this.checkRespawnRequest=!1,this.movingSprites=[],this.explodingDiscoBalls=[],this.sniperTargets={},this.borders=[],this.isBeingDestroyed=!1,this.itemsWaitingForDisappear=0,this.switchingCount=0,this.isIdle=this.app.now,this.booster=null,this.isTemporaryBooster=null,this.lockedUserInteractionReasons={},this.lockedUserInteraction=!1,this.comboReport={},this.dragging={gameItem:null,startX:null,startY:null},this.highlightTimer=0,this.matchGroupUid=0,this.isMoveAvailableNow=null,this.showHintCounter=0,this.lastHints=null;for(var k=0;k<this.height;k++){this.previous[k]=[],this.next[k]=[],this.final[k]=[],this.spawnBlindSpot[k]=[];for(var _=0;_<this.width;_++)this.previous[k][_]=null,this.next[k][_]=null,this.final[k][_]=null,this.spawnBlindSpot[k][_]=null}for(var T=0;T<this.height;T++)if(this.background[T]=[],0!==T)for(var N=0;N<this.width;N++){var M=null;a[T-1][N]&&((M=cc.instantiate(h).getComponent("GameTile")).boardX=N,M.boardY=T,M.setBg((T*this.width+N)%2),M.node.x=this.boardXToViewX(N),M.node.y=this.boardYToViewY(T),c.addChild(M.node)),this.background[T][N]=M}for(var O=0;O<this.height;O++)if(this.underlay[O]=[],0!==O)for(var P=0;P<this.width;P++){var E=null,R=s&&s[O-1][P];R&&(E=this.getNewGameItemFromBlueprint({blueprint:R,view:c,boardX:P,boardY:O,x:this.background[O][P].node.x,y:this.background[O][P].node.y})),this.underlay[O][P]=E}n.default.preParsePattern(this,a);for(var L=0;L<this.height;L++)if(this.board[L]=[],0!==L)for(var D=0;D<this.width;D++){var A=null,j=a[L-1][D];j&&(A=this.getNewGameItemFromBlueprint({blueprint:j,view:c,boardX:D,boardY:L,x:this.background[L][D].node.x,y:this.background[L][D].node.y})),this.board[L][D]=A}for(var U=0;U<this.width;U++){for(var Y=null,G=1;G<this.height;G++)if(this.background[G][U]&&(0===G||!this.background[G-1][U])){Y=G-1;break}if(null!==Y){var q=cc.instantiate(u);q.boardX=U,q.boardY=Y,q.x=0,q.y=0,q.anchorX=this.width/2-U,q.anchorY=-this.height/2+Y+.5,q.zIndex=w.ITEM,q.blueprint=o[U],c.addChild(q),this.spawners.push(q)}else this.spawners.push(null)}for(var V=this.background,H=0;H<=this.width;H++)for(var z=1;z<=this.height;z++){var W=!(z<2||H<1||!V[z-1][H-1]),J=!(z<2||H>=this.width||!V[z-1][H]),Q=!(z>=this.height||H<1||!V[z][H-1]),Z=!(z>=this.height||H>=this.width||!V[z][H]),K=null,$=0;if(!W&&!J&&Q&&Z?K=1:!W&&J&&!Q&&Z?(K=1,$=90):W&&!J&&Q&&!Z?(K=1,$=270):W&&J&&!Q&&!Z?(K=1,$=180):W||J||Q||!Z?W||J||!Q||Z?!W||J||Q||Z?W||!J||Q||Z?!W&&J&&Q&&Z?K=3:W&&!J&&Q&&Z?(K=3,$=270):W&&J&&!Q&&Z?(K=3,$=90):W&&J&&Q&&!Z&&(K=3,$=180):(K=2,$=90):(K=2,$=180):(K=2,$=270):K=2,K){var tt=r.default.createSprite({spriteFrame:this.spriteCollection["border"+K],view:c,zIndex:w.BORDER,x:this.boardXToViewX(H)-g/2,y:this.boardYToViewY(z)+g/2,width:g,height:g,angle:$});this.borders.push(tt)}}this.updateSpawnBlindSpot(!0),this.updateInterval=setInterval(function(){e.updateSpawnBlindSpot(),e.checkRespawn(),e.processMatches(),e.startCascade(),e.updateIdleState()},S),this.app.IS_DEVELOPMENT&&(globalThis.gameBoard=this)}var e=t.prototype;return e.update=function(t){this.isBeingDestroyed||(this.isCascading&&this.update_cascade(t),this.movingSprites.length&&this.updateMovingSprites(t),this.highlightTimer+=t,this.dragging.gameItem&&(this.spriteCollection.material_highlight.setProperty("hl_timer",this.highlightTimer),this.spriteCollection.material_spineHighlight.setProperty("hl_timer",this.highlightTimer)))},e.updateMovingSprites=function(t){for(var e,i=this.movingSprites.length-1;i>=0;i--)(e=this.movingSprites[i]).onTick(e,t)},e.updateIdleState=function(){var t=this.isIdle;if(this.itemsWaitingForDisappear)return this._notIdle();if(this.isCascading)return this._notIdle();if(this.switchingCount)return this._notIdle();if(this.checkRespawnRequest)return this._notIdle();if(this.startCascadeRequest)return this._notIdle();if(this.checkMatchesRequest)return this._notIdle();if(this.updateSpawnBlindSpotRequest)return this._notIdle();if(this.movingSprites.length)return this._notIdle();if(this.isIdle=t||this.app.now,t){if(this.tutorialController.isTutorialShowing||this.lockedUserInteraction)return void(this.isIdle=this.app.now);if(this.isMoveAvailableNow){var e=this.app.now-t,i=Math.floor(e/U);if(i!==this.showHintCounter){this.showHintCounter=i;var a=this.isMoveAvailableNow[Math.floor(Math.random()*this.isMoveAvailableNow.length)];this.lastHints=[];for(var o=0;o<a.length;o++)a[o].startHint(),this.lastHints.push(a[o])}}else this.app.now-t>L&&(this.isMoveAvailableNow=this.isMoveAvailable(),!1===this.isMoveAvailableNow&&(this.fixNoMoveAvailable(),this.isMoveAvailableNow=!0,this.isIdle=this.app.now))}else this.onIdle()},e._notIdle=function(){if(this.isIdle=!1,this.isMoveAvailableNow=null,this.showHintCounter=0,this.lastHints){for(var t=0;t<this.lastHints.length;t++)this.lastHints[t].stopHint();this.lastHints=null}},e.processMatches=function(){if(this.checkMatchesRequest){this.checkMatchesRequest=!1;var t=this.getMatchable(),e=t.matched,i=t.matchGroups;if(Object.keys(e).length)for(var a in i){var o=i[a],s=o.groupType,n=I[s];if(o.gameItems.length){var r=o.gameItems[0].uid;this.comboReportStart(r);for(var l=0;l<o.gameItems.length;l++){var c=o.gameItems[l],h=c.boardX===o.targetPosition.boardX&&c.boardY===o.targetPosition.boardY?n:null;this.hitUnderlay(c.boardX,c.boardY,"match"),this.hitGameItem(c,{type:"match",uid:r},n?o.targetPosition:null,h),this.comboReportAdd(r,c)}this.comboReportEnd(r,"match")}}}},e.hitGameItem=function(t,e,i,a){var o=this;if(this.dragging.gameItem===t&&this.resetDrag(),"bomb"===t.type)return this.triggerBomb(t);if("sniper"===t.type)return this.triggerSniper(t);if("missiles1"===t.type||"missiles2"===t.type)return this.triggerMissile(t);if("discoball"===t.type)return this.triggerDiscoball(t);var s=t.boardX,n=t.boardY,r=null;if(a&&(r=cc.instantiate(this.GameItem).getComponent("GameItem"),this.view.addChild(r.node),r.init({app:this.app,onDestroyCb:this.onGameItemDestroy,type:a}),r.node.x=this.boardXToViewX(i.boardX),r.node.y=this.boardYToViewY(i.boardY),r.boardX=i.boardX,r.boardY=i.boardY,this.onPowerUpSpawn(a)),"match"===e.type)for(var l=0;l<4;l++){var c=s+Y[l].x,h=n+Y[l].y;if(this.isValidCoordinate(c,h)){var d=this.board[h][c];d&&d.isSensitive&&d.isIdle()&&this.hitGameItem(d,{type:"sensitive:"+t.type,uid:e.uid})}}if(i){var p=this.boardXToViewX(i.boardX),m=this.boardYToViewY(i.boardY);return r?(this.itemsWaitingForDisappear++,Promise.all([t.explodeForPowerUp(p,m),r.spawnPowerUp().then(function(){o.board[n][s]=r})]).then(function(){o.itemsWaitingForDisappear--,o.gameItemDisappearanceFinished(t)})):(this.itemsWaitingForDisappear++,t.explodeForPowerUp(p,m).then(function(){o.itemsWaitingForDisappear--,o.board[n][s]=null,o.gameItemDisappearanceFinished(t)}))}return this.itemsWaitingForDisappear++,t.gotHit(e).then(function(){if(o.itemsWaitingForDisappear--,0===t.lifePoints){if(o.board[n][s]===t?o.board[n][s]=null:null!==o.board[n][s]&&console.error(new Error("a game item is not in the board anymore when trying to remove it")),t.linkedGamesItems){var e=t.linkedGamesItems;t.linkedGamesItems=null;for(var i,a=u(e);!(i=a()).done;){var r=i.value;r!==t&&(o.board[r.boardY][r.boardX]===r?o.board[r.boardY][r.boardX]=null:null!==o.board[r.boardY][r.boardX]&&console.error(new Error("a game item is not in the board anymore when trying to remove it")),r.linkedGamesItems=null)}}o.gameItemDisappearanceFinished(t)}})},e.hitGameItemCoordinate=function(t,e){var i=t.boardX,a=t.boardY,o=this.underlay[a][i],s=this.board[a][i];return o&&o.isDying&&(o=null),s&&s.isDying&&(s=null),!(!o&&!s||(o&&this.hitUnderlay(i,a,e),s&&this.hitGameItem(s,e),0))},e.hitUnderlay=function(t,e,i){var a=this,o=this.board[e][t];if(!o||!o.isBlockingCascade||o.isDying){var s=this.underlay[e][t];s&&(s.isDying||(this.itemsWaitingForDisappear++,s.gotHit(i).then(function(){a.itemsWaitingForDisappear--,0===s.lifePoints&&(a.underlay[e][t]=null)})))}},e.gameItemDisappearanceFinished=function(){this.updateSpawnBlindSpotRequest=!0,this.checkRespawnRequest=!0,this.startCascadeRequest=!0},e.getMatchable=function(t){void 0===t&&(t=null);var e,i,a={},o={},s={},n=[],r=null;for(i=1;i<this.height;i++)for(n.length=0,r=null,e=0;e<=this.width;e++)r=this._getMatchable(e,i,t,n,o,a,r,s,"line").type;for(e=0;e<this.width;e++)for(n.length=0,r=null,i=1;i<=this.height;i++)r=this._getMatchable(e,i,t,n,o,a,r,s,"column").type;if(I.square)for(i=1;i<this.height-1;i++)for(e=0;e<this.width-1;e++){n.length=0,r=null;for(var l=i;l<=i+1;l++)for(var c=e;c<=e+1;c++)r=this._getMatchable(c,l,t,n,o,a,r,s,"square").type;this._getMatchable(-1,-1,t,n,o,a,r,s,"square")}var h={};for(var d in a)s[d]&&(h[a[d].matchGroupId]=!0);for(var u in h){for(var p=0;p<o[u].gameItems.length;p++)delete a[o[u].gameItems[p].uid];delete o[u]}return{matched:a,matchGroups:o}},e._getMatchable=function(t,e,i,a,o,s,n,r,l){var c=e>=1&&e<this.height&&t>=0&&t<this.width?this.board[e][t]||this.next[e][t]:null;if(i&&void 0!==i[t+"_"+e]&&(c=i[t+"_"+e]),!c||c.type!==n||!c.isMatchable){var h="square"===l?4:3;if(a.length>=h){for(var d=!0,u=0;u<a.length;u++){if(r[a[u].uid]){d=!1;break}if(!(d=d&&this.isGameItemStableForMatch(a[u])))break}if(d){var p=this.getMostRecentlySwitchedItem(a);if(!p){var m=a[Math.floor(a.length/2)];p={boardX:m.boardX,boardY:m.boardY}}for(var f,g=null,y="square"===l?"square":3===a.length?"three":4===a.length?"line"===l?"four_h":"four_v":"five",b=null,v=0;v<a.length;v++)s[a[v].uid]&&(g||(g={}),g[a[v].uid]=!0,b||(b={}),b[s[a[v].uid].matchGroupId]=!0,"square"!==l&&(p={boardX:a[v].boardX,boardY:a[v].boardY}));if(b){var C=y;for(var S in"square"!==l&&B.cross>B[C]&&(C="cross"),b){var w=o[S].groupType;B[w]>B[C]&&(C=w,p=o[S].targetPosition)}for(var I in b){for(var x=0;x<o[I].gameItems.length;x++){var F=o[I].gameItems[x];g[F.uid]||a.push(F),delete s[F.uid]}delete o[I]}y=C}this.matchGroupUid++,o[f=this.matchGroupUid]={groupType:y,gameItems:[],targetPosition:{boardX:p.boardX,boardY:p.boardY}};for(var k=0;k<a.length;k++)s[a[k].uid]?console.warn("a game item already had a matched entry"):(s[a[k].uid]={matchGroupId:f,gameItem:a[k]},o[f].gameItems.push(a[k]))}else for(var _=0;_<a.length;_++)r[a[_].uid]=!0}a.length=0}return c&&c.type&&c.isMatchable&&a.push(c),{x:t,y:e,replacementMap:i,candidates:a,matchGroups:o,matched:s,type:n=c?c.type:null}},e.isGameItemStableForMatch=function(t){if(!t.isIdle())return!1;var e=!this.next[t.boardY][t.boardX-1],i=!this.next[t.boardY][t.boardX+1],a=!this.next[t.boardY-1]||!this.next[t.boardY-1][t.boardX],o=!this.next[t.boardY+1]||!this.next[t.boardY+1][t.boardX];return e&&i&&a&&o},e.updateSpawnBlindSpot=function(t){if(void 0===t&&(t=!1),this.updateSpawnBlindSpotRequest||t){this.updateSpawnBlindSpotRequest=!1;for(var e=[],i=1;i<this.height;i++)for(var a=0;a<this.width;a++)if(e[a])this.spawnBlindSpot[i][a]=!0;else{var o=this.board[i][a];o&&o.isBlockingCascade&&(e[a]=!0),this.spawnBlindSpot[i][a]=e[a]}}},e.startCascade=function(){if(this.startCascadeRequest){this.startCascadeRequest=!1;for(var t=this.height-2;t>=1;t--)for(var e=0;e<2;e++)for(var i=!!e,a=0;a<this.width;a++){var o=this.board[t][a];if(o&&!o.isBlockingCascade&&o.isIdle()){var s=this.getCascadingTarget(a,t,i);s&&(this.isCascading=!0,this._startCascadeItemTo(o,s),this.checkRespawnRequest=!0)}}}},e._startCascadeItemTo=function(t,e){this.dragging.gameItem===t&&this.resetDrag();var i=t.cascade.isCascading;i?(this.previous[t.cascade.previous.boardY][t.cascade.previous.boardX]=null,this.next[t.cascade.next.boardY][t.cascade.next.boardX]=null,this.final[t.cascade.final.boardY][t.cascade.final.boardX]=null):this.board[t.boardY][t.boardX]=null,t.lastSwitch=null,t.cascade.previous={boardX:i?t.cascade.next.boardX:t.boardX,boardY:i?t.cascade.next.boardY:t.boardY},t.cascade.final={boardX:e.final.boardX,boardY:e.final.boardY},t.cascade.next={boardX:e.next.boardX,boardY:e.next.boardY},this.previous[t.cascade.previous.boardY][t.cascade.previous.boardX]&&(console.error("There is already an item in this.previous["+t.cascade.previous.boardY+"]["+t.cascade.previous.boardX+"]"),this.app.IS_DEVELOPMENT),this.next[t.cascade.next.boardY][t.cascade.next.boardX]&&(console.error("There is already an item in this.next["+t.cascade.next.boardY+"]["+t.cascade.next.boardX+"]"),this.app.IS_DEVELOPMENT),this.final[t.cascade.final.boardY][t.cascade.final.boardX]&&(console.error("There is already an item in this.final["+t.cascade.final.boardY+"]["+t.cascade.final.boardX+"]"),this.app.IS_DEVELOPMENT),this.previous[t.cascade.previous.boardY][t.cascade.previous.boardX]=t,this.next[t.cascade.next.boardY][t.cascade.next.boardX]=t,this.final[t.cascade.final.boardY][t.cascade.final.boardX]=t,i||(t.cascade.isCascading=!0,t.boardX=null,t.boardY=null)},e.update_cascade=function(t){if(this.isCascading){for(var e=this.app.now,i=!1,a=(performance.now(),this.height-1);a>=1;a--)for(var o={},s=0;s<2;s++)for(var n=!!s,r=0;r<this.width;r++){var l=this.next[a][r];if(l&&!o[l.uid])if(l.cascade.delayUntil>e)i=!0;else{var c=l.velocity+C*t*g,h=l.node.y-c,d=this.previous[l.cascade.next.boardY][l.cascade.next.boardX];d&&h-g/2<=d.node.y+g/2&&(l.cascade.traveled?d.velocity&&d.cascade.traveled?(l.velocity=(d.velocity+l.velocity)/2,d.velocity=l.velocity):l.velocity=d.velocity:(l.cascade.delayUntil=e+50,0!==l.velocity&&(console.error("an item did not travel but its velocity is above 0"),l.velocity=0)),c=Math.max(0,Math.min(l.velocity,l.node.y-d.node.y-g)),h=l.node.y-c);var u=l.node.x+c*(l.cascade.next.boardX-l.cascade.previous.boardX);if(h<=this.boardYToViewY(l.cascade.next.boardY)){if(l.cascade.next.boardX,l.cascade.next.boardY,l.isSpawning&&(l.isSpawning=!1,l.node.parent.removeChild(l.node),this.view.addChild(l.node)),this.startCascadeRequest=!0,l.shouldExplode){o[l.uid]=!0,this._itemStopCascading(l),this.hitGameItem(l,l.shouldExplodeReason);continue}if(!n){var p=this.getCascadingTarget(r,a,!1,l.uid);if(!p)continue;o[l.uid]=!0,i=!0,l.velocity=c,this._weCanCascade(l,p,h),this.checkRespawnRequest=!0;continue}o[l.uid]=!0;var m=this.getCascadingTarget(r,a,!0,l.uid);if(!m){this.checkRespawnRequest=!0,this._itemStopCascading(l);continue}i=!0,l.velocity=c,this._weCanCascade(l,m,h),this.checkRespawnRequest=!0}else l.node.x=u,l.node.y=h,l.cascade.traveled=!0,o[l.uid]=!0,l.velocity=c,i=!0}}this.isCascading=i}},e._weCanCascade=function(t,e,i){t.cascade.final.boardX===t.cascade.next.boardX&&t.cascade.final.boardY===t.cascade.next.boardY||t.cascade.final.boardX===e.final.boardX&&t.cascade.final.boardY===e.final.boardY||console.warn("Final tile changed during the drop"),this._startCascadeItemTo(t,e),t.node.y=i;var a=this.boardYToViewY(t.cascade.previous.boardY)-t.node.y;t.node.x=this.boardXToViewX(t.cascade.previous.boardX)+a*(t.cascade.next.boardX-t.cascade.previous.boardX)},e._itemStopCascading=function(t){t.node.x=this.boardXToViewX(t.cascade.next.boardX),t.node.y=this.boardYToViewY(t.cascade.next.boardY),t.boardX=t.cascade.next.boardX,t.boardY=t.cascade.next.boardY,this.board[t.boardY][t.boardX]=t,this.previous[t.cascade.previous.boardY][t.cascade.previous.boardX]=null,this.next[t.cascade.next.boardY][t.cascade.next.boardX]=null,this.final[t.cascade.final.boardY][t.cascade.final.boardX]=null,t.cascade.next=null,t.cascade.final=null,t.cascade.previous=null,t.cascade.delayUntil=null,t.cascade.traveled=!1,t.cascade.isCascading=!1,t.velocity=0,this.checkMatchesRequest=!0},e.getCascadingTarget=function(t,e,i,a){if(void 0===i&&(i=!1),void 0===a&&(a=-1),e===this.height-1)return null;if(t<0||t>this.width-1)return null;if(i)for(var o=!1,s=e;s<this.height-1;s++){if(this.spawnBlindSpot[s][t-1]){var n=this.getCascadingTarget(t-1,s,!1,a);if(n)return{next:{boardX:t-(o?0:1),boardY:e+1},final:{boardX:n.final.boardX,boardY:n.final.boardY}}}if(this.spawnBlindSpot[s][t+1]){var r=this.getCascadingTarget(t+1,s,!1,a);if(r)return{next:{boardX:t+(o?0:1),boardY:e+1},final:{boardX:r.final.boardX,boardY:r.final.boardY}}}if(this.background[s+1][t]||this.board[s+1][t]||this.next[s+1][t]&&this.next[s+1][t].uid!==a||this.final[s+1][t]&&this.final[s+1][t].uid!==a)break;o=!0}else for(var l=e+1;l<this.height;l++){if(this.board[l][t])return null;var c=this.next[l][t];if(c&&c.uid!==a)return null;var h=this.final[l][t];if(h&&h.uid!==a)return null;if(this.background[l][t])return{next:{boardX:t,boardY:e+1},final:{boardX:t,boardY:l}}}return null},e.lockUserInteraction=function(t){t||(console.warn("Please provide a reason when locking user interaction"),t="unknown"),this.lockedUserInteractionReasons[t]&&console.warn('GameBoard is already locked for reason "'+t+'"'),this.lockedUserInteractionReasons[t]=!0,this.lockedUserInteraction=!0},e.unlockUserInteraction=function(t){for(t in t||(console.warn("Please provide a reason when unlocking user interaction"),t="unknown"),this.lockedUserInteractionReasons[t]||console.error('GameBoard is not locked for reason "'+t+'"'),this.lockedUserInteractionReasons[t]=!1,this.lockedUserInteractionReasons)if(this.lockedUserInteractionReasons[t])return void(this.lockedUserInteraction=!0);this.lockedUserInteraction=!1},e.onTouchStart=function(t){if(!this.lockedUserInteraction&&!this.booster){if(this.explodingDiscoBalls.length>0)return this.resetDrag();if(!R&&!this.isIdle)return this.resetDrag();this.resetDrag();var e=t.getLocation(),i=this.view.convertToNodeSpaceAR(e),a=i.x,o=i.y,s=this.gameItemFromTouchEvent(t);if(s&&!s.isBlockingCascade&&s.isIdle()){this.dragging.gameItem=s,this.dragging.startX=a,this.dragging.startY=o;var n=this.spriteCollection.material_highlight,r=this.spriteCollection.material_spineHighlight;this.highlightTimer=0,n.setProperty("hl_timer",this.highlightTimer),r.setProperty("hl_timer",this.highlightTimer),s.highlight(n,r)}}},e.onTouchMove=function(t){var e=this;if(this.lockedUserInteraction)return this.resetDrag();if(this.explodingDiscoBalls.length>0)return this.resetDrag();if(this.dragging.gameItem){var i=this.dragging.gameItem,a=t.getLocation(),o=this.view.convertToNodeSpaceAR(a),s=o.x,n=o.y,r=this.dragging.startX-s,l=this.dragging.startY-n;if(!(Math.sqrt(r*r+l*l)<.5*g)){var c=null;if(Math.abs(r)>=Math.abs(2*l)?c={boardX:r>0?i.boardX-1:i.boardX+1,boardY:i.boardY}:Math.abs(l)>=Math.abs(2*r)&&(c={boardX:i.boardX,boardY:l>0?i.boardY+1:i.boardY-1}),this.tutorialController.validateMove("swap",i,c)){var h=!0,d=null,u=null,p=!1,m=!1,f=!1;if(c?c.boardX>this.width-1?h=!1:c.boardX<0?h=!1:c.boardY>this.height-1?h=!1:c.boardY<1&&(h=!1):h=!1,h&&((d=this.board[c.boardY][c.boardX])?!d.isBlockingCascade&&d.isIdle()||(h=!1):(this.next[c.boardY][c.boardX]&&(h=!1),this.final[c.boardY][c.boardX]&&(h=!1))),h&&("bomb"===i.type&&(f=!0),"sniper"===i.type&&(f=!0),"discoball"===i.type&&(f=!0),"missiles1"===i.type&&(f=!0),"missiles2"===i.type&&(f=!0),d&&("bomb"===d.type&&(f=!0),"sniper"===d.type&&(f=!0),"discoball"===d.type&&(f=!0),"missiles1"===d.type&&(f=!0),"missiles2"===d.type&&(f=!0))),!f&&h){var y={};y[i.boardX+"_"+i.boardY]=d,y[c.boardX+"_"+c.boardY]=i;var b=this.getMatchable(y),v=b.matched,C=b.matchGroups;if(v[i.uid]||d&&v[d.uid]){u=[];var S,w=v[i.uid]&&v[i.uid].matchGroupId;if(d&&(S=v[d.uid]&&v[d.uid].matchGroupId),w){p=!0;for(var B=0;B<C[w].gameItems.length;B++)C[w].gameItems[B].locksForUpcomingMatch++,u.push(C[w].gameItems[B])}if(S){m=!0;for(var I=0;I<C[S].gameItems.length;I++)C[S].gameItems[I].locksForUpcomingMatch++,u.push(C[S].gameItems[I])}}else h=!1}if(h){var x=i.boardX,F=i.boardY;i.boardX=c.boardX,i.boardY=c.boardY,d&&(d.boardX=x,d.boardY=F),this.board[i.boardY][i.boardX]=i,this.board[d?d.boardY:F][d?d.boardX:x]=d,this.resetDrag();var k=[];k.push(i.switchSpriteTo(this.boardXToViewX(i.boardX),this.boardYToViewY(i.boardY),p)),d&&k.push(d.switchSpriteTo(this.boardXToViewX(d.boardX),this.boardYToViewY(d.boardY),m)),this.switchingCount++,this.onMoveTriggered(),Promise.all(k).then(function(){if(u)for(var t=0;t<u.length;t++)u[t]&&u[t].locksForUpcomingMatch||console.warn("an item locked for upcoming match had his status changed"),u[t].locksForUpcomingMatch--;"sniper"===i.type&&e.triggerSniper(i),"bomb"===i.type&&e.triggerBomb(i),"discoball"===i.type&&e.triggerDiscoball(i,d),"missiles1"!==i.type&&"missiles2"!==i.type||e.triggerMissile(i),d&&("sniper"===d.type&&e.triggerSniper(d),"bomb"===d.type&&e.triggerBomb(d),"discoball"===d.type&&e.triggerDiscoball(d,i),"missiles1"!==d.type&&"missiles2"!==d.type||e.triggerMissile(d)),e.checkMatchesRequest=!0,e.switchingCount--,e.tutorialController.stepUp("swap")})}else this.resetDrag()}}}},e.onTouchEnd=function(t){if(this.booster){var e=this.gameItemFromTouchEvent(t);if(!e)return;if(!this.isValidForBoosterActivation(e))return;if(!this.tutorialController.stepUp("tapBooster"))return;this.exitBoosterMode(this.activateBooster(e))}if(this.lockedUserInteraction)return this.resetDrag();if(this.explodingDiscoBalls.length>0)return this.resetDrag();var i=this.dragging.gameItem;if(this.tutorialController.stepUp("tapAny"),!this.tutorialController.validateMove("tap",i))return this.resetDrag();i&&!i.isSwitching&&("bomb"===i.type?this.triggerBomb(i):"sniper"===i.type?this.triggerSniper(i):"missiles1"===i.type||"missiles2"===i.type?this.triggerMissile(i):"discoball"===i.type&&this.triggerDiscoball(i))&&(this.tutorialController.stepUp("tap"),this.onMoveTriggered()),this.resetDrag()},e.onTouchCancel=function(t){if(this.explodingDiscoBalls.length>0)return this.resetDrag();this.onTouchEnd(t)},e.resetDrag=function(){this.dragging.gameItem&&this.dragging.gameItem.unHighlight(),this.dragging={gameItem:null,startX:null,startY:null}},e.gameItemFromTouchEvent=function(t){var e=t.getLocation(),i=this.view.convertToNodeSpaceAR(e),a=i.x,o=i.y,s=this.viewXToBoardX(a),n=this.viewYToBoardY(o);return this.isValidCoordinate(s,n)?this.board[n][s]||this.underlay[n][s]:null},e.enterBoosterMode=function(t,e){this.booster=t,this.isTemporaryBooster=e},e.exitBoosterMode=function(t){this.onBoosterModeEnd(t,this.booster,this.isTemporaryBooster),this.booster=null,this.isTemporaryBooster=null},e.cancelBoosterMode=function(){this.booster=null},e.isValidForBoosterActivation=function(t){switch(this.booster){case"paintbrush":return t.isBasicType()&&t.type!==this.boosterController.getPaintbrushTargetType();case"fairystick":return t.isBasicType();default:return!0}},e.activateBooster=function(t){if(!this.booster)return!1;if(this.lockedUserInteraction)return!1;if(this.explodingDiscoBalls.length>0)return!1;if(!R&&!this.isIdle)return!1;if(!t)return!1;if(!t.isIdle())return!1;switch(this.resetDrag(),this.booster){case"airplane":return this.triggerAirplane(t);case"rocket":return this.triggerRocket(t);case"paintbrush":return this.triggerPaintbrush(t);case"fairystick":return this.triggerFairystick(t);case"wheel":return this.triggerWheel();case"hammer":default:return this.triggerHammer(t)}this._notIdle()},e.triggerHammer=function(t){return this.hitGameItemCoordinate(t,{type:"booster",uid:Math.random()})},e.triggerAirplane=function(t){if(!t.isIdle())return!1;var e=t.node,i=(e.x,e.y),a=this._createFlame(this.boardXToViewX(-1),i,0,.2),o={node:a,direction:Y[1],onTick:this._moveMissile.bind(this),velocity:k,startedRemovalAt:0,previousPosition:null,affectedTargets:{},reason:{type:"booster",uid:a.uuid}};return r.default.createSprite({spriteFrame:this.spriteCollection.airplane,view:o.node,width:y,height:y,scale:{x:-v,y:v},x:80,y:20}),o.previousPosition={boardX:0,boardY:t.boardY},this.movingSprites.push(o),!0},e.triggerRocket=function(t){if(!t.isIdle())return!1;var e=t.node,i=e.x,a=(e.y,this._createFlame(i,this.boardYToViewY(this.height),90,.2)),o={node:a,direction:Y[3],onTick:this._moveMissile.bind(this),velocity:k,startedRemovalAt:0,previousPosition:null,affectedTargets:{},reason:{type:"booster",uid:a.uuid}};return r.default.createSprite({spriteFrame:this.spriteCollection.rocket,view:o.node,width:y,height:y,scale:{x:v,y:v},angle:240,x:80}),o.previousPosition={boardX:t.boardX,boardY:this.height-1},this.movingSprites.push(o),!0},e.triggerPaintbrush=function(t){var e=this;this.itemsWaitingForDisappear++;var i=d({},t.options);return i.type=this.boosterController.getPaintbrushTargetType(),this.transformItem(t,i).then(function(){e.itemsWaitingForDisappear--,e.checkMatchesRequest=!0}),!0},e.triggerFairystick=function(t){return!!t.isIdle()&&(this.movingSprites.push({targetType:t.type,selectedItem:t,pool:[],nextUpdate:this.app.now+_,onTick:this._animateFairystick.bind(this),firstItemPushed:!1,uid:t.uid}),this.explodingDiscoBalls.push(t.type),!0)},e.triggerWheel=function(){for(var t=this,e=[],i=0;i<this.height;i++)for(var a=0;a<this.width;a++){var o=this.board[i][a];o&&(o.isBasicType()||o.isPowerUpType())&&e.push(o)}if(e.length<=1)return!1;var s={},n=[].concat(e);r.default.shuffleArray(n);for(var l=0;l<e.length;l++)s[e[l].boardX+"_"+e[l].boardY]=n[l];return this._switchPlaces(s).then(function(){t.checkMatchesRequest=!0}),!0},e.triggerFullTypeWheel=function(){var t=this;if(this.app.IS_DEVELOPMENT){for(var e=[],i=0;i<this.height;i++)for(var a=0;a<this.width;a++){var o=this.board[i][a];o&&e.push(o)}var s=e.map(function(t){return t.options});r.default.shuffleArray(s);for(var n=[],l=0;l<e.length;l++)n.push(this.transformItem(e[l],d({},s[l])));return this.itemsWaitingForDisappear++,Promise.all(n).then(function(){t.itemsWaitingForDisappear--,t.checkMatchesRequest=!0}),!1}},e._animateFairystick=function(t){var e=t.pool,i=t.nextUpdate,a=t.targetType,o=t.selectedItem,s=t.firstItemPushed,n=t.uid,l=this.app.now,c=l-i;if(!(c<0)){var h,d=this._discoballGetAllByType(a);if(!d.length){var p=n;this.comboReportStart(p);for(var m,f=u(e);!(m=f()).done;){var g=m.value;g&&!g.isDying&&(g.unhighlightDisco(),this.hitUnderlay(g.boardX,g.boardY,"booster"),this.hitGameItem(g,{type:"booster",uid:p}),this.comboReportAdd(p,g))}return this.comboReportEnd(p,"booster"),r.default.removeFromArray(a,this.explodingDiscoBalls),void r.default.removeFromArray(t,this.movingSprites)}s?h=d[Math.floor(this.rnd.random()*d.length)]:(h=o,t.firstItemPushed=!0),e.push(h),h.highlightDisco(),h.lockedForDiscoball=!0,t.nextUpdate=l+_-c}},e.triggerBomb=function(t){var e=x;if(t.isDying)return!1;t.isDying=!0,t.node.zIndex=w.EXPLODING_BOMB;var i,a=Math.max(0,t.boardX-e),o=Math.min(this.width-1,t.boardX+e),s=Math.max(1,t.boardY-e),n=Math.min(this.height-1,t.boardY+e),r=(this.app.now,t.uid);this.comboReportStart(r);var l={type:"powerup",uid:t.node.uuid};this.comboReportAdd(r,t);for(var c=0;c<=1;c++)for(var h=s;h<=n;h++)for(var d=a;d<=o;d++)c&&this.hitUnderlay(d,h,l),(i=(c?this.board:this.next)[h][d])&&(i.isDying||i.shouldExplode||(this.comboReportAdd(r,i),c?this.hitGameItem(i,l):(i.shouldExplode=!0,i.shouldExplodeReason=l)));this.comboReportEnd(r,"powerup"),t.zIndex=w.EXPLODING_BOMB;var u=t.layers.spine.getComponent(sp.Skeleton);return u.setAnimation(0,"boom",!1),u.setCompleteListener(function(){t.destroyFromBoard()}),this.board[t.boardY][t.boardX]=null,this.onPowerUpTrigger(t.type),!0},e.triggerMissile=function(t){var e;if(t.isDying)return!1;t.isDying=!0;var i,a,o=t.node,s=o.x,n=o.y,r={onTick:this._moveMissile.bind(this),velocity:F,startedRemovalAt:0,previousPosition:null,affectedTargets:(e={},e[t.boardX+"_*"]=!0,e),srcUid:t.uid,reason:{type:"powerup",uid:t.node.uuid}};"missiles1"===t.type?(i=d({node:this._createMissile(A.rocketSkinLeft,s,n),direction:Y[0]},r),a=d({node:this._createMissile(A.rocketSkinRight,s,n),direction:Y[1]},r)):(i=d({node:this._createMissile(A.rocketSkinUp,s,n),direction:Y[3]},r),a=d({node:this._createMissile(A.rocketSkinDown,s,n),direction:Y[2]},r)),i.previousPosition={boardX:t.boardX,boardY:t.boardY},a.previousPosition={boardX:t.boardX,boardY:t.boardY},this.movingSprites.push(i,a),this.board[t.boardY][t.boardX]=null,t.destroyFromBoard(),this.gameItemDisappearanceFinished(t);var l=t.uid;return this.comboReportStart(l),this.comboReportAdd(l,t),this.comboReportEnd(l,"powerup"),this.onPowerUpTrigger(t.type),!0},e.triggerDiscoball=function(t,e){if(t.isDying)return!1;t.isDying=!0;for(var i,a={},o=u(this.explodingDiscoBalls);!(i=o()).done;)a[i.value]=!0;var s="basic1";if(e&&e.isMatchable&&!a[e.type])s=e.type;else{for(var n={},r=1;r<this.height;r++)for(var l=0;l<=this.width;l++){var c=this.board[r][l]||this.next[r][l];c&&c.isMatchable&&(c.isDying||c.lockedForDiscoball||a[c.type]||(n[c.type]||(n[c.type]=0),n[c.type]++))}for(var h in n)(!n[s]||n[h]>n[s])&&(s=h)}t.node.zIndex=w.DISCOBALL_ROTATING,t.layers.spine.active=!0,t.layers.default.active=!1,t.currentLayerId="spine";var d=t.layers.spine.getComponent(sp.Skeleton);return d.setAnimation(0,"start",!1),d.setCompleteListener(function(){d.setCompleteListener(null),d.setAnimation(0,"idle",!0)}),this.movingSprites.push({discoBall:t,targetType:s,pool:[],nextUpdate:this.app.now+_,onTick:this._animateDiscoBall.bind(this),raysOfLightFinished:0}),this.explodingDiscoBalls.push(s),this.onPowerUpTrigger(t.type),!0},e.triggerSniper=function(t){if(t.isDying)return!1;t.isDying=!0;var e,i=this._getSniperTarget();if(i&&(this.sniperTargets[i.uid]=!0),t.node.zIndex=w.FLYING_SNIPER,i){var a={x:i.node.x-t.node.x,y:i.node.y-t.node.y};e=r.default.getAngleFromVector(a.x,a.y)+55*(this.rnd.random()>.5?-1:1)}else e=t.boardX<=this.width/2?45:-45,t.boardY<=this.height/2&&(e>0?e+=90:e-=90);t.layers.spine.active=!0,t.layers.default.active=!1,t.currentLayerId="spine";var o=t.layers.spine.getComponent(sp.Skeleton);return o.setAnimation(0,"start",!1),o.setCompleteListener(function(){o.setCompleteListener(null),o.setAnimation(0,"frisbee",!0)}),this.itemsWaitingForDisappear++,this.movingSprites.push({startTime:this.app.now,gameItem:t,target:i,targetBoardX:i&&i.boardX,targetBoardY:i&&i.boardY,directionAngle:e,nextTargetEvaluation:null,onTick:this._animateSniper.bind(this),landingStartedAt:null}),this.onPowerUpTrigger(t.type),!0},e._animateSniper=function(t,e){var i=t.gameItem,a=t.target,o=t.targetBoardX,s=t.targetBoardY;if(t.landingStartedAt,t.startTime&&(this.app.now-t.startTime>O||t.landingStartedAt)&&(this.itemsWaitingForDisappear--,this.board[i.boardY][i.boardX]=null,this.gameItemDisappearanceFinished(i),t.startTime=null),t.landingStartedAt)return i.node.x=.9*i.node.x+.1*this.boardXToViewX(o),i.node.y=.9*i.node.y+.1*this.boardYToViewY(s),i.node.scale=.9*i.node.scale+.1*.1*b,i.node.opacity*=.98,void(this.app.now>t.landingStartedAt+M&&(i.destroyFromBoard(),r.default.removeFromArray(t,this.movingSprites)));i.node.scale=.98*i.node.scale+.03*b;var n=this._isValidSniperTarget(a);if(!n||a.boardX===o&&a.boardY===s||(n=!1),!n&&(a&&delete this.sniperTargets[a.uid],a=null,!t.nextTargetEvaluation||this.app.now>=t.nextTargetEvaluation)){var l=this._getSniperTarget();l?(this.sniperTargets[l.uid]=!0,t.target=l,t.targetBoardX=l.boardX,t.targetBoardY=l.boardY,t.nextTargetEvaluation=null,a=l):t.nextTargetEvaluation=this.app.now+S}var c=t.directionAngle;if(a){var h=a.node.x-i.node.x,d=a.node.y-i.node.y,u={x:h,y:d},p=r.default.getAngleFromVector(u.x,u.y),m=Math.sqrt(Math.pow(h,2)+Math.pow(d,2)),f=N+Math.pow(1/m*1e4,1.7),g=(t.directionAngle-p)%360;g<0&&(g+=360),c=g<180?(t.directionAngle-f*e+360)%360:(t.directionAngle+f*e+360)%360}else c=(t.directionAngle+N*e+360)%360;t.directionAngle=c;var y=T*e,v=r.default.getVectorFromAngleAndLength(t.directionAngle,y);i.node.x+=v.x,i.node.y+=v.y;var C=this.viewXToBoardX(i.node.x),w=this.viewYToBoardY(i.node.y);if(a&&C===a.boardX&&w===a.boardY){this.hitGameItemCoordinate(a,{type:"powerup",uid:i.node.uuid}),delete this.sniperTargets[a.uid],t.landingStartedAt=this.app.now;var B=i.uid;this.comboReportStart(B),this.comboReportAdd(B,i),this.comboReportAdd(B,a),this.comboReportEnd(B,"powerup")}},e._getSniperTarget=function(){var t=0,e=null,i={};for(var s in this.objectiveController.items)this.objectiveController.items[s].amount>0&&(i[this.objectiveController.items[s].type]=!0);for(var n=1;n<this.height;n++)for(var r=0;r<=this.width;r++){var l=0,h=this.underlay[n][r];this._isValidSniperTarget(h)&&(this.sniperTargets[h.uid]||(l=Math.max(10,l)));var d=this.board[n][r]||h;if(this._isValidSniperTarget(d)&&!this.sniperTargets[d.uid]){for(var u in i)d.objectiveTypes[u]&&(l=Math.max(100,l)),h&&h.objectiveTypes[u]&&(l=Math.max(100,l));var p=d.type;(l=c.default.is(p)||a.default.is(p)||o.default.is(p)||"movableDestructible1"===p?Math.max(20,l):"bomb"===p||"sniper"===p||"discoball"===p||"missiles1"===p||"missiles2"===p?Math.max(1,l-1):Math.max(10,l))>t&&(t=l,e=[]),l===t&&e.push(d)}}return e?e[Math.floor(this.rnd.random()*e.length)]:null},e._isValidSniperTarget=function(t){return!!t&&!!t.isIdle()},e._discoballGetAllByType=function(t){for(var e=[],i=0;i<this.height;i++)for(var a=0;a<=this.width;a++){var o=this.board[i][a];o&&o.isIdle()&&o.type===t&&e.push(o)}return e},e._animateDiscoBall=function(t){var e=this,i=t.pool,a=t.nextUpdate,o=t.discoBall,s=t.targetType,n=this.app.now,l=n-a;if(!(l<0)){t.nextUpdate=n+_-l;var c=this._discoballGetAllByType(s);if(!c.length){if(t.raysOfLightFinished<i.length)return;var h=o.uid;this.comboReportStart(h),this.comboReportAdd(h,o);for(var d,p=u(i);!(d=p()).done;){var m=d.value;m&&!m.isDying&&(m.unhighlightDisco(),this.hitUnderlay(m.boardX,m.boardY,"powerup"),this.hitGameItem(m,{type:"powerup",uid:h}),this.comboReportAdd(h,m))}return this.itemsWaitingForDisappear++,o.gotHit({type:"selfdestruction",uid:h}).then(function(){e.itemsWaitingForDisappear--,e.board[o.boardY][o.boardX]=null,e.gameItemDisappearanceFinished(o)}),this.hitUnderlay(o.boardX,o.boardY,"selfdestruction"),this.comboReportEnd(h,"powerup"),r.default.removeFromArray(s,this.explodingDiscoBalls),void r.default.removeFromArray(t,this.movingSprites)}var f=c[Math.floor(this.rnd.random()*c.length)];i.push(f),f.lockedForDiscoball=!0;var g=Math.sqrt(Math.pow(f.boardX-o.boardX,2)+Math.pow(f.boardY-o.boardY,2)),y={x:f.node.x-o.node.x,y:f.node.y-o.node.y},b=r.default.getAngleFromVector(y.x,y.y),v=cc.instantiate(this.spriteCollection.rayOfLight),C=v.getComponent(sp.Skeleton);v.scaleX=g*j,v.angle=360-b+90,this.view.addChild(v),C.setAnimation(0,"ray",!1),C.setCompleteListener(function(){t.raysOfLightFinished++,cc.tween(v).to(.5,{opacity:0},{easing:"sineIn"}).call(function(){v.destroy()}).start()}),this.app.scheduler.setTimeout(function(){f.highlightDisco()},200),v.zIndex=w.DISOBALL_RAY_OF_LIGHT,v.x=o.node.x,v.y=o.node.y}},e._moveMissile=function(t,e){t.startTime||(t.startTime=this.app.now);var i=t.node,a=t.direction,o=t.velocity,s=t.previousPosition,n=t.affectedTargets,l=t.reason,c=t.startTime;if(i.x+=a.x*e*o,i.y+=a.y*e*o,t.startedRemovalAt)return i.opacity=255*Math.max(0,t.startedRemovalAt+1e3-this.app.now)/1e3,void(0===i.opacity&&(i.parent.removeChild(i),i.destroy(),r.default.removeFromArray(t,this.movingSprites)));var h=this.viewXToBoardX(i.x+a.x*g),d=this.viewYToBoardY(i.y+a.y*g),u=this.app.now;if(this.isValidCoordinate(h,d)){var p=t.srcUid;this.comboReportStart(p);for(var m=Math.min(s.boardX,h),f=Math.min(s.boardY,d),y=Math.max(s.boardX,h),b=Math.max(s.boardY,d),v=m;v<=y;v++)for(var C=f;C<=b;C++)for(var S=0;S<=1;S++){if(S){var w=this.underlay[C][v];!w||w.isDying||n[w.uid]||n["u_"+v+"_"+C]||(n[w.uid]=!0,n["u_"+v+"_"+C]=!0,this.hitUnderlay(v,C,l))}var B=(S?this.board:this.next)[C][v];B&&(n[B.uid]||a.x&&n[v+"_*"]||B.creationTime>=c||B.isDying||B.lockedForDiscoball||B.shouldExplode||(B.explosionDuration=E/2,n[B.uid]=!0,a.x&&(n[v+"_*"]=!0),S?this.hitGameItem(B,l):(B.shouldExplode=!0,B.shouldExplodeReason=l),this.comboReportAdd(p,B)))}this.comboReportEnd(p,l),t.previousPosition.boardX=h,t.previousPosition.boardY=d}else t.startedRemovalAt=u},e._createMissile=function(t,e,i){var a=cc.instantiate(this.spriteCollection.missileAnim),o=a.getComponent(sp.Skeleton);return this.view.addChild(a),o.setSkin(t),o.setAnimation(0,"rocket",!1),a.zIndex=w.FLYING_MISSILE,a.x=e,a.y=i,t===A.rocketSkinLeft?a.angle=180:t===A.rocketSkinUp?a.angle=90:t===A.rocketSkinDown&&(a.angle=270),a},e._createFlame=function(t,e,i,a){var o=cc.instantiate(this.spriteCollection.flameAnim);return this.view.addChild(o),o.getComponent(sp.Skeleton).getCurrent(0).trackTime=a||0,o.zIndex=w.BOOSTER_PROJECTILE,o.x=t,o.y=e,o.angle=i,o},e.comboReportStart=function(t){this.comboReport[t]={}},e.comboReportAdd=function(t,e){this.comboReport[t][e.uid]=e.type},e.comboReportEnd=function(t,e){var i=[],a=this.comboReport[t];for(var o in a)i.push(a[o]);i.length&&this.onCombo({type:e,items:i}),delete this.comboReport[t]},e.isMoveAvailable=function(){if(!this.isIdle)return null;for(var t=[],e=1;e<this.height;e++)for(var i=0;i<this.width;i++){var a=this.board[e][i];a&&a.isPowerUpType()&&t.push([a])}for(var o=1;o<this.height;o++)for(var s=0;s<this.width;s++){var n=this.board[o][s];if(n&&n.isBasicType()){if(this.isValidCoordinate(s-1,o)){var r=this.board[o][s-1];if(r&&!r.isBlockingCascade){var l={};l[r.boardX+"_"+r.boardY]=n,l[n.boardX+"_"+n.boardY]=r;var c=this.getMatchable(l),h=(c.matched,c.matchGroups);if(Object.keys(h).length)for(var d in h)t.push([n,r])}}if(this.isValidCoordinate(s,o-1)){var u=this.board[o-1][s];if(u&&!u.isBlockingCascade){var p={};p[u.boardX+"_"+u.boardY]=n,p[n.boardX+"_"+n.boardY]=u;var m=this.getMatchable(p),f=(m.matched,m.matchGroups);if(Object.keys(f).length)for(var g in f)t.push([n,u])}}}}return!!t.length&&t},e.fixNoMoveAvailable=function(){for(var t={},e={},i=[],a={},o=1;o<this.height;o++)for(var s=0;s<this.width;s++){var n=this.board[o][s];n&&n.isBasicType()&&(t[n.type]||(t[n.type]=[]),t[n.type].push(n),e[n.uid]=n,i.push({x:s,y:o}),a[s+"_"+o]=!0)}for(var l in t)t[l].length<3&&delete t[l];var c=Object.keys(t);if(!c.length)return this._fixNoMoveAvailableReplaceAll(e);var h=t[c[Math.floor(this.rnd.random()*c.length)]];r.default.shuffleArray(h);for(var d,u,p,m,f,g,y,b,v=[h[0],h[1],h[2]],C=[],S=this.isValidCoordinate,w=this.board,B=a,I=1;I<this.height;I++)for(var x=0;x<this.width;x++)y=!0,S(x,I)&&S(x+1,I)&&S(x+2,I)||(y=!1),y&&w[I][x]&&w[I][x+1]&&w[I][x+2]||(y=!1),(!y||w[I][x].isBlockingCascade||w[I][x+1].isBlockingCascade||w[I][x+2].isBlockingCascade)&&(y=!1),y&&(p=x+1,m=I,f=x+2,g=I,B[(d=x-1)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x+1,m=I,f=x+2,g=I,B[(d=x)+"_"+(u=I-1)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x+1,m=I,f=x+2,g=I,B[(d=x)+"_"+(u=I+1)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x+1,m=I-1,f=x+2,g=I,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x+1,m=I+1,f=x+2,g=I,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x+1,m=I,f=x+3,g=I,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x+1,m=I,f=x+2,g=I-1,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x+1,m=I,f=x+2,g=I+1,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}])),b=!0,S(x,I)&&S(x,I+1)&&S(x,I+2)||(b=!1),b&&w[I][x]&&w[I+1]&&w[I+1][x]&&w[I+2]&&w[I+2][x]||(b=!1),(!b||w[I][x].isBlockingCascade||w[I+1][x].isBlockingCascade||w[I+2][x].isBlockingCascade)&&(b=!1),b&&(p=x,m=I+1,f=x,g=I+2,B[(d=x)+"_"+(u=I-1)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x,m=I+1,f=x,g=I+2,B[(d=x-1)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x,m=I+1,f=x,g=I+2,B[(d=x+1)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x-1,m=I+1,f=x,g=I+2,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x+1,m=I+1,f=x,g=I+2,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x,m=I+1,f=x,g=I+3,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x,m=I+1,f=x-1,g=I+2,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]),p=x,m=I+1,f=x+1,g=I+2,B[(d=x)+"_"+(u=I)]&&B[p+"_"+m]&&B[f+"_"+g]&&C.push([{x:d,y:u},{x:p,y:m},{x:f,y:g}]));r.default.shuffleArray(C);for(var F=0;F<C.length;F++)for(var k=0;k<10;k++){var _=C[F];r.default.shuffleArray(v),r.default.shuffleArray(i);var T={},N=0;for(var M in e){var O=e[M],P=v.indexOf(O);if(-1!==P)T[_[P].x+"_"+_[P].y]=O;else{for(var E=i[N];E.x===_[0].x&&E.y===_[0].y||E.x===_[1].x&&E.y===_[1].y||E.x===_[2].x&&E.y===_[2].y;)E=i[++N];T[E.x+"_"+E.y]=O,N++}}var R=this.getMatchable(T),L=(R.matched,R.matchGroups);if(!Object.keys(L).length)return this._switchPlaces(T)}this._fixNoMoveAvailableReplaceAll(e)},e._switchPlaces=function(t){var e=this;this.switchingCount++;var i=[],a=function(a){var o=t[a],s=a.split("_"),n=Number(s[0]),r=Number(s[1]);i.push(o.moveSpriteTo(e.boardXToViewX(n),e.boardYToViewY(r),D).then(function(){o.boardX=n,o.boardY=r,e.board[r][n]=o}))};for(var o in t)a(o);return this.lockUserInteraction("_fixNoMoveAvailableMoveAround"),Promise.all(i).then(function(){e.unlockUserInteraction("_fixNoMoveAvailableMoveAround"),e.switchingCount--})},e._fixNoMoveAvailableReplaceAll=function(t){var e={type:"noMoveAvailable",uid:Math.random()};for(var i in t){var a=t[i];this.hitGameItem(a,e)}},e.boardXToViewX=function(t){return t*g-this.width*g/2+g/2},e.boardYToViewY=function(t){return-(t*g-this.height*g/2)},e.viewXToBoardX=function(t){return Math.floor((t+this.width*g/2)/g)},e.viewYToBoardY=function(t){return Math.round((-t+this.height*g/2)/g)},e.isValidCoordinate=function(t,e){return!(t<0||e<1||t>this.width-1||e>this.height-1)},e.validatePattern=function(t,e){for(var i=e.length,a=0;a<t.length;a++)t[a].length!==i&&console.error("GameBoard - pattern has an inconsistent length")},e.getMostRecentlySwitchedItem=function(t){for(var e=0,i=null,a=0;a<t.length;a++)t[a].lastSwitch&&t[a].lastSwitch>e&&(e=t[a].lastSwitch,i=t[a]);return i},e.transformItem=function(t,e){var i=this,a=t.boardX,o=t.boardY,s=t.node,n=s.x,r=s.y,l=s.opacity,c=s.scale,h=cc.instantiate(this.GameItem).getComponent("GameItem");return this.view.addChild(h.node),h.init(e),h.node.x=n,h.node.y=r,h.boardX=a,h.boardY=o,h.node.scale=.25*c,h.node.opacity=0,new Promise(function(e){cc.tween(t.node).to(P,{scale:.25*c,opacity:0},{easing:"sineIn"}).start(),cc.tween(h.node).delay(P).to(P,{scale:c,opacity:l},{easing:"backOut"}).delay(.1).call(function(){i.board[o][a]=h,t.destroy(),e()}).start()})},e.transformItemToType=function(t,e){var i=this;return new Promise(function(a){var o=t.boardX,s=t.boardY,n=t;if(!n||!n.isIdle())return console.error("transformItemToType: item is not idle",n);n.node.zIndex=w.BORDER+1,cc.tween(n.node).to(.3,{scale:1.5*b},{easing:"sineOut"}).call(function(){cc.tween(n.node).to(.3,{scale:.01},{easing:"quartIn"}).start()}).start();var r=i.getNewGameItemFromBlueprint({blueprint:e,view:i.view,boardX:o,boardY:s,x:i.boardXToViewX(o),y:i.boardYToViewY(s)});r.node.opacity=0,r.node.scale=2*b,r.node.zIndex=w.BORDER+1,cc.tween(r.node).delay(.5).to(.4,{scale:b,opacity:255},{easing:"sineOut"}).call(function(){r.node.zIndex=w.ITEM,i.board[s][o]=r,n.destroy(),a()}).start(),i._notIdle()})},e.transformRandomItemsToType=function(t,e){for(var i={},a=0,o=1;o<this.height;o++)for(var s=0;s<=this.width;s++){var n=this.underlay[o][s],r=this.board[o][s]||n;this._isValidSniperTarget(r)&&(i[r.uid]||r.isBasicType()&&(i[r.uid]=r,a++))}for(var l=0;l<e;l++){if(0===a)return void console.error(new Error("No valid item to transform."));var c=Math.floor(this.rnd.random()*a),h=Object.keys(i)[c],d=i[h],u="missiles"===t?"missiles"+(1+Math.floor(2*this.rnd.random())):t;this.transformItemToType(d,u),delete i[h],a--}},e.getNewGameItemFromBlueprint=function(t){var e=t.blueprint,i=t.view,a=t.boardX,o=t.boardY,s=t.x,n=t.y;if(!e)return null;var r=e;"Array"===r.constructor.name&&(r=r[Math.floor(Math.random()*r.length)]);var l=cc.instantiate(this.GameItem).getComponent("GameItem");return i.addChild(l.node),l.init({app:this.app,onDestroyCb:this.onGameItemDestroy,type:r,gameBoard:this,boardX:a,boardY:o,viewX:s,viewY:n}),l},e.checkRespawn=function(){if(this.checkRespawnRequest){this.checkRespawnRequest=!1;for(var t=0;t<this.width;t++){var e=this.spawners[t];if(!this.board[e.boardY+1][t]&&!this.next[e.boardY+1][t]&&!this.final[e.boardY+1][t]){var i=void 0;"Object"===e.blueprint.constructor.name&&e.blueprint.sequence?1===e.blueprint.sequence.length?(e.blueprint=e.blueprint.sequence[0],i=e.blueprint):i=e.blueprint.sequence.shift():i=e.blueprint;var a=this.getNewGameItemFromBlueprint({blueprint:i,view:e,boardX:e.boardX,boardY:e.boardY,x:this.boardXToViewX(e.boardX),y:this.boardYToViewY(e.boardY)});a.isSpawning=!0,this._startCascadeItemTo(a,{next:{boardX:e.boardX,boardY:e.boardY+1},final:{boardX:e.boardX,boardY:e.boardY+1}});var o=this.previous[a.cascade.next.boardY][a.cascade.next.boardX];o&&(a.velocity=o.velocity,a.cascade.traveled=!0),this.isCascading=!0}}}},e.gameFinished=function(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null)},e.destroy=function(){this.gameFinished(),this.isBeingDestroyed=!0},t}();i.default=G,e.exports=i.default,cc._RF.pop()},{"../constants.js":"constants","../helpers.js":"helpers","./GameItem/GameItem.js":"GameItem","./GameItem/bumper.js":"bumper","./GameItem/cabinet.js":"cabinet","./GameItem/simpleCrate.js":"simpleCrate","./Rnd.js":"Rnd"}],GameItem:[function(t,e){"use strict";cc._RF.push(e,"fb0165kpG9GX5niWjNvxe4O","GameItem");var i=l(t("./bumper.js")),a=l(t("./cabinet.js")),o=l(t("../../constants.js")),s=l(t("../../helpers.js")),n=l(t("./simpleCrate.js")),r=l(t("./underlay.js"));function l(t){return t&&t.__esModule?t:{default:t}}function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var h=o.default.GAMEPLAY,d=h.TILE_SIZE,u=h.ITEM_SIZE,p=h.ITEM_SCALE,m=h.Z_INDEX,f=h.ITEM_SWITCH_DURATION,g=h.ITEM_EXPLODE_DURATION,y=h.POWERUP_SPAWN_DURATION,b=h.GAME_ITEM_TYPE,v=h.ITEM_SHATTER_COLOR,C=h.ITEMS_GATHERING_DURATION,S=h.DISCO_PULSE_SPEED,w=h.DISCO_PULSE_SCALE,B=h.DISCO_GLOW_APPEARANCE_DURATION,I=0;cc.Class({extends:cc.Component,properties:c({basic1:{default:null,type:cc.SpriteFrame},basic2:{default:null,type:cc.SpriteFrame},basic3:{default:null,type:cc.SpriteFrame},basic4:{default:null,type:cc.SpriteFrame},basic5:{default:null,type:cc.SpriteFrame},basic1glow:{default:null,type:cc.SpriteFrame},basic2glow:{default:null,type:cc.SpriteFrame},basic3glow:{default:null,type:cc.SpriteFrame},basic4glow:{default:null,type:cc.SpriteFrame},basic5glow:{default:null,type:cc.SpriteFrame},missiles1:{default:null,type:cc.SpriteFrame},missiles2:{default:null,type:cc.SpriteFrame},discoball:{default:null,type:cc.SpriteFrame},sniper:{default:null,type:cc.SpriteFrame},bomb:{default:null,type:cc.SpriteFrame},material_normal:{default:null,type:cc.Material},material_spineNormal:{default:null,type:cc.Material},shatterFX:{default:null,type:cc.Prefab},bombFX:{default:null,type:cc.Prefab},sniperFX:{default:null,type:cc.Prefab},discoballFX:{default:null,type:cc.Prefab},lightBallFX:{default:null,type:cc.Prefab},movableDestructible1:{default:null,type:cc.SpriteFrame}},n.default.properties,r.default.properties,i.default.properties,a.default.properties),statics:{preParsePattern:function(t,e){a.default.preParsePattern(t,e)}},ctor:function(){this.app=null,this.gameBoard=null,this.type=null,this.boardX=null,this.boardY=null,this.onDestroyCb=null,this.isDying=!1,this.isSpawning=!1,this.cascade={isCascading:!1,previous:null,next:null,final:null,delayUntil:null,traveled:!1},this.velocity=0,this.isBlockingCascade=!1,this.isMatchable=!1,this.isSwitching=!1,this.locksForUpcomingMatch=0,this.lockedForDiscoball=!1,this.shouldExplode=!1,this.shouldExplodeReason=null,this.lastSwitch=null,this.explosionDuration=g,this.lifePoints=1,this.creationTime=null,this.linkedGamesItems=null,this.objectiveTypes=null,this.uid=++I,this.options=null,this.isSensitive=!1,this.layers={},this.currentLayerId=null,this.onUpdate=null},init:function(t){var e;this.options=t;var o,s=t.app,l=t.onDestroyCb,c=t.type,h=t.gameBoard;switch(this.app=s,this.gameBoard=h,this.onDestroyCb=l,void 0!==t.boardX&&(this.boardX=t.boardX),void 0!==t.boardY&&(this.boardY=t.boardY),void 0!==t.viewX&&(this.node.x=t.viewX),void 0!==t.viewY&&(this.node.y=t.viewY),this.type=c,this.objectiveTypes=((e={})[c]=!0,e),this.creationTime=this.app.now,c){case"basic1":case"basic2":case"basic3":case"basic4":case"basic5":this.isMatchable=!0,this.node.zIndex=m.ITEM,this._addLayers({default:this[c]}),this.currentLayerId="default";break;case"missiles1":case"missiles2":this.node.zIndex=m.ITEM,this._addLayers({default:this[c]}),this.currentLayerId="default";break;case"sniper":this.node.zIndex=m.ITEM,o=cc.instantiate(this.sniperFX),this._addLayers({spine:o}),this.layers.spine.active=!1,this._addLayers({default:this[c]}),this.currentLayerId="default";break;case"discoball":this.node.zIndex=m.ITEM,o=cc.instantiate(this.discoballFX),this._addLayers({spine:o}),this.layers.spine.active=!1,this._addLayers({default:this[c]}),this.currentLayerId="default";break;case"bomb":this.node.zIndex=m.ITEM,o=cc.instantiate(this.bombFX),this._addLayers({spine:o}),this.currentLayerId="spine",o.getComponent(sp.Skeleton).setAnimation(0,"idle",!0);break;case"movableDestructible1":this.node.zIndex=m.ITEM,this._addLayers({default:this[c]}),this.currentLayerId="default",this.isSensitive=!0;break;default:if(n.default.is(c))n.default.init(this,t);else if(r.default.is(c))r.default.init(this,t);else if(i.default.is(c))i.default.init(this,t);else{if(!a.default.is(c))return console.error(c+" is not a valid item type");a.default.init(this,t)}}this.node.scale=p},update:function(t){if(this.onUpdate)for(var e in this.onUpdate)this.onUpdate[e].update(t,this.onUpdate[e].data)},gotHit:function(t){var e=this;return new Promise(function(o){return n.default.is(e.type)?n.default.gotHit(e,t,o):r.default.is(e.type)?r.default.gotHit(e,t,o):i.default.is(e.type)?i.default.gotHit(e,t,o):a.default.is(e.type)?a.default.gotHit(e,t,o):(e.lifePoints--,e._checkLifePoints(),0===e.lifePoints?e._defaultExplode(t,o):o())})},_defaultExplode:function(t,e){var i=this;this.isDying=!0;var a=cc.instantiate(this.shatterFX);this.node.parent.addChild(a),a.position=this.node.position,a.x+=(.2*Math.random()-.1)*d,a.y+=(.2*Math.random()-.1)*d,a.zIndex=m.ITEM_SHATTER,a.scale=p*(.9+.2*Math.random()),a.angle=360*Math.random();var o=a.getComponent(sp.Skeleton);o.setSkin(v[this.type]||"default"),o.setAnimation(0,"boom",!1),o.setCompleteListener(function(){a.destroy(),i.app.scheduler.setTimeout(function(){i.destroyFromBoard()},0),e&&(i._onDestroyCb(),e(),e=null)}),cc.tween(this.node).to(this.explosionDuration,{opacity:0},{easing:"linear"}).call(function(){e&&(i._onDestroyCb(),e(),e=null)}).start()},explodeForPowerUp:function(t,e){var i=this;return new Promise(function(a){i.isDying=!0,cc.tween(i.node).to(C,{x:t,y:e},{easing:"linear"}).call(function(){i._onDestroyCb(),i.app.scheduler.setTimeout(function(){i.destroyFromBoard()},0),a()}).start()})},switchSpriteTo:function(t,e,i){var a=this;return this.lastSwitch=i?this.app.now:null,this.isSwitching=!0,new Promise(function(i){cc.tween(a.node).to(f,{x:t,y:e},{easing:"quadOut"}).call(function(){a.isSwitching=!1,i()}).start()})},moveSpriteTo:function(t,e,i){var a=this;return new Promise(function(o){cc.tween(a.node).to(i,{x:t,y:e},{easing:"quadInOut"}).call(o).start()})},spawnPowerUp:function(){var t=this;return this.node.opacity=0,this.node.scale=1.5*p,new Promise(function(e){cc.tween(t.node).to(y,{opacity:255,scale:p},{easing:"linear"}).call(function(){e()}).start()})},highlight:function(t,e){var i=this.layers[this.currentLayerId],a=i.getComponent(cc.Sprite);a?a.setMaterial(0,t):(a=i.getComponent(sp.Skeleton))&&a.setMaterial(0,e)},unHighlight:function(){var t=this.layers[this.currentLayerId],e=t.getComponent(cc.Sprite);e?e.setMaterial(0,this.material_normal):(e=t.getComponent(sp.Skeleton))&&e.setMaterial(0,this.material_spineNormal)},highlightDisco:function(){this._addLayers({discoHighlight:this[this.type+"glow"]}),this.layers.discoHighlight.zIndex=-2,this.layers.discoHighlight.width=1.15*u,this.layers.discoHighlight.height=1.15*u,this.layers.discoHighlight.opacity=0;var t=cc.instantiate(this.lightBallFX);this._addLayers({spine:t}),t.zIndex=-1,this.layers.spine.opacity=0,this.onUpdate=this.onUpdate||{},this.onUpdate.discoPulse={update:this._highlightDiscoUpdate.bind(this),data:{start:this.app.now}}},_highlightDiscoUpdate:function(t,e){var i=w,a=this.app.now-e.start;if(a<B){var o=a/B;this.layers.default.opacity=170+85*o,this.layers.spine.opacity=255*o,this.layers.discoHighlight.opacity=255*o,i*=o}this.node.scale=(Math.cos((this.app.now-e.start)/S)/200*i+.01*(100-i))*p},unhighlightDisco:function(){this.layers.discoHighlight.destroy(),delete this.layers.discoHighlight,this.layers.default.opacity=255,delete this.onUpdate.discoPulse,this._onUpdateCleanup()},destroyFromBoard:function(){this.node.parent.removeChild(this.node),this.node.destroy()},isBasicType:function(){return this.type===b.basic1||this.type===b.basic2||this.type===b.basic3||this.type===b.basic4||this.type===b.basic5},isPowerUpType:function(){return this.type===b.missiles1||this.type===b.missiles2||this.type===b.discoball||this.type===b.sniper||this.type===b.bomb},isIdle:function(){return!(this.isDying||this.isSwitching||this.lockedForDiscoball||this.locksForUpcomingMatch||this.shouldExplode||this.cascade&&this.cascade.isCascading)},startHint:function(){var t=this;this.onUpdate||(this.onUpdate={}),this.onUpdate.hintShake={data:{shakeUntil:this.app.now+1e3,resolve:function(){t.node.angle=0,t.layers[t.currentLayerId].x=0,t.layers[t.currentLayerId].y=0,delete t.onUpdate.hintShake,t._onUpdateCleanup()}},update:function(e,i){if(t.app.now>=i.shakeUntil)return i.resolve();t.layers[t.currentLayerId].x=10*t.app.noise.noise2D(t.app.now/130,20*t.uid),t.layers[t.currentLayerId].y=10*t.app.noise.noise2D(t.app.now/130,30*t.uid)}}},stopHint:function(){this.onUpdate&&this.onUpdate.hintShake&&this.onUpdate.hintShake.data.resolve()},_addLayers:function(t){for(var e in t){this.layers[e]&&console.error("GameItem: a layer id "+e+" already exists");var i=t[e];i instanceof cc.SpriteFrame?this.layers[e]=s.default.createSprite({spriteFrame:i,width:this.node.width,height:this.node.height,view:this.node}):i instanceof cc.Node?(this.layers[e]=i,this.node.addChild(i)):console.error("Impossible to add the following as a GameItem layer:",i)}},_checkLifePoints:function(){this.lifePoints<0&&(console.error("an item reached negative life points"),this.lifePoints=0)},_onUpdateCleanup:function(){Object.keys(this.onUpdate).length||(this.onUpdate=null)},_onDestroyCb:function(){this.onDestroyCb&&this.type&&this.onDestroyCb(this.type)}}),cc._RF.pop()},{"../../constants.js":"constants","../../helpers.js":"helpers","./bumper.js":"bumper","./cabinet.js":"cabinet","./simpleCrate.js":"simpleCrate","./underlay.js":"underlay"}],GameTile:[function(t,e){"use strict";cc._RF.push(e,"383a9hlWQJBd4i5TQ4psKXx","GameTile"),cc.Class({extends:cc.Component,properties:{oddBg:{default:null,type:cc.SpriteFrame},evenBg:{default:null,type:cc.SpriteFrame}},ctor:function(){this.boardX=null,this.boardY=null},setBg:function(t){this.node.getComponent(cc.Sprite).spriteFrame=t?this.oddBg:this.evenBg}}),cc._RF.pop()},{}],Game:[function(t,e){"use strict";cc._RF.push(e,"34330nubVdEFoykqwfo2QXI","Game");var i=c(t("../models/catModels.js")),a=c(t("../staticData/cats.js")),o=c(t("../constants.js")),s=c(t("../gameplay/GameBoard.js")),n=c(t("../models/levelModel.js")),r=c(t("../models/supplyModel.js")),l=c(t("../userState"));function c(t){return t&&t.__esModule?t:{default:t}}var h=o.default.IPAD_RATIO,d=o.default.DEBUG,u=o.default.GAMEPLAY,p=u.TILE_SIZE;u.ITEM_SIZE,cc.Class({extends:cc.Component,properties:{GameTile:{default:null,type:cc.Prefab},GameItem:{default:null,type:cc.Prefab},GameItemSpawner:{default:null,type:cc.Prefab},SpriteCollection:{default:null,type:cc.Prefab}},onLoad:function(){var t=this;this.app=cc.find("app").getComponent("app"),this.app.info("Game.js - onLoad"),this.app.IS_DEVELOPMENT&&(globalThis.game=this);var e=l.default.getProgression();this.turns=0,this.extraLifes=0,this.isGameEnded=!1,this.isGameWon=!1,this.scaleContainer=this.node.getChildByName("scaleContainer"),this.gameBoardContainer=this.scaleContainer.getChildByName("gameBoardContainer"),this.spriteCollection=cc.instantiate(this.SpriteCollection).getComponent("SpriteCollection"),this.topUI=this.scaleContainer.getChildByName("top"),this.catSpine=this.topUI.getChildByName("cat").getComponent(sp.Skeleton),this.catBoardAttachment=this.catSpine.findSlot("Cat_Bella/top").attachment,this.bottomUI=this.scaleContainer.getChildByName("bottom"),this.boosterFrame=this.bottomUI.getChildByName("boosterFrame"),this.boosterController=this.boosterFrame.getComponent("BoosterController"),this.boosterOverlay=this.boosterFrame.getChildByName("container").getChildByName("overlay"),this.boosterContent=this.boosterOverlay.getChildByName("content");var i=this.topUI.getChildByName("levelLabel").getComponent(cc.Label);this.objectiveController=this.topUI.getChildByName("objectiveFrame").getComponent("ObjectiveController"),this.tutorialController=this.scaleContainer.getChildByName("Tutorial").getComponent("TutorialController"),this.result=this.scaleContainer.getChildByName("Result").getComponent("ResultController"),this.confirmation=this.scaleContainer.getChildByName("Confirmation").getComponent("ConfirmationController"),this.selectionPopup=this.scaleContainer.getChildByName("SelectionPopup").getComponent("StartSelectionPopup"),this.pausePopup=this.scaleContainer.getChildByName("PausePopup").getComponent("PausePopup"),this.pauseButton=this.topUI.getChildByName("pauseButton").getComponent(cc.Button),this.gameBoard=null,this.levelData=n.default.getLevel(d.TEST_LEVEL||e),this.levelData?(this.createBoard(this.levelData),this.turns=this.levelData.turns||0,this.selectedCat=null,this.result.node.active=!0,this.confirmation.node.active=!0,this.selectionPopup.node.active=!0,this.pausePopup.node.active=!0,this.tutorialController.node.active=!0,this.catBoardAttachment.relativeX=this.catBoardAttachment.x+this.catSpine.node.x,this.catSpine.state="IDLE",this.catSpine.isExcited=!1,this.catSpine.idleTimer=0,this.catWatchingCombo=0,this.lastCombo=0,this.catSpine.setMix("Cat_idle","Cat_excited",.5),this.catSpine.setMix("Cat_nervous","Cat_excited",.5),this.objectiveController.loadObjectives(this.levelData.objectives,this.onObjectiveCompleted.bind(this)),i.string="LEVEL "+this.levelData.levelNumber,this.result.init({onHome:this.loadHome.bind(this),onTryAgain:this.reloadGame.bind(this),onNextLevel:this.reloadGame.bind(this)}),this.pausePopup.init({onHome:this.loadHome.bind(this),onRestart:this.reloadGame.bind(this)}),this.tutorialController.init(d.TEST_LEVEL||e,{gameBoard:this.gameBoard,topUI:this.topUI,bottomUI:this.bottomUI,boosterController:this.boosterController}),this.gameBoard.lockUserInteraction("startSelection"),d.SKIP_SELECTION_POPUP?(this.onStartSelectionClosed(),this.selectionPopup.node.active=!1):(this.selectionPopup.init(this.onStartSelectionClosed.bind(this)),this.catSpine.node.x-=300,this.catBoardAttachment.x=this.catBoardAttachment.relativeX-this.catSpine.node.x,this.catBoardAttachment.updateOffset(),setTimeout(function(){t.selectionPopup.show(t.levelData)},200)),this.gameBoardContainer.on(cc.Node.EventType.TOUCH_START,this.gameBoard.onTouchStart,this.gameBoard),this.gameBoardContainer.on(cc.Node.EventType.TOUCH_MOVE,this.gameBoard.onTouchMove,this.gameBoard),this.gameBoardContainer.on(cc.Node.EventType.TOUCH_END,this.gameBoard.onTouchEnd,this.gameBoard),this.gameBoardContainer.on(cc.Node.EventType.TOUCH_CANCEL,this.gameBoard.onTouchCancel,this.gameBoard),this.pauseButton.node.on("click",this.onPauseClicked,this),this.app.setSceneVisible(this)):console.error("No level data found")},onDestroy:function(){this.app.info("Game.js - onDestroy"),this.gameBoardContainer.off(cc.Node.EventType.TOUCH_START,this.gameBoard.onTouchStart,this.gameBoard),this.gameBoardContainer.off(cc.Node.EventType.TOUCH_MOVE,this.gameBoard.onTouchMove,this.gameBoard),this.gameBoardContainer.off(cc.Node.EventType.TOUCH_END,this.gameBoard.onTouchEnd,this.gameBoard),this.gameBoardContainer.off(cc.Node.EventType.TOUCH_CANCEL,this.gameBoard.onTouchCancel,this.gameBoard),this.app.setSceneHidden(this)},endGame:function(t){this.isGameEnded=!0,this.isGameWon=t,this.boosterController.lockUserInteraction(),this.gameBoard.lockUserInteraction("endGame"),this.gameBoard.updateIdleState(),this.gameBoard.isIdle&&(this.extraLifes?(this.triggerExtraLifeAbilities(),this.isGameEnded=!1,this.boosterController.unlockUserInteraction(),this.gameBoard.unlockUserInteraction("endGame")):this.showResult())},onMoveTriggered:function(){this.turns=Math.max(0,this.turns-1),this.catSpine.state=this.turns<=5?"NERVOUS":"IDLE",this.turnNumLabel.string=this.turns,0===this.turns&&this.endGame(!1)},onBoardIdle:function(){this.catWatchingCombo=0,this.tutorialController.triggerTutorial(),this.isGameEnded&&(!this.isGameWon&&this.extraLifes?(this.triggerExtraLifeAbilities(),this.isGameEnded=!1,this.boosterController.unlockUserInteraction(),this.gameBoard.unlockUserInteraction("endGame")):this.showResult()),this.lastCombo=0},onCombo:function(t){this.catWatchingCombo+=t.items.length,this.catWatchingCombo>=16&&!this.catSpine.isExcited&&(this.catSpine.isExcited=!0,this.catWatchingCombo=0),this.lastCombo++},showResult:function(){if(!this.result.isShowing){var t,e;this.result.setNextButtonState(this.levelData.id===d.TEST_LEVEL||n.default.hasNextLevel(this.levelData.id));var i=(null==(t=this.levelData.rewards)?void 0:t.coin)||0,a=this.turns/this.levelData.turns>=.2,o=this.lastCombo>=3,s=a&&o;i+=Math.round(i*(a?.2:0))+Math.round(i*(o?.2:0))+Math.round(i*(s?.2:0));var c=(null==(e=this.levelData.rewards)?void 0:e.star)||0,h=null;this.isGameWon&&(h=r.default.addStar(c),l.default.updateCoin(i)),this.pausePopup.isShowing&&this.pausePopup.hide(!0);var u={isWon:this.isGameWon,star:c,coin:i,gotCoinBonus1:a,gotCoinBonus2:o,gotCoinBonus3:s,unlockedData:h};globalThis.GAMESNACKS&&(this.isGameWon?GAMESNACKS.levelComplete(this.levelData.levelNumber):GAMESNACKS.gameOver(),GAMESNACKS.sendScore(this.levelData.levelNumber)),this.result.show(u,this.levelData,!0),this.gameBoard.gameFinished()}},onGameItemDestroy:function(t){this.objectiveController.reduceType(t)},onObjectiveCompleted:function(){l.default.stepProgression(1),this.endGame(!0)},createBoard:function(t){var e=this,i=t.spawnPattern,a=t.pattern,o=t.underlayPattern;this.gameBoard=new s.default({spawnPattern:i,pattern:a,underlayPattern:o,view:this.gameBoardContainer,GameTile:this.GameTile,GameItem:this.GameItem,GameItemSpawner:this.GameItemSpawner,spriteCollection:this.spriteCollection,boosterController:this.boosterController,tutorialController:this.tutorialController,objectiveController:this.objectiveController,app:this.app,onGameItemDestroy:this.onGameItemDestroy.bind(this),onIdle:this.onBoardIdle.bind(this),onMoveTriggered:this.onMoveTriggered.bind(this),onBoosterModeEnd:this.boosterController.exitBoosterMode.bind(this.boosterController),onCombo:function(t){e.onCombo(t)}})},triggerCatStartingAbilities:function(){if(!this.tutorialController.hasTutorial&&this.selectedCat){var t=this.selectedCat.getIntimacyLevel();t&&("bella"===this.selectedCat.id?this.turns+=t:"milo"===this.selectedCat.id?this.gameBoard.transformRandomItemsToType("sniper",t):"dora"===this.selectedCat.id?this.gameBoard.transformRandomItemsToType("missiles",t):"lily"===this.selectedCat.id?this.gameBoard.transformRandomItemsToType("bomb",t):"bob"===this.selectedCat.id?this.gameBoard.transformRandomItemsToType("discoball",t):"leo"===this.selectedCat.id?this.boosterController.preAddTemporaryBoosters("hammer",this.selectedCat.id,t):"max"===this.selectedCat.id?this.boosterController.preAddTemporaryBoosters("wheel",this.selectedCat.id,t):"luna"===this.selectedCat.id&&(this.extraLifes=2*t))}},triggerExtraLifeAbilities:function(){this.turns+=this.extraLifes,this.catSpine.state=this.turns<=5?"NERVOUS":"IDLE",this.extraLifes=0,this.animateChangingTurnLabel()},animateChangingTurnLabel:function(){var t=this;this.turnNumLabel.node.scale=1,cc.tween(this.turnNumLabel.node).to(.3,{scale:1.6},{easing:"quadOut"}).call(function(){t.turnNumLabel.string=t.turns}).delay(.05).to(.2,{scale:1},{easing:"linear"}).start()},update:function(t){this.gameBoard&&(this.gameBoard.update(t),this.catSpine.isExcited?"Cat_excited"!==this.catSpine.animation?this.catSpine.setAnimation(0,"Cat_excited",!1):this.catSpine.getCurrent(0).isComplete()&&(this.catSpine.isExcited=!1,this.catSpine.idleTimer=0):(this.catSpine.idleTimer-=t,this.catSpine.getCurrent(0).isComplete()&&this.catSpine.idleTimer<0&&(this.catSpine.idleTimer=this.catSpine.getCurrent(0).animation.duration+Math.random(),this.catSpine.setAnimation(0,"NERVOUS"===this.catSpine.state?"Cat_nervous":"Cat_idle",!1))),this.turns<=5&&!this.isGameEnded?(this.turnNumLabel.node.scale=.9+(Math.cos(this.app.now/150)+1)/5,this.turnNumLabel.beating=!0):this.turnNumLabel.beating&&(this.turnNumLabel.node.scale=1,this.turnNumLabel.beating=!1))},updateScreenSize:function(t){t.ratio>h?(this.scaleContainer.height=1024/h,this.scaleContainer.scale=t.height/this.scaleContainer.height):(this.scaleContainer.scale=t.width/1024,this.scaleContainer.height=t.height/this.scaleContainer.scale);var e,i=this.scaleContainer.getChildByName("topBg"),a=546+this.topUI.height-30-20,o=1,s=this.scaleContainer.height-a;s>=1013.76?e=1013.76:(o=Math.max(s/1013.76,.7),e=this.scaleContainer.height-a*o),i.y=.5*this.scaleContainer.height;var n=i.getChildByName("turnFrame");n.x=512,n.y=0,n.scale=o,this.turnNumLabel=n.getChildByName("turnLabel").getComponent(cc.Label),this.turnNumLabel.string=this.turns,this.topUI.scale=o,this.topUI.width=1049/o,this.topUI.y=this.scaleContainer.height/2-290*o,this.pauseButton.node.x=512-80*o,this.catBoardAttachment.width=this.topUI.width,this.catBoardAttachment.updateOffset();var r=this.scaleContainer.getChildByName("wallpaper");r.y=-this.scaleContainer.height/2,r.height=this.scaleContainer.height-320*o,this.gameBoardContainer.scale=e/(9*p),this.gameBoardContainer.width=9*p,this.gameBoardContainer.height=9*p,this.gameBoardContainer.y=(-94-this.topUI.height+50)*o*.5,this.bottomUI.y=-this.scaleContainer.height/2,this.boosterFrame.scale=o,this.boosterOverlay.height=(this.scaleContainer.height+300)/o,this.boosterOverlay.width=this.scaleContainer.width/o,this.boosterContent.y=this.boosterOverlay.height-.5*this.boosterContent.height-300/o,this.tutorialController.node.width=this.scaleContainer.width,this.tutorialController.node.height=this.scaleContainer.height,this.tutorialController.updateScreenSize(t,o),this.result.updateScreenSize(t),this.confirmation.updateScreenSize()},loadHome:function(){this.gameBoard.destroy(),this.app.changeScene(this,"Home")},reloadGame:function(){this.gameBoard.destroy(),this.app.reloadScene()},onEnable:function(){this.app.info("Game.js - onEnable")},start:function(){this.app.info("Game.js - start")},onDisable:function(){this.app.info("Game.js - onDisable")},onStartSelectionClosed:function(){var t=this,e=l.default.getSelectedCat();e&&this.catSpine.setSkin("Cat_"+a.default[e].name),this.selectedCat=i.default.getCat(e);var o=this.turns;this.triggerCatStartingAbilities(),o!==this.turns&&this.animateChangingTurnLabel(),this.app.IS_DEVELOPMENT&&this.app.enableX3Turn&&(this.turns*=3),this.boosterController.init({gameBoard:this.gameBoard,tutorialController:this.tutorialController,level:this.levelData}),cc.tween(this.catSpine.node).by(.8,{x:300},{easing:"quintOut",progress:function(e,i,a,o){var s=e+(i-e)*o;return t.catBoardAttachment.x=t.catBoardAttachment.relativeX-s,t.catBoardAttachment.updateOffset(),s}}).start();var s=this.boosterFrame.y;this.boosterFrame.y-=300,cc.tween(this.boosterFrame).to(.5,{y:s},{easing:"quadOut"}).start(),setTimeout(function(){t.gameBoard.unlockUserInteraction("startSelection"),t.gameBoard.checkMatchesRequest=!0,t.tutorialController.triggerTutorial()},400)},onPauseClicked:function(){this.tutorialController.isTutorialShowing||this.pausePopup.show(!0)}}),cc._RF.pop()},{"../constants.js":"constants","../gameplay/GameBoard.js":"GameBoard","../models/catModels.js":"catModels","../models/levelModel.js":"levelModel","../models/supplyModel.js":"supplyModel","../staticData/cats.js":"cats","../userState":"userState"}],GiftPopup:[function(t,e){"use strict";cc._RF.push(e,"f2a11hgLypJ9qwMEHs5s+mY","GiftPopup"),cc.Class({extends:cc.Component,properties:{gift_1:{default:null,type:cc.SpriteFrame},gift_2:{default:null,type:cc.SpriteFrame},gift_3:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.content=this.node.getChildByName("content"),this.popup=this.content.getChildByName("popup"),this.frame=this.popup.getChildByName("frame"),this.okButton=this.frame.getChildByName("okButton"),this.innerFrame=this.frame.getChildByName("innerFrame"),this.giftFrame=this.innerFrame.getChildByName("giftFrame"),this.lightMask=this.giftFrame.getChildByName("lightMask"),this.light=this.lightMask.getChildByName("light"),this.okButton.on("click",this.onCloseClicked,this)},update:function(t){this.light.angle+=20*t,this.light.scale=.9+.05*Math.sin(this.app.now/1e3*4)},show:function(t){var e=this;this.backer=this.node.getChildByName("backer"),this.content=this.node.getChildByName("content"),this.popup=this.content.getChildByName("popup"),this.frame=this.popup.getChildByName("frame"),this.confetti=this.content.getChildByName("confetti"),this.congrat=this.content.getChildByName("congratulations"),this.innerFrame=this.frame.getChildByName("innerFrame"),this.giftFrame=this.innerFrame.getChildByName("giftFrame"),this.lightMask=this.giftFrame.getChildByName("lightMask"),this.gift=this.lightMask.getChildByName("gift").getComponent(cc.Sprite),this.skillFrame=this.innerFrame.getChildByName("skillFrame"),this.skillLabel=this.skillFrame.getChildByName("label").getComponent(cc.Label);var i=(null==t?void 0:t.isMaxed())||!1,a=(null==t?void 0:t.getIntimacyLevel())||0,o=(null==t?void 0:t.getCurrentSkillDesc())||"";this.node.active=!0,this.animating=!0,this.gift.spriteFrame=this["gift_"+a],this.skillLabel.string=o;var s=i?.5:0,n=i?.5:.6,r=n;this.backer.opacity=0,cc.tween(this.backer).to(.3,{opacity:200},{easing:"quadOut"}).start(),this.congrat.active=!1,i&&(this.congrat.active=!0,this.congrat.scale=0,cc.tween(this.congrat).delay(s).to(.4,{scale:1,opacity:255},{easing:"backOut"}).start()),this.popup.active=!0,this.popup.scale=0,this.popup.opacity=0,cc.tween(this.popup).to(n,{scale:1,opacity:255},{easing:"backOut"}).start(),this.gift.node.scale=0,cc.tween(this.gift.node).delay(r).to(n,{scale:1},{easing:"backOut"}).start(),this.confetti.active=!1,i&&(this.confetti.active=!0,this.confetti.children.forEach(function(t){var e=t.x,i=t.y,a=t.angle,o=.8+.4*Math.random(),n=400+100*Math.random(),r=.5*t.x+.5*t.x*Math.random(),l=90*Math.random();t.x-=r,t.y-=n,t.opacity=0,cc.tween(t).delay(.1+s).by(.8*o,{x:r},{easing:"cubicOut"}).start(),cc.tween(t).delay(.1+s).to(.1*o,{opacity:255}).delay(.6*o).to(.3*o,{opacity:0}).start(),cc.tween(t).delay(.1+s).by(o,{angle:l},{easing:"linear"}).start(),cc.tween(t).delay(.1+s).by(.4*o,{y:n},{easing:"cubicOut"}).delay(.05).by(.8*o,{y:-n},{easing:"quadIn"}).call(function(){t.x=e,t.y=i,t.angle=a}).start()})),setTimeout(function(){e.animating=!1},1e3*(n+s))},hide:function(t){var e=this;if(void 0===t&&(t=!0),t){this.animating=!0;var i=this.congrat.active?.2:0;this.congrat.active&&cc.tween(this.congrat).to(.4,{scale:0,opacity:0},{easing:"sineOut"}).call(function(){e.congrat.active=!1}).start(),cc.tween(this.backer).delay(i).to(.3,{opacity:0},{easing:"quadOut"}).start(),cc.tween(this.popup).delay(i+.1).to(.3,{scale:0,opacity:0},{easing:"sineOut"}).call(function(){e.animating=!1,e.node.active=!1,e.popup.active=!1}).start()}else this.node.active=!1},updateScreenSize:function(t,e){this.content=this.node.getChildByName("content"),this.content.scale=e,this.content.y=-100*e},onCloseClicked:function(){!this.animating&&this.hide()}}),cc._RF.pop()},{}],HomeSubscene:[function(t,e){"use strict";cc._RF.push(e,"f6578s1vlpFybbpFit9Cmm+","HomeSubscene");var i=o(t("../../models/levelModel.js")),a=o(t("../../userState"));function o(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.subsceneController=cc.find("Canvas").getComponent("SubsceneController"),this.progressFrame=this.node.getChildByName("ProgressFrame").getComponent("ProgressFrame"),this.yardView=this.node.getChildByName("YardView").getComponent("YardView"),this.startButton=this.node.getChildByName("startButton").getComponent(cc.Button),this.levelLabel=this.startButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label),this.editModeFrame=this.node.getChildByName("EditMode"),this.editBottomframe=this.editModeFrame.getChildByName("bottomFrame"),this.editBottomframeNormal=this.editBottomframe.getChildByName("frame"),this.editBottomframeDrag=this.editBottomframe.getChildByName("dragNotification"),this.saveButton=this.editBottomframeNormal.getChildByName("saveButton").getComponent(cc.Button),this.bagButton=this.editBottomframeNormal.getChildByName("bagButton").getComponent(cc.Button),this.homeButton=this.editModeFrame.getChildByName("homeButton").getComponent(cc.Button),this.quickBagPopup=this.editModeFrame.getChildByName("BagPopup"),this.editBottomframeDrag.active=!1,this.quickBagPopup.active=!1,this.startButton.node.on("click",this.loadGame,this),this.saveButton.node.on("click",this.saveClicked,this),this.homeButton.node.on("click",this.homeClicked,this),this.bagButton.node.on("click",this.bagClicked,this),this.app.yardViewRefreshRequest=!0},onEnable:function(){var t=a.default.updateDailyState();(this.app.yardViewRefreshRequest||t)&&(this.yardView.loadItems(),this.progressFrame.updateValues(),this.app.yardViewRefreshRequest=!1)},start:function(){this.updateUI(),this.exitEditMode()},updateUI:function(){var t=a.default.getProgression();this.levelLabel.string="LEVEL "+i.default.getLevel(t).levelNumber},updateScreenSize:function(t,e){this.yardView.updateScreenSize(t,e),this.yardView.node.scale=this.node.height/this.yardView.node.height,this.progressFrame.originY=.5*this.node.height-26*e,this.progressFrame.node.y=this.progressFrame.originY,this.progressFrame.node.scale=e,this.progressFrame.updateScreenSize(t,e),this.startButton.originY=.5*-this.node.height+320*e,this.startButton.node.y=this.startButton.originY,this.startButton.node.scale=e,this.editModeFrame.width=this.node.width,this.editModeFrame.height=this.node.height,this.editBottomframe.scale=e},loadGame:function(){var t=cc.find("Canvas").getComponent("Home");this.app.changeScene(t,"Game")},saveClicked:function(){this.yardView.saveYardState(),this.exitEditMode(!0)},homeClicked:function(){this.yardView.loadItems(),this.exitEditMode(!0)},bagClicked:function(){this.quickBagPopup.active=!0},enterEditMode:function(t){var e=this;void 0===t&&(t=!1),this.subsceneController.topUI.hide(t),this.subsceneController.bottomUI.hide(t),this.yardView.enterEditMode(t),t?(cc.tween(this.progressFrame.node).to(.4,{y:this.progressFrame.originY+this.progressFrame.node.height,opacity:0},{easing:"quadOut"}).call(function(){e.progressFrame.node.active=!1}).start(),cc.tween(this.startButton.node).to(.4,{y:this.startButton.originY-this.startButton.node.height,opacity:0},{easing:"quadOut"}).call(function(){e.startButton.node.active=!1}).start(),this.editModeFrame.active=!0,this.editModeFrame.opacity=0,cc.tween(this.editModeFrame).to(.4,{opacity:255},{easing:"quadOut"}).start()):(this.progressFrame.node.active=!1,this.startButton.node.active=!1,this.editModeFrame.active=!0,this.editModeFrame.opacity=255)},exitEditMode:function(t){var e=this;void 0===t&&(t=!1),this.subsceneController.topUI.show(t),this.subsceneController.bottomUI.show(t),this.yardView.exitEditMode(t),t?(this.progressFrame.node.active=!0,cc.tween(this.progressFrame.node).delay(.1).to(.4,{y:this.progressFrame.originY,opacity:255},{easing:"quadOut"}).start(),this.startButton.node.active=!0,cc.tween(this.startButton.node).delay(.1).to(.4,{y:this.startButton.originY,opacity:255},{easing:"quadOut"}).start(),cc.tween(this.editModeFrame).to(.4,{opacity:0},{easing:"quadOut"}).call(function(){e.editModeFrame.active=!1}).start()):(this.progressFrame.node.opacity=255,this.progressFrame.node.y=this.progressFrame.originY,this.progressFrame.node.active=!0,this.startButton.node.opacity=255,this.startButton.node.y=this.startButton.originY,this.startButton.node.active=!0,this.editModeFrame.active=!1)},editModeDragNotification:function(t){void 0===t&&(t=!0),this.editBottomframeDrag.active=t,this.editBottomframeNormal.active=!t}}),cc._RF.pop()},{"../../models/levelModel.js":"levelModel","../../userState":"userState"}],Home:[function(t,e){"use strict";cc._RF.push(e,"9b2e01mOmRJNKD1ngSLfNrH","Home");var i,a=(i=t("../constants.js"))&&i.__esModule?i:{default:i},o=a.default.IPAD_RATIO,s=a.default.DEBUG;cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(this.app=cc.find("app").getComponent("app"),this.app.info("Home.js - onLoad"),this.app.IS_DEVELOPMENT&&(globalThis.home=this),this.subsceneController=this.node.getComponent("SubsceneController"),this.scaleContainer=this.node.getChildByName("scaleContainer"),this.settingsPopup=this.scaleContainer.getChildByName("SettingsPopup").getComponent("SettingsPopup"),this.qaPanel=this.scaleContainer.getChildByName("QAPanel").getComponent("QAPanel"),this.topUI=this.scaleContainer.getChildByName("TopUI").getComponent("TopUI"),this.giftPopup=this.scaleContainer.getChildByName("GiftPopup").getComponent("GiftPopup"),this.app.setSceneVisible(this),s.TEST_LEVEL&&!globalThis.notFirstTime){globalThis.notFirstTime=!0;var t=cc.find("Canvas").getComponent("Home");this.app.changeScene(t,"Game")}},onDestroy:function(){this.app.info("Home.js - onDestroy"),this.app.setSceneHidden(this)},updateScreenSize:function(t){t.ratio>o?(this.scaleContainer.height=1024/o,this.scaleContainer.scale=t.height/this.scaleContainer.height):(this.scaleContainer.scale=t.width/1024,this.scaleContainer.height=t.height/this.scaleContainer.scale);var e=1,i=this.scaleContainer.getChildByName("TopUI").getComponent("TopUI"),a=this.scaleContainer.getChildByName("BotUI").getComponent("BottomUI"),s=i.node.height+a.node.height,n=this.scaleContainer.height-s;n<1600&&(e=n/1600),i.node.y=.5*this.scaleContainer.height,i.updateScreenSize(t,e),a.node.y=.5*-this.scaleContainer.height,a.updateScreenSize(t,e),this.settingsPopup.updateScreenSize(t),this.qaPanel.updateScreenSize(t,e),this.subsceneController.updateScreenSize(t,e),this.giftPopup.updateScreenSize(t,e)},showQAPanel:function(){(a.default.FORCE_ENABLE_QA||this.app.IS_DEVELOPMENT)&&this.qaPanel.show(!0)},onEnable:function(){this.app.info("Home.js - onEnable")},start:function(){this.app.info("Home.js - start"),this.subsceneController.switchScene("home"),this.settingsPopup.hide(),this.qaPanel.hide(),this.giftPopup.hide(!1)},onDisable:function(){this.app.info("Home.js - onDisable")}}),cc._RF.pop()},{"../constants.js":"constants"}],ObjectiveController:[function(t,e){"use strict";cc._RF.push(e,"b2892ucVxpKq6Eqgn/OGHRl","ObjectiveController");var i=[0,0];cc.Class({extends:cc.Component,properties:{ObjectiveItem:{default:null,type:cc.Prefab}},loadObjectives:function(t,e){var a=this;this.onObjectiveCompleted=e,this.items={},this.typeMap=[],this.isCompletedCache=!1,this.node.width=Math.max(94*t.length+36*(t.length+3),100),this.node.height=166;var o=i[0]-65*(t.length-1),s=0;t.forEach(function(t){var e={};e.gameObject=cc.instantiate(a.ObjectiveItem).getComponent("ObjectiveItem"),e.type=t.type,e.amount=t.amount,a.items[t.type]=e,a.typeMap.push(t.type),e.gameObject.node.parent=a.node,e.gameObject.node.x=o+130*s,e.gameObject.node.y=i[1]+.5*a.node.height,e.gameObject.node.scale=94/e.gameObject.node.width,e.gameObject.loadObjective(t),s++})},reduceType:function(t){this.items[t]&&(this.items[t].amount=Math.max(0,this.items[t].amount-1),this.items[t].gameObject.numberLabel.string=this.items[t].amount,0===this.items[t].amount&&!this.isCompletedCache&&this.isCompleted()&&this.onObjectiveCompleted&&this.onObjectiveCompleted())},isCompleted:function(){var t=this;if(this.isCompletedCache)return this.isCompletedCache;var e=!0;return this.typeMap.forEach(function(i){if(t.items[i].amount>0)return e=!1,!1}),this.isCompletedCache=e,e}}),cc._RF.pop()},{}],ObjectiveItem:[function(t,e){"use strict";cc._RF.push(e,"1a5d93C5C1GibhrUOEScpzR","ObjectiveItem"),cc.Class({extends:cc.Component,properties:{basic1:{default:null,type:cc.SpriteFrame},basic2:{default:null,type:cc.SpriteFrame},basic3:{default:null,type:cc.SpriteFrame},basic4:{default:null,type:cc.SpriteFrame},basic5:{default:null,type:cc.SpriteFrame},crateBrown1:{default:null,type:cc.SpriteFrame},crateRed1:{default:null,type:cc.SpriteFrame},crateYellow1:{default:null,type:cc.SpriteFrame},crateGreen1:{default:null,type:cc.SpriteFrame},crateBlue1:{default:null,type:cc.SpriteFrame},cratePurple1:{default:null,type:cc.SpriteFrame},crateBrick1:{default:null,type:cc.SpriteFrame},shrub1:{default:null,type:cc.SpriteFrame},mouseDoor:{default:null,type:cc.SpriteFrame},movableDestructible1:{default:null,type:cc.SpriteFrame},bomb:{default:null,type:cc.SpriteFrame},discoball:{default:null,type:cc.SpriteFrame},missiles1:{default:null,type:cc.SpriteFrame},missiles2:{default:null,type:cc.SpriteFrame},sniper:{default:null,type:cc.SpriteFrame},milkBottle:{default:null,type:cc.SpriteFrame},jam1:{default:null,type:cc.SpriteFrame},jam2:{default:null,type:cc.SpriteFrame},jam3:{default:null,type:cc.SpriteFrame},jam4:{default:null,type:cc.SpriteFrame},jam5:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.numberLabel=this.node.getChildByName("number").getComponent(cc.Label)},loadObjective:function(t){this.data=t,this.node.getComponent(cc.Sprite).spriteFrame=this[t.type];var e=this[this.data.type].getOriginalSize(),i=this.node.width/e.width,a=this.node.height/e.height,o=Math.min(i,a);this.node.width=e.width*o,this.node.height=e.height*o,this.numberLabel.string=0|t.amount}}),cc._RF.pop()},{}],PausePopup:[function(t,e){"use strict";cc._RF.push(e,"eb7f8TDrj1N878CcvbpZ0ee","PausePopup");var i,a=(i=t("../userState"))&&i.__esModule?i:{default:i},o=function(){};cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.home=cc.find("Canvas").getComponent("Home"),this.popup=this.node.getChildByName("popup"),this.popup.getChildByName("QAButton").getComponent("cc.Button");var t=this.popup.getChildByName("closeButton").getComponent("cc.Button"),e=this.popup.getChildByName("content");this.musicSlider=e.getChildByName("musicSlider"),this.sfxSlider=e.getChildByName("sfxSlider");var i=e.getChildByName("backButton").getComponent("cc.Button"),a=e.getChildByName("restartButton").getComponent("cc.Button"),o=e.getChildByName("homeButton").getComponent("cc.Button");t.node.on("click",this.onCloseClicked,this),i.node.on("click",this.onCloseClicked,this),a.node.on("click",this.onRestartClicked,this),o.node.on("click",this.onHomeClicked,this),this.node.active=!1},init:function(t){this.onHomeCb=t.onHome||o,this.onRestartCb=t.onRestart||o},show:function(t){var e=this;void 0===t&&(t=!1),this.popup=this.node.getChildByName("popup");var i=a.default.getSettings();this.isShowing=!0,this.node.active=!0,this.musicSlider.getComponent("cc.Slider").progress=i.music,this.sfxSlider.getComponent("cc.Slider").progress=i.sfx,this.musicSlider.getComponent("Slider").onValueChanged(),this.sfxSlider.getComponent("Slider").onValueChanged(),t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:255},{easing:"quadOut"}).call(function(){e.animating=!1}).start()):this.node.opacity=255},hide:function(t){var e=this;void 0===t&&(t=!1),this.isShowing=!1,t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:0},{easing:"quadOut"}).call(function(){e.node.active=!1,e.animating=!1}).start()):(this.node.active=!1,this.node.opacity=0)},onCloseClicked:function(t){if(void 0===t&&(t=!1),!this.animating){this.hide(!0);var e=a.default.getSettings();e.music=this.musicSlider.getComponent("cc.Slider").progress,e.sfx=this.sfxSlider.getComponent("cc.Slider").progress,a.default.saveSettings()}},onRestartClicked:function(){this.animating||(this.hide(!0),this.onRestartCb())},onHomeClicked:function(){this.animating||(this.hide(!0),this.onHomeCb())},updateScreenSize:function(){}}),cc._RF.pop()},{"../userState":"userState"}],ProgressFrame:[function(t,e){"use strict";cc._RF.push(e,"e4cb9a+bv9N0KTzW4rfXiVG","ProgressFrame");var i=o(t("../models/supplyModel.js")),a=o(t("../staticData/yard"));function o(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},start:function(){},onEnable:function(){this.updateValues()},updateScreenSize:function(t,e){var i=this.node.getChildByName("backer"),a=this.node.getChildByName("progressBar");i.width=this.node.width/e,a.scale=1/e},updateValues:function(){this.label=this.node.getChildByName("label").getComponent(cc.Label),this.progressBar=this.node.getChildByName("progressBar").getComponent(cc.ProgressBar),this.progressLabel=this.progressBar.node.getChildByName("progressLabel").getComponent(cc.Label);var t=i.default.getStarData();t.nextItem?(this.label.string="Next: "+a.default.items[t.nextItem].name,this.progressLabel.string=t.star+"\\"+a.default.items[t.nextItem].star,this.progressBar.progress=t.star/a.default.items[t.nextItem].star):(this.label.string="All supplies unlocked!",this.progressLabel.string=""+t.star,this.progressBar.progress=1)}}),cc._RF.pop()},{"../models/supplyModel.js":"supplyModel","../staticData/yard":"yard"}],QAPanel:[function(t,e){"use strict";cc._RF.push(e,"5199dPtNs9JjrSwZMWdw3L8","QAPanel");var i=r(t("../staticData/boosters")),a=r(t("../models/catModels")),o=r(t("../constants")),s=r(t("../models/supplyModel")),n=r(t("../userState"));function r(t){return t&&t.__esModule?t:{default:t}}var l=o.default.MAX_BOOSTER_SELECTION;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.subsceneController=cc.find("Canvas").getComponent("SubsceneController"),this.home=cc.find("Canvas").getComponent("Home"),this.popup=this.node.getChildByName("popup");var t=this.popup.getChildByName("frame").getChildByName("innerFrame").getChildByName("scrollview").getComponent(cc.ScrollView).content,e=t.getChildByName("maxCatIncimaciesButton"),a=t.getChildByName("dayResetButton"),o=t.getChildByName("resetButton");for(var s in this.propertyLines={},this.propertyLines.level=this.setupPropertyLine(t.getChildByName("level"),"level"),this.propertyLines.coin=this.setupPropertyLine(t.getChildByName("coin"),"coin"),this.propertyLines.star=this.setupPropertyLine(t.getChildByName("star"),"star"),this.propertyLines.fish=this.setupPropertyLine(t.getChildByName("fish"),"fish"),this.propertyLines.x3Turn=this.setupToggleProperty(t.getChildByName("x3Turn"),"x3Turn"),i.default)this.propertyLines["booster_"+s]=this.setupPropertyLine(t.getChildByName("booster_"+s),"booster",s);e.on("click",this.onMaxCatIntimaciesClicked,this),a.on("click",this.onDayResetClicked,this),o.on("click",this.onResetClicked,this)},onEnable:function(){this.loadData()},setupPropertyLine:function(t,e,a){void 0===a&&(a="");var o=t.getChildByName("leftButton"),s=t.getChildByName("rightButton"),n=t.getChildByName("number"),r=t.getChildByName("toggle");"booster"===e&&(t.getChildByName("label").getComponent(cc.Label).string=i.default[a].name);var l={type:e,subType:a};return l.number=n.getComponent(cc.Label),r&&(l.toggle=r.getComponent(cc.Toggle),r.on("toggle",this.onPropertyToggle,this,l)),o&&o.on("click",this.onLeftPropertyClicked,this),s&&s.on("click",this.onRightPropertyClicked,this),l},setupToggleProperty:function(t,e){var i=t.getChildByName("toggle"),a={type:e};return a.toggle=i.getComponent(cc.Toggle),i.on("toggle",this.onPropertyToggle,this,a),a},loadData:function(){this.loadLevel(),this.loadCoin(),this.loadStar(),this.loadFish(),this.loadBoosterSelection(),this.loadBoosterAmount(),this.loadX3TurnSetting()},loadLevel:function(){this.propertyLines.level.number.string=n.default.getProgression();var t=this.subsceneController.subsceneMap.home.object;t&&t.updateUI()},loadCoin:function(){this.propertyLines.coin.number.string=n.default.getCoin(),this.home.topUI.updateLabels();var t=this.subsceneController.subsceneMap.shop.object;t&&t.updateCoin()},loadStar:function(){this.propertyLines.star.number.string=n.default.getStar(),s.default.updateStarData()},loadFish:function(){this.propertyLines.fish.number.string=n.default.getFish(),this.home.topUI.updateLabels()},loadX3TurnSetting:function(){this.propertyLines.x3Turn.toggle.isChecked=!!this.app.enableX3Turn},loadBoosterSelection:function(){var t=n.default.getBoosters();for(var e in i.default)this.propertyLines["booster_"+e].toggle.isChecked=t[e].selected},loadBoosterAmount:function(){var t=n.default.getBoosters();for(var e in i.default)this.propertyLines["booster_"+e].number.string=t[e].amount},show:function(t){var e=this;void 0===t&&(t=!1),this.node.active=!0,t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:255},{easing:"quadOut"}).call(function(){e.animating=!1}).start()):this.node.opacity=255},hide:function(t){var e=this;void 0===t&&(t=!1),t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:0},{easing:"quadOut"}).call(function(){e.node.active=!1,e.animating=!1}).start()):(this.node.active=!1,this.node.opacity=0)},onHideClicked:function(t){void 0===t&&(t=!1),this.animating||this.hide(!0)},onLeftPropertyClicked:function(t){var e=t.node.parent.name,i=this.propertyLines[e],a=i.type,o=i.subType;if("level"===a)n.default.stepProgression(-1),this.loadLevel();else if("coin"===a)n.default.updateCoin(-1e3),this.loadCoin();else if("star"===a);else if("fish"===a)n.default.updateFish(-1e3),this.loadFish();else if("booster"===a){var s=n.default.getBoosters();s[o].amount=Math.max(s[o].amount-1,0),n.default.saveBoostersState(),this.loadBoosterAmount();var r=this.subsceneController.subsceneMap.bag.object;r&&r.node.active?r.loadBoosterItems():this.app.boostersRefreshRequest=!0}},onRightPropertyClicked:function(t){var e=t.node.parent.name,i=this.propertyLines[e],a=i.type,o=i.subType;if("level"===a)n.default.stepProgression(1),this.loadLevel();else if("coin"===a)n.default.updateCoin(1e3),this.loadCoin();else if("star"===a)s.default.addStar(5),this.updateStar();else if("fish"===a)n.default.updateFish(1e3),this.loadFish();else if("booster"===a){var r=n.default.getBoosters();r[o].amount=Math.min(r[o].amount+1,10),r[o].unlocked=!0,n.default.saveBoostersState(),this.loadBoosterAmount();var l=this.subsceneController.subsceneMap.bag.object;l&&l.node.active?l.loadBoosterItems():this.app.boostersRefreshRequest=!0}},onPropertyToggle:function(t){var e=t.node.parent.name,i=this.propertyLines[e],a=i.type,o=i.subType,s=t.isChecked;if("booster"===a){var r=n.default.getBoosters();if(s&&(n.default.getSelectedBoosterCount()>=l||!r[o].unlocked))return void(t.isChecked=!1);r[o].selected=s,n.default.saveBoostersState(),this.loadBoosterSelection();var c=this.subsceneController.subsceneMap.bag.object;c&&c.node.active?c.loadBoosterItems():this.app.boostersRefreshRequest=!0}"x3Turn"===a&&(this.app.enableX3Turn=t.isChecked)},updateStar:function(){this.loadStar();var t=this.subsceneController.subsceneMap.home.object;t&&t.node.active?t.progressFrame.updateValues():this.app.yardViewRefreshRequest=!0;var e=this.subsceneController.subsceneMap.cat.object;e&&e.node.active?e.refreshCatItems():this.app.catRefreshRequest=!0;var i=this.subsceneController.subsceneMap.bag.object;i&&i.node.active?i.loadSupplyItems():this.app.suppliesRefreshRequest=!0},onMaxCatIntimaciesClicked:function(){a.default.getAllCats().forEach(function(t){t.data.unlocked=!0,t.data.fishFed=t.intimacyCap}),n.default.saveCats();var t=this.subsceneController.subsceneMap.home.object;t&&t.node.active?t.yardView.loadItems():this.app.yardViewRefreshRequest=!0;var e=this.subsceneController.subsceneMap.cat.object;e&&e.node.active?e.refreshCatItems():this.app.catRefreshRequest=!0},onDayResetClicked:function(){n.default.getStates().dailyUpdate=0,n.default.saveStates();var t=this.subsceneController.subsceneMap.home.object;t&&t.node.active?(n.default.updateDailyState(),t.yardView.loadItems(),t.progressFrame.updateValues()):this.app.yardViewRefreshRequest=!0},onResetClicked:function(){n.default.clear(),a.default.flush(),this.loadData();var t=this.subsceneController.subsceneMap.home.object;t&&t.node.active?(t.yardView.loadItems(),t.progressFrame.updateValues()):this.app.yardViewRefreshRequest=!0;var e=this.subsceneController.subsceneMap.cat.object;e&&e.node.active?e.refreshCatItems():this.app.catRefreshRequest=!0;var i=this.subsceneController.subsceneMap.bag.object;i&&i.node.active?(i.loadSupplyItems(),i.loadBoosterItems()):(this.app.boostersRefreshRequest=!0,this.app.suppliesRefreshRequest=!0)},updateScreenSize:function(t){this.popup=this.node.getChildByName("popup"),this.popup.height=Math.max(1100,t.height/t.ratio*.8)}}),cc._RF.pop()},{"../constants":"constants","../models/catModels":"catModels","../models/supplyModel":"supplyModel","../staticData/boosters":"boosters","../userState":"userState"}],QuickBagPopup:[function(t,e){"use strict";cc._RF.push(e,"0171cE4dslFZINcwcX/+l49","QuickBagPopup");var i=n(t("../constants")),a=n(t("../userState")),o=n(t("../staticData/yard")),s=n(t("../models/supplyModel"));function n(t){return t&&t.__esModule?t:{default:t}}var r=i.default.DEBUG,l=i.default.TIME_SPAN,c=r.FEEDING_ENVIRONMENT?20:l.ONE_SECOND;cc.Class({extends:cc.Component,properties:{Yard:{default:null,type:cc.Node},SupplyItem:{default:null,type:cc.Prefab},GlowItem:{default:null,type:cc.Prefab},material_glow:{default:null,type:cc.Material},SuppliesScrollView:{default:null,type:cc.Node},SuppliesScrollFrame:{default:null,type:cc.Node},GlowLayer:{default:null,type:cc.Node},BottomFrame:{default:null,type:cc.Node},BottomFramePlace:{default:null,type:cc.Node},BottomFrameEmpty:{default:null,type:cc.Node},PlaceButton:{default:null,type:cc.Button},CloseButton:{default:null,type:cc.Button}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.yardView=this.Yard.getComponent("YardView"),this.BottomFramePlace.active=!1,this.BottomFrameEmpty.active=!0,this.PlaceButton.node.on("click",this.onPlaceButtonClicked,this),this.CloseButton.node.on("click",this.onCloseButtonClicked,this),this.app.suppliesRefreshRequest=!0,this.GlowLayer.zIndex=100,this.supplyItems={},this.glowItems={},this.selectingSuppliesCount=0,this.glowTimer=0},onEnable:function(){this.loadSupplyItems(),this.clearGlowingSupplies()},update:function(t){this.selectingSuppliesCount&&(this.glowTimer+=.7*t,this.material_glow.setProperty("hl_timer",this.glowTimer))},loadSupplyItems:function(){for(var t in this.supplyItems)this.supplyItems[t].node.destroy();for(var e in this.glowItems)this.glowItems[e].node.destroy();this.supplyItems={},this.glowItems={};var i=s.default.getStarData().items,n=a.default.getYard(),r=0;for(var l in o.default.items){var c=cc.instantiate(this.SupplyItem).getComponent("BagSupplyItem");if(c.node.setParent(this.SuppliesScrollFrame),c.node.x=r%2?240:-240,c.node.y=-50-500*Math.floor(.5*r),i.includes(l)?c.loadData({id:l,isPlaced:!!n[l]},this.onSupplyItemClicked.bind(this)):c.loadData(null,null),this.supplyItems[l]=c,r++,c.data){var h=cc.instantiate(this.GlowItem).getComponent("YardGlow");h.node.setParent(this.GlowLayer),h.node.x=c.node.x+c.icon.node.x,h.node.y=c.node.y+c.icon.node.y+c.icon.node.height*c.icon.node.scale*.5,h.node.scale=c.node.scale*c.icon.node.scale,this.glowItems[l]=h,h.setGlowShape(c.data.id),h.node.active=!1}}this.SuppliesScrollFrame.height=500*Math.ceil(.5*r)+100+this.BottomFrame.height*this.BottomFrame.scale},onSupplyItemClicked:function(t){this.supplyItems[t].isPlaced||(this.glowItems[t].node.active?(this.glowItems[t].node.active=!1,this.selectingSuppliesCount--):(this.glowItems[t].node.active=!0,this.selectingSuppliesCount++,this.glowTimer=0),this.BottomFramePlace.active=this.selectingSuppliesCount>0,this.BottomFrameEmpty.active=0===this.selectingSuppliesCount)},onPlaceButtonClicked:function(){var t=a.default.getYard();for(var e in this.glowItems){var i=this.glowItems[e],s=this.supplyItems[e];i.node.active&&(t[e]||(t[e]={playingCat:null,nextUpdate:Date.now()+o.default.items[e].interval*c,x:-1,y:-1}),s.setPlaced(),i.node.active=!1)}a.default.saveYard(),this.yardView.loadItems(),this.clearGlowingSupplies()},onCloseButtonClicked:function(){this.node.active=!1,this.yardView.enterEditMode(!1)},clearGlowingSupplies:function(){for(var t in this.BottomFramePlace.active=!1,this.BottomFrameEmpty.active=!0,this.selectingSuppliesCount=0,this.glowTimer=0,this.glowItems)this.glowItems[t].node.active=!1}}),cc._RF.pop()},{"../constants":"constants","../models/supplyModel":"supplyModel","../staticData/yard":"yard","../userState":"userState"}],ResultController:[function(t,e){"use strict";cc._RF.push(e,"9cc922XOqxKxZQ+UNAiGlw2","ResultController");var i=s(t("../staticData/cats")),a=s(t("../staticData/yard")),o=s(t("../userState"));function s(t){return t&&t.__esModule?t:{default:t}}var n=function(){};cc.Class({extends:cc.Component,properties:{bed:{default:null,type:cc.SpriteFrame},cushion:{default:null,type:cc.SpriteFrame},featherToy:{default:null,type:cc.SpriteFrame},hamburgerCushion:{default:null,type:cc.SpriteFrame},paperBag1:{default:null,type:cc.SpriteFrame},paperBag2:{default:null,type:cc.SpriteFrame},plushDoll:{default:null,type:cc.SpriteFrame},pot:{default:null,type:cc.SpriteFrame},rubberBallRainbow:{default:null,type:cc.SpriteFrame},rubberBallRed:{default:null,type:cc.SpriteFrame},stretchingBoard:{default:null,type:cc.SpriteFrame},swimRing:{default:null,type:cc.SpriteFrame},swing:{default:null,type:cc.SpriteFrame},tent:{default:null,type:cc.SpriteFrame},tower:{default:null,type:cc.SpriteFrame},tunnel:{default:null,type:cc.SpriteFrame},cat_bella:{default:null,type:cc.SpriteFrame},cat_bob:{default:null,type:cc.SpriteFrame},cat_dora:{default:null,type:cc.SpriteFrame},cat_leo:{default:null,type:cc.SpriteFrame},cat_lily:{default:null,type:cc.SpriteFrame},cat_luna:{default:null,type:cc.SpriteFrame},cat_max:{default:null,type:cc.SpriteFrame},cat_milo:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.backer=this.node.getChildByName("resultBacker"),this.cat=this.node.getChildByName("cat").getComponent(sp.Skeleton),this.topUI=this.node.getChildByName("TopUI").getComponent("TopUI"),this.progressFrame=this.node.getChildByName("ProgressFrame").getComponent("ProgressFrame"),this.loseHeartFrame=this.node.getChildByName("LoseHeartFrame"),this.popup=this.node.getChildByName("resultPopup"),this.homeButton=this.popup.getChildByName("homeButton").getComponent(cc.Button),this.winFrame=this.popup.getChildByName("winFrame"),this.rewardCoinLabel=this.winFrame.getChildByName("coinLabel").getComponent(cc.Label),this.rewardStarLabel=this.winFrame.getChildByName("starLabel").getComponent(cc.Label),this.nextButton=this.winFrame.getChildByName("nextButton").getComponent(cc.Button),this.loseFrame=this.popup.getChildByName("loseFrame"),this.confetti=this.node.getChildByName("confetti"),this.congrat=this.node.getChildByName("congratulations"),this.unlockItemFrame=this.node.getChildByName("unlockItemFrame");var t=this.unlockItemFrame.getChildByName("bottomContent").getChildByName("putInBagButton");this.originButtonY=t.y,this.nextAction=n,this.animating=!1,this.isShowing=!0,this.isThumpUpAnimating=!1,this.thumpUpTimer=0,this.uiScale=1,this.unlockItemFrame.active=!1,this.hide()},update:function(t){var e=this.unlockItemFrame.getChildByName("lightstar");if(e.active){var i=e.getChildByName("lightstar1"),a=e.getChildByName("lightstar2");i.angle+=20*t,a.angle+=20*t,i.scale=.9+.05*Math.sin(this.app.now/1e3*4),a.scale=.9+.1*Math.cos((this.app.now+1e3)/1e3*5)}this.isThumpUpAnimating&&(this.thumpUpTimer-=t,this.cat.getCurrent(0).isComplete()&&(this.thumpUpTimer<0?this.setCatThumpUpAnimation():this.cat.addAnimation(0,"Cat_idle",!1)))},init:function(t){this.onHomeCb=t.onHome||n,this.onTryAgainCb=t.onTryAgain||n,this.onNextLevelCb=t.onNextLevel||n},hide:function(t){var e=this;return void 0===t&&(t=!1),this.isShowing=!1,new Promise(function(i){if(!t)return e.node.active=!1,void i();e.animating=!0;var a=e.congrat.active?.2:0,o=a+.5-.2,s=a+.3*1.5;e.congrat.active&&cc.tween(e.congrat).to(.4,{scale:0,opacity:255},{easing:"sineOut"}).call(function(){e.congrat.active=!1}).start(),e.loseHeartFrame.active&&cc.tween(e.loseHeartFrame).delay(o).to(.5,{scale:0,opacity:255},{easing:"sineOut"}).call(function(){e.loseHeartFrame.active=!1}).start(),e.progressFrame.node.active&&cc.tween(e.progressFrame.node).delay(o).to(.25,{y:e.node.height/2+e.progressFrame.node.height*e.uiScale},{easing:"sineIn"}).call(function(){e.progressFrame.node.active=!1}).start(),e.topUI.node.active&&cc.tween(e.topUI.node).delay(s).to(.25,{y:e.node.height/2+e.topUI.node.height*e.uiScale},{easing:"sineIn"}).call(function(){e.topUI.node.active=!1}).start(),cc.tween(e.popup).delay(a).to(.5,{scale:0,opacity:255},{easing:"sineOut"}).call(function(){e.popup.active=!1}).start(),cc.tween(e.cat.node).delay(o).to(.5,{y:-e.node.height/2-e.cat.node.height,opacity:0},{easing:"sineOut"}).call(function(){e.cat.node.active=!1}).start(),setTimeout(function(){e.animating=!1,e.node.active=!1,i()},1e3*(o+.5+.1))})},show:function(t,e,i){var a,o,s=this;return void 0===i&&(i=!1),this.levelData=e,this.performance=t,this.nextUnlockItems=[].concat((null==(a=this.performance.unlockedData)?void 0:a.items)||[]),this.nextUnlockCats=[].concat((null==(o=this.performance.unlockedData)?void 0:o.cats)||[]),this.cat.setSkin(t.isWon?"whietcat":"orangecat"),this.cat.setAnimation(0,t.isWon?"Cat_idle":"Cat_cry",!0),this.cat.getCurrent(0).timeScale=0,new Promise(function(e){if(s.isShowing=!0,s.node.active=!0,s.loseHeartFrame.active=!t.isWon,s.topUI.node.active=t.isWon,s.progressFrame.node.active=t.isWon,s.winFrame.active=t.isWon,s.loseFrame.active=!t.isWon,s.congrat.active=t.isWon,s.confetti.active=t.isWon,s.rewardCoinLabel.string="+"+t.coin,s.rewardStarLabel.string="+"+t.star,i){s.animating=!0;var a=t.isWon?.2:0,o=a+.2,n=t.isWon?.3:.4;s.backer.active=!0,s.backer.opacity=0,cc.tween(s.backer).to(.3,{opacity:200},{easing:"quadOut"}).start(),t.isWon?(s.congrat.active=!0,s.congrat.scale=0,cc.tween(s.congrat).delay(a).to(.4,{scale:s.uiScale},{easing:"backOut"}).start(),s.topUI.node.active=!0,s.topUI.node.y=s.node.height/2+s.topUI.node.height*s.uiScale,cc.tween(s.topUI.node).delay(.9+a).to(.5,{y:s.node.height/2},{easing:"backOut"}).start(),s.progressFrame.node.active=!0,s.progressFrame.node.y=s.node.height/2+s.progressFrame.node.height*s.uiScale,cc.tween(s.progressFrame.node).delay(1.3+a).to(.5,{y:.5*s.node.height-26*s.uiScale},{easing:"backOut"}).start()):(s.loseHeartFrame.active=!0,s.loseHeartFrame.scale=0,s.loseHeartFrame.opacity=0,cc.tween(s.loseHeartFrame).delay(.9+a).to(.5,{scale:s.uiScale,opacity:255},{easing:"backOut"}).start()),s.popup.active=!0,s.popup.scale=0,s.popup.opacity=0,cc.tween(s.popup).delay(o).to(n,{scale:s.uiScale,opacity:255},{easing:"quadOut"}).start(),s.cat.node.active=!0,s.cat.node.y=-s.node.height/2-s.cat.node.height*s.uiScale,s.cat.node.opacity=-255,cc.tween(s.cat.node).delay(.8+a).to(.6,{y:-s.node.height/2+10,opacity:255},{easing:"cubicOut"}).call(function(){s.cat.getCurrent(0).timeScale=1,t.isWon&&(s.isThumpUpAnimating=!0,s.setCatThumpUpAnimation())}).start(),t.isWon&&s.confetti.children.forEach(function(t){var e=.8+.4*Math.random(),i=400+100*Math.random(),o=.5*t.x+.5*t.x*Math.random(),s=90*Math.random();t.x-=o,t.y-=i,t.opacity=0,cc.tween(t).delay(.1+a).by(.8*e,{x:o},{easing:"cubicOut"}).start(),cc.tween(t).delay(.1+a).to(.1*e,{opacity:255}).delay(.6*e).to(.3*e,{opacity:0}).start(),cc.tween(t).delay(.1+a).by(e,{angle:s},{easing:"linear"}).start(),cc.tween(t).delay(.1+a).by(.4*e,{y:i},{easing:"cubicOut"}).delay(.05).by(.8*e,{y:-i},{easing:"quadIn"}).start()}),setTimeout(function(){s.animating=!1},1e3*(n+o))}else e()})},hideUnlockItem:function(){var t=this;this.animating=!0;var e=this.unlockItemFrame.getChildByName("congratulations"),i=this.unlockItemFrame.getChildByName("halowhite"),a=this.unlockItemFrame.getChildByName("haloblue"),o=this.unlockItemFrame.getChildByName("lightstar"),s=this.unlockItemFrame.getChildByName("star1").getComponent(cc.ParticleSystem),n=this.unlockItemFrame.getChildByName("star2").getComponent(cc.ParticleSystem),r=this.unlockItemFrame.getChildByName("unlockedItem").getComponent(cc.Sprite),l=this.unlockItemFrame.getChildByName("bottomContent"),c=l.getChildByName("label").getComponent(cc.Label),h=l.getChildByName("itemName").getComponent(cc.Label),d=l.getChildByName("placeItNowButton").getComponent(cc.Button),u=l.getChildByName("putInBagButton").getComponent(cc.Button),p=l.getChildByName("okButton").getComponent(cc.Button);return s.stopSystem(),n.stopSystem(),cc.tween(e).delay(.1).to(.3,{scale:0},{easing:"quadOut"}).start(),cc.tween(i).delay(.1+.2).to(.3,{scale:0},{easing:"quadOut"}).start(),cc.tween(a).delay(.1+.2).to(.3,{scale:0},{easing:"quadOut"}).start(),cc.tween(o).delay(.1+.2).to(.3,{scale:0},{easing:"quadOut"}).start(),cc.tween(r.node).delay(.1+.2).to(.3,{scale:0},{easing:"quadOut"}).start(),cc.tween(c.node).delay(.4).to(.3,{scale:0},{easing:"quadOut"}).start(),cc.tween(h.node).delay(.4).to(.3,{scale:0},{easing:"quadOut"}).start(),cc.tween(d.node).delay(.1).to(.3,{opacity:0,y:this.originButtonY-200},{easing:"quadOut"}).start(),cc.tween(p.node).delay(.1).to(.3,{opacity:0,y:this.originButtonY-200},{easing:"quadOut"}).start(),cc.tween(u.node).delay(.1).to(.3,{opacity:0,y:this.originButtonY-200},{easing:"quadOut"}).start(),new Promise(function(e){setTimeout(function(){t.animating=!1,t.node.active=!1,e()},1e3*(.7+.1))})},nextSceneStage:function(){var t=null,e=null;if(this.nextUnlockItems.length)t=this.nextUnlockItems.splice(0,1),e="item";else{if(!this.nextUnlockCats.length)return void this.nextAction();t=this.nextUnlockCats.splice(0,1),e="cat"}this.showUnlockItem(t,e)},showUnlockItem:function(t,e){var o=this;this.animating=!0,this.node.active=!0,this.unlockItemFrame.active=!0,this.unlockedItem=t;var s=this.unlockItemFrame.getChildByName("congratulations"),n=this.unlockItemFrame.getChildByName("halowhite"),r=this.unlockItemFrame.getChildByName("haloblue"),l=this.unlockItemFrame.getChildByName("lightstar"),c=this.unlockItemFrame.getChildByName("star1").getComponent(cc.ParticleSystem),h=this.unlockItemFrame.getChildByName("star2").getComponent(cc.ParticleSystem),d=this.unlockItemFrame.getChildByName("unlockedItem").getComponent(cc.Sprite),u=this.unlockItemFrame.getChildByName("bottomContent"),p=u.getChildByName("label").getComponent(cc.Label),m=u.getChildByName("itemName").getComponent(cc.Label),f=u.getChildByName("placeItNowButton").getComponent(cc.Button),g=u.getChildByName("putInBagButton").getComponent(cc.Button),y=u.getChildByName("okButton").getComponent(cc.Button),b=Math.max(d.node.width/540,d.node.height/540);d.node.width/=b,d.node.height/=b,p.string="Unlock new "+e,d.spriteFrame="item"===e?this[t]:this["cat_"+t],y.node.active="cat"===e,f.node.active="item"===e,g.node.active="item"===e,m.string="item"===e?a.default.items[t].name:i.default[t].name,s.scale=0,cc.tween(s).delay(.2).to(.4,{scale:this.uiScale},{easing:"backOut"}).start(),n.scale=0,r.scale=0,l.scale=0,d.node.scale=0,p.node.scale=0,m.node.scale=0,f.node.opacity=0,g.node.opacity=0,y.node.opacity=0,f.node.y=this.originButtonY-200,g.node.y=this.originButtonY-200,y.node.y=this.originButtonY-200,c.node.active=!1,h.node.active=!1,cc.tween(n).delay(.4).to(.4,{scale:1},{easing:"sineOut"}).start(),cc.tween(r).delay(.4).to(.4,{scale:1},{easing:"sineOut"}).start(),cc.tween(l).delay(.5).to(.4,{scale:1},{easing:"sineOut"}).start(),cc.tween(d.node).delay(.5).to(.4,{scale:1},{easing:"backOut"}).start(),cc.tween(p.node).delay(.4+.2).to(.4,{scale:1},{easing:"sineOut"}).start(),cc.tween(m.node).delay(.7).to(.5,{scale:1},{easing:"backOut"}).start(),setTimeout(function(){c.node.active=!0,h.node.active=!0,c.resetSystem(),h.resetSystem()},1e3*(.4+.2)),cc.tween(f.node).delay(.4+.8).to(.4,{opacity:255,y:this.originButtonY},{easing:"quadOut"}).start(),cc.tween(y.node).delay(.4+.8).to(.4,{opacity:255,y:this.originButtonY},{easing:"quadOut"}).start(),cc.tween(g.node).delay(.4+.8).to(.4,{opacity:255,y:this.originButtonY},{easing:"quadOut"}).start(),setTimeout(function(){o.animating=!1},1600)},updateScreenSize:function(t){var e=this.node.parent;this.node.width=e.width,this.node.height=e.height,this.backer.height=this.node.height;var i=this.progressFrame.node.height+26;i+=100+this.congrat.height,i+=this.popup.height,i+=10+this.cat.node.height,this.uiScale=1,e.height<i&&(this.uiScale=e.height/i),this.cat.node.y=-this.node.height/2,this.cat.node.scale=this.uiScale,this.topUI.node.y=.5*this.node.height,this.topUI.updateScreenSize(t,this.uiScale),this.progressFrame.node.y=.5*this.node.height-26*this.uiScale,this.progressFrame.node.scale=this.uiScale,this.progressFrame.updateScreenSize(t,this.uiScale),this.loseHeartFrame.scale=this.uiScale,this.loseHeartFrame.y=this.topUI.node.y-.5*this.topUI.node.height*this.uiScale;var a=this.progressFrame.node.y-(this.progressFrame.node.height+50+.5*this.congrat.height)*this.uiScale;this.popup.scale=this.uiScale;var o=a-(.5*this.congrat.height+50)*this.uiScale,s=this.cat.node.y+this.cat.node.height*this.uiScale;this.popup.y=.5*(o+s);var n=this.popup.y+(.5*this.popup.height+50+.5*this.congrat.height)*this.uiScale;this.congrat.y=.5*(a+n),this.congrat.scale=this.uiScale,this.confetti.scale=this.uiScale,this.confetti.y=this.congrat.y,this.unlockItemFrame.y=.05*this.node.height;var r=this.unlockItemFrame.getChildByName("congratulations");r.y=.35*this.node.height,r.scale=this.uiScale;var l=this.unlockItemFrame.getChildByName("bottomContent"),c=406+l.height,h=.5*this.node.height;l.y=-Math.min(h,.5*(h-c)+c)},setNextButtonState:function(t){this.nextButton.node.active=t,this.homeButton.node.x=t?this.homeButton.node.x:0},setCatThumpUpAnimation:function(){this.cat.addAnimation(0,"Cat_thumb",!1),this.thumpUpTimer=this.cat.getCurrent(0).animation.duration+1+Math.random()},onTryAgainClicked:function(){var t=this;this.animating||this.hide(!0).then(function(){return t.onTryAgainCb()})},onNextClicked:function(){var t=this;this.animating||(this.nextAction=this.onNextLevelCb,this.hide(!0).then(function(){return t.nextSceneStage()}))},onHomeClicked:function(){var t=this;this.animating||(this.nextAction=this.onHomeCb,this.hide(!0).then(function(){return t.nextSceneStage()}))},onPlaceItNowClicked:function(){var t=this;if(!this.animating&&this.unlockedItem){var e=o.default.getYard();e[this.unlockedItem]||(e[this.unlockedItem]={x:-1,y:-1}),o.default.saveYard(e),this.hideUnlockItem().then(function(){return t.nextSceneStage()})}},onPutInBagClicked:function(){var t=this;this.animating||this.hideUnlockItem().then(function(){return t.nextSceneStage()})},onCatOkClicked:function(){var t=this;this.animating||this.hideUnlockItem().then(function(){return t.nextSceneStage()})}}),cc._RF.pop()},{"../staticData/cats":"cats","../staticData/yard":"yard","../userState":"userState"}],Rnd:[function(t,e,i){"use strict";cc._RF.push(e,"e2920RCqHhF3ZR1qFh+5ZZN","Rnd"),i.__esModule=!0,i.default=void 0;var a=function(){function t(t){this.m_z=null,this.m_w=null,this.mask=4294967295,this.setSeed(t)}var e=t.prototype;return e.setSeed=function(t){this.seed=isNaN(t)?Date.now():Number(t),this.m_w=987654321+this.seed,this.m_z=123456789-this.seed},e.getSeed=function(){return this.seed},e.random=function(){this.m_z=36969*(65535&this.m_z)+(this.m_z>>16)&this.mask,this.m_w=18e3*(65535&this.m_w)+(this.m_w>>16)&this.mask;var t=(this.m_z<<16)+this.m_w&this.mask;return.5+(t/=4294967296)},t}();i.default=a,e.exports=i.default,cc._RF.pop()},{}],Scheduler:[function(t,e,i){"use strict";cc._RF.push(e,"2ba77waTxxJnYTaiZIXxf5P","Scheduler"),i.__esModule=!0,i.default=void 0;var a=function(){function t(t){this.app=t,this._nextUid=0,this.active=!1,this.registered={},this.registeredCount=0}var e=t.prototype;return e.setTimeout=function(t,e){var i=++this._nextUid;return this.registered[i]={timerId:i,method:t,updateAfter:this.app.now+e},this.registeredCount++,this.active=!0,i},e.clearTimeout=function(t){this.registered[t]&&(delete this.registered[t],this.registeredCount--,0===this.registeredCount&&(this.active=!1))},e.onUpdate=function(){for(var t in this.registered){var e=this.registered[t];e.updateAfter<=this.app.now&&(delete this.registered[t],this.registeredCount--,e.method())}0===this.registeredCount&&(this.active=!1)},t}();i.default=a,e.exports=i.default,cc._RF.pop()},{}],SettingsPopup:[function(t,e){"use strict";cc._RF.push(e,"dae3dWTqFpHd66ekGC8OnEu","SettingsPopup");var i=o(t("../userState")),a=o(t("../constants.js"));function o(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.home=cc.find("Canvas").getComponent("Home"),this.popup=this.node.getChildByName("popup");var t=this.popup.getChildByName("QAButton").getComponent("cc.Button"),e=this.popup.getChildByName("closeButton").getComponent("cc.Button"),i=this.popup.getChildByName("content");this.musicSlider=i.getChildByName("musicSlider"),this.sfxSlider=i.getChildByName("sfxSlider"),t.node.active=a.default.FORCE_ENABLE_QA||this.app.IS_DEVELOPMENT,t.node.on("click",this.onQAButtonClicked,this),e.node.on("click",this.onCloseClicked,this)},show:function(t){var e=this;void 0===t&&(t=!1),this.popup=this.node.getChildByName("popup");var a=i.default.getSettings();this.node.active=!0,this.musicSlider.getComponent("cc.Slider").progress=a.music,this.sfxSlider.getComponent("cc.Slider").progress=a.sfx,this.musicSlider.getComponent("Slider").onValueChanged(),this.sfxSlider.getComponent("Slider").onValueChanged(),t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:255},{easing:"quadOut"}).call(function(){e.animating=!1}).start()):this.node.opacity=255},hide:function(t){var e=this;void 0===t&&(t=!1),t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:0},{easing:"quadOut"}).call(function(){e.node.active=!1,e.animating=!1}).start()):(this.node.active=!1,this.node.opacity=0)},onQAButtonClicked:function(){var t=this;(a.default.FORCE_ENABLE_QA||this.app.IS_DEVELOPMENT)&&(this.hide(!0),setTimeout(function(){t.home.showQAPanel()},.3))},onCloseClicked:function(t){if(void 0===t&&(t=!1),!this.animating){this.hide(!0);var e=i.default.getSettings();e.music=this.musicSlider.getComponent("cc.Slider").progress,e.sfx=this.sfxSlider.getComponent("cc.Slider").progress,i.default.saveSettings()}},updateScreenSize:function(){}}),cc._RF.pop()},{"../constants.js":"constants","../userState":"userState"}],ShopCommands:[function(t,e,i){"use strict";cc._RF.push(e,"0c787lQU21J+pMIP85tVoEo","ShopCommands"),i.__esModule=!0,i.default=void 0;var a=s(t("../userState")),o=s(t("../staticData/shop"));function s(t){return t&&t.__esModule?t:{default:t}}var n={buy:function(t,e){var i=a.default.getCoin(),s=a.default.getBoosters(),n=o.default[t].price*e;if(n>i)return!1;switch(t){case"fish":a.default.updateFish(1*e);break;case"fish5":a.default.updateFish(5*e);break;case"fish10":a.default.updateFish(10*e);break;case"hammer":case"airplane":case"rocket":case"paintbrush":case"fairystick":case"wheel":s[t].amount+=e,s[t].unlocked=!0,a.default.saveBoostersState()}return a.default.updateCoin(-n),!0}};i.default=n,e.exports=i.default,cc._RF.pop()},{"../staticData/shop":"shop","../userState":"userState"}],ShopConfirmPopup:[function(t,e){"use strict";cc._RF.push(e,"8cc95TY3NdPCac3A0X4+Iip","ShopConfirmPopup");var i,a=(i=t("../commands/ShopCommands"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{fish:{default:null,type:cc.SpriteFrame},fish5:{default:null,type:cc.SpriteFrame},fish10:{default:null,type:cc.SpriteFrame},airplane:{default:null,type:cc.SpriteFrame},fairystick:{default:null,type:cc.SpriteFrame},hammer:{default:null,type:cc.SpriteFrame},paintbrush:{default:null,type:cc.SpriteFrame},rocket:{default:null,type:cc.SpriteFrame},wheel:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.popup=this.node.getChildByName("popup"),this.notEnoughCoinFrame=this.node.getChildByName("notEnoughCoin");var t=this.popup.getChildByName("buyButton"),e=this.popup.getChildByName("closeButton"),i=this.popup.getChildByName("frame");this.nameLabel=i.getChildByName("nameLabel").getComponent(cc.Label),this.icon=i.getChildByName("icon").getComponent(cc.Sprite),this.numberLabel=i.getChildByName("numberLabel").getComponent(cc.Label),this.descriptionLabel=i.getChildByName("descriptionLabel").getComponent(cc.Label),this.buttonLabel=t.getChildByName("Label").getComponent(cc.Label);var a=i.getChildByName("plusButton"),o=i.getChildByName("minusButton");this.selectingNumber=1,a.on("click",this.onPlusClicked,this),o.on("click",this.onMinusClicked,this),t.on("click",this.onBuyClicked,this),e.on("click",this.onCloseClicked,this)},start:function(){},loadData:function(t){this.data=t,this.selectingNumber=1,this.nameLabel.string=t.name,this.icon.spriteFrame=this[t.id],this.descriptionLabel.string=t.description||"",this.buttonLabel.string=this.data.price*this.selectingNumber,this.numberLabel.string=this.selectingNumber},show:function(t,e){var i=this;void 0===e&&(e=!1),this.node.active=!0,this.loadData(t),e?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:255},{easing:"quadOut"}).call(function(){i.animating=!1}).start()):this.node.opacity=255},hide:function(t){var e=this;void 0===t&&(t=!1),t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:0},{easing:"quadOut"}).call(function(){e.node.active=!1,e.animating=!1}).start()):(this.node.active=!1,this.node.opacity=0)},showNotEnoughCoin:function(){var t=this;this.notEnoughCoinFrame.active=!0,this.animating=!0;var e=this.notEnoughCoinFrame.getChildByName("backer"),i=this.notEnoughCoinFrame.getChildByName("cat"),a=this.notEnoughCoinFrame.getChildByName("bubble");e.opacity=0,cc.tween(e).to(.5,{opacity:190},{easing:"quadOut"}).start(),i.x=.5*-this.node.width-i.width,cc.tween(i).delay(.1).to(.3,{x:.5*-this.node.width},{easing:"quadOut"}).start(),a.scale=0,cc.tween(a).delay(.3).to(.4,{scale:1},{easing:"backOut"}).start(),setTimeout(function(){t.hideNotEnoughCoin()},1200)},hideNotEnoughCoin:function(){var t=this,e=this.notEnoughCoinFrame.getChildByName("backer"),i=this.notEnoughCoinFrame.getChildByName("cat"),a=this.notEnoughCoinFrame.getChildByName("bubble");cc.tween(a).to(.35,{scale:0},{easing:"quadOut"}).start(),cc.tween(i).delay(.2).to(.3,{x:.5*-this.node.width-i.width},{easing:"quadOut"}).start(),cc.tween(e).delay(.2).to(.5,{opacity:0},{easing:"quadOut"}).call(function(){t.animating=!1,t.notEnoughCoinFrame.active=!1}).start()},updateScreenSize:function(){},onPlusClicked:function(){this.selectingNumber=Math.min(this.selectingNumber+1,99),this.numberLabel.string=this.selectingNumber,this.buttonLabel.string=this.data.price*this.selectingNumber},onMinusClicked:function(){this.selectingNumber=Math.max(this.selectingNumber-1,1),this.numberLabel.string=this.selectingNumber,this.buttonLabel.string=this.data.price*this.selectingNumber},onBuyClicked:function(){a.default.buy(this.data.id,this.selectingNumber)?(this.app.boostersRefreshRequest=!0,this.parentScene.updateCoin(),this.hide(!0)):this.showNotEnoughCoin()},onCloseClicked:function(){this.hide(!0)}}),cc._RF.pop()},{"../commands/ShopCommands":"ShopCommands"}],ShopItem:[function(t,e){"use strict";cc._RF.push(e,"cf04aLV959CJ7oCDIIqWbgp","ShopItem"),cc.Class({extends:cc.Component,properties:{fish:{default:null,type:cc.SpriteFrame},fish5:{default:null,type:cc.SpriteFrame},fish10:{default:null,type:cc.SpriteFrame},airplane:{default:null,type:cc.SpriteFrame},fairystick:{default:null,type:cc.SpriteFrame},hammer:{default:null,type:cc.SpriteFrame},paintbrush:{default:null,type:cc.SpriteFrame},rocket:{default:null,type:cc.SpriteFrame},wheel:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.quantityLabel=this.node.getChildByName("quantity").getComponent(cc.Label),this.button=this.node.getChildByName("button"),this.buttonLabel=this.button.getChildByName("Background").getChildByName("Label").getComponent(cc.Label),this.button.on("click",this.onClicked,this)},loadData:function(t,e){this.data=t,this.onItemClicked=e,this.icon.spriteFrame=this[t.id],this.quantityLabel.string="x"+(t.quantity||0),this.buttonLabel.string=t.price},updateNumber:function(t){this.quantityLabel.string="x"+(0|t)},onClicked:function(){this.onItemClicked&&this.onItemClicked(this.data.id)}}),cc._RF.pop()},{}],ShopSubscene:[function(t,e){"use strict";cc._RF.push(e,"bc475m2pV1IVIwyYY66R/3j","ShopSubscene");var i=o(t("../../staticData/shop")),a=o(t("../../userState"));function o(t){return t&&t.__esModule?t:{default:t}}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}cc.Class({extends:cc.Component,properties:{ShopItem:{default:null,type:cc.Prefab}},onLoad:function(){this.shopConfirmPopup=this.node.getChildByName("ShopConfirmPopup").getComponent("ShopConfirmPopup"),this.shopConfirmPopup.parentScene=this,this.scrollView=this.node.getChildByName("scrollview").getComponent(cc.ScrollView),this.scrollFrame=this.scrollView.content;var t=this.node.getChildByName("topUI").getChildByName("coinFrame");this.coinLabel=t.getChildByName("coinLabel").getComponent(cc.Label),this.shopItems={};var e=0;for(var a in i.default){var o=cc.instantiate(this.ShopItem).getComponent("ShopItem");o.node.setParent(this.scrollFrame),o.node.x=e%2?200:-200,o.node.y=-100-500*Math.floor(.5*e),o.loadData(s({id:a},i.default[a]),this.onItemClicked.bind(this)),this.shopItems[a]=o,e++}this.scrollFrame.height=500*Math.ceil(.5*e)+200},onEnable:function(){this.shopConfirmPopup.hide(),this.updateCoin()},onOpened:function(t){if(t&&t.id&&this.shopItems[t.id]){var e=250-this.shopItems[t.id].node.y,i=this.scrollFrame.height-.5*this.scrollView.node.height;this.scrollFrame.y=Math.min(Math.max(0,e),i)}},updateCoin:function(){this.coinLabel.string=a.default.getCoin()},onItemClicked:function(t){this.shopConfirmPopup.show(s({id:t},i.default[t]),!0)},updateScreenSize:function(t,e){this.node.getChildByName("wallpaper").height=this.node.height;var i=this.node.getChildByName("topUI");i.y=.5*this.node.height,i.scale=e,i.getChildByName("shelter").width=this.node.width/e;var a=i.getChildByName("backer");a.width=this.node.width/e,i.getChildByName("coinFrame").x=.33*-a.width,this.shopConfirmPopup.updateScreenSize(t,e)}}),cc._RF.pop()},{"../../staticData/shop":"shop","../../userState":"userState"}],Slider:[function(t,e){"use strict";cc._RF.push(e,"8ac23lCB2xKhZ1lBn7KpAT4","Slider"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.slider=this.node.getComponent(cc.Slider),this.mask=this.node.getChildByName("Mask"),this.slider.node.on("slide",this.onValueChanged,this)},onValueChanged:function(){this.mask.width=this.node.width*this.slider.progress}}),cc._RF.pop()},{}],SpriteCollection:[function(t,e){"use strict";cc._RF.push(e,"ddfeeBQralOx5laFJGHa65b","SpriteCollection"),cc.Class({extends:cc.Component,properties:{missileRight:{default:null,type:cc.SpriteFrame},missileLeft:{default:null,type:cc.SpriteFrame},missileTop:{default:null,type:cc.SpriteFrame},missileBottom:{default:null,type:cc.SpriteFrame},border1:{default:null,type:cc.SpriteFrame},border2:{default:null,type:cc.SpriteFrame},border3:{default:null,type:cc.SpriteFrame},material_highlight:{default:null,type:cc.Material},material_spineHighlight:{default:null,type:cc.Material},rocket:{default:null,type:cc.SpriteFrame},airplane:{default:null,type:cc.SpriteFrame},missileAnim:{default:null,type:cc.Prefab},flameAnim:{default:null,type:cc.Prefab},rayOfLight:{default:null,type:cc.Prefab}}}),cc._RF.pop()},{}],StartSelectionItem:[function(t,e){"use strict";cc._RF.push(e,"7f6e4MZLENPTZWesyV9JJ20","StartSelectionItem"),cc.Class({extends:cc.Component,properties:{booster_airplane:{default:null,type:cc.SpriteFrame},booster_fairystick:{default:null,type:cc.SpriteFrame},booster_hammer:{default:null,type:cc.SpriteFrame},booster_paintbrush:{default:null,type:cc.SpriteFrame},booster_rocket:{default:null,type:cc.SpriteFrame},booster_wheel:{default:null,type:cc.SpriteFrame},cat_bella:{default:null,type:cc.SpriteFrame},cat_bob:{default:null,type:cc.SpriteFrame},cat_dora:{default:null,type:cc.SpriteFrame},cat_leo:{default:null,type:cc.SpriteFrame},cat_lily:{default:null,type:cc.SpriteFrame},cat_luna:{default:null,type:cc.SpriteFrame},cat_max:{default:null,type:cc.SpriteFrame},cat_milo:{default:null,type:cc.SpriteFrame},lockIcon:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.node.on("click",this.onClicked,this)},start:function(){},loadItem:function(t,e){this.type=t,this.data=e,this.selectingBorder=this.node.getChildByName("selectingBorder"),this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.checkSlot=this.node.getChildByName("checkSlot"),this.checkMark=this.node.getChildByName("checkMark"),this.quantity=this.node.getChildByName("quantity").getComponent(cc.Label),e.unlocked?(this.setSelected(e.selected),this.updateIcon(this[t+"_"+e.id],"booster"===t?1.1:1),"booster"===t?(this.quantity.node.active=!0,this.quantity.string=e.amount):"cat"===t&&(this.quantity.node.active=!1)):this.setLocked()},setLocked:function(){this.updateIcon(this.lockIcon),this.selectingBorder.active=!1,this.checkSlot.active=!1,this.checkMark.active=!1,this.quantity.node.active=!1},setSelected:function(t){this.selectingBorder.active=t,this.checkMark.active=t,this.data.selected=t},updateIcon:function(t,e){void 0===e&&(e=1),this.icon.spriteFrame=t;var i=Math.max(this.icon.node.width,this.icon.node.height,112);this.icon.node.scale=112/i*e},onClicked:function(){this.onItemClicked&&this.data.unlocked&&this.onItemClicked(this)}}),cc._RF.pop()},{}],StartSelectionPopup:[function(t,e){"use strict";cc._RF.push(e,"6ade0ZPCXRDEb+onzIEqhOC","StartSelectionPopup");var i=r(t("../constants")),a=r(t("../userState")),o=r(t("../models/catModels")),s=r(t("../staticData/cats")),n=r(t("../staticData/boosters"));function r(t){return t&&t.__esModule?t:{default:t}}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var c=i.default.MAX_BOOSTER_SELECTION;cc.Class({extends:cc.Component,properties:{ObjectiveItem:{default:null,type:cc.Prefab},StartSelectionItem:{default:null,type:cc.Prefab}},onLoad:function(){this.backer=this.node.getChildByName("backer"),this.popup=this.node.getChildByName("popup");var t=this.popup.getChildByName("frame");this.levelLabel=t.getChildByName("label").getComponent(cc.Label),this.innerFrame=t.getChildByName("innerFrame");var e=this.innerFrame.getChildByName("goalBacker");this.objectivesFrame=e.getChildByName("ObjectivesFrame"),this.catView=this.innerFrame.getChildByName("CatView").getComponent("CatView"),this.changeCatButton=this.innerFrame.getChildByName("changeCatButton"),this.changeBoosterButton=this.innerFrame.getChildByName("changeBoosterButton"),this.startButton=this.popup.getChildByName("startButton"),this.catSelectionPopup=this.node.getChildByName("catSelection"),this.catSelectionFrame=this.catSelectionPopup.getChildByName("frame"),this.catDescriptionFrame=this.catSelectionPopup.getChildByName("descriptionFrame");var i=this.catDescriptionFrame.getChildByName("contentFrame");this.catDescriptionLabel=i.getChildByName("label").getComponent(cc.Label),this.catSelectionConfirmButton=this.catSelectionPopup.getChildByName("confirmButton"),this.boosterSelectionPopup=this.node.getChildByName("boosterSelection"),this.boosterSelectionFrame=this.boosterSelectionPopup.getChildByName("frame"),this.boosterSelectionConfirmButton=this.boosterSelectionPopup.getChildByName("confirmButton"),this.backer.zIndex=-1,this.catSelectionPopup.zIndex=2,this.boosterSelectionPopup.zIndex=2,this.catSelectionPopup.active=!1,this.boosterSelectionPopup.active=!1,this.node.active=!1,this.changeCatButton.on("click",this.onCatChangeClicked,this),this.changeBoosterButton.on("click",this.onBoosterChangeClicked,this),this.catSelectionConfirmButton.on("click",this.onCatConfirmClicked,this),this.boosterSelectionConfirmButton.on("click",this.onBoosterConfirmClicked,this),this.startButton.on("click",this.hide,this)},init:function(t){this.onClosed=t},show:function(t){var e=this;this.node.active=!0,this.animating=!0,this.backer.active=!0,this.backer.opacity=0,cc.tween(this.backer).to(.3,{opacity:200},{easing:"quadOut"}).start(),this.popup.active=!0,this.popup.scale=0,this.popup.opacity=0,cc.tween(this.popup).delay(.2).to(.3,{scale:1,opacity:255},{easing:"backOut"}).call(function(){e.animating=!1}).start(),this.levelLabel.string="LEVEL "+t.levelNumber;var i=65*-(t.objectives.length-1),o=0;t.objectives.forEach(function(t){var a=cc.instantiate(e.ObjectiveItem).getComponent("ObjectiveItem");a.node.parent=e.objectivesFrame,a.node.x=i+130*o,a.node.y=0,a.node.scale=94/a.node.width,a.loadObjective(t),o++}),this.reloadBoosters(),this.reloadCat();var r=a.default.getCats();this.catSelectionList={};var c=Math.ceil(Object.keys(s.default).length/4);this.catSelectionFrame.height=128*c+48*(c+1),this.catDescriptionFrame.y=this.catSelectionFrame.height+this.catSelectionFrame.y+20;var h=this.catSelectionFrame.height-48-64;for(var d in o=0,s.default){var u=cc.instantiate(this.StartSelectionItem).getComponent("StartSelectionItem");u.node.parent=this.catSelectionFrame,u.node.x=o%4*176-264,u.node.y=h-176*Math.floor(o/4),u.loadItem("cat",l({id:d},s.default[d],r[d],{selected:a.default.getSelectedCat()===d})),u.onItemClicked=this.onSelectionItemClicked.bind(this),this.catSelectionList[d]=u,o++}var p=a.default.getBoosters();this.boosterSelectionList={},this.boosterSelectionQueue=[];var m=Math.ceil(Object.keys(n.default).length/4);this.boosterSelectionFrame.height=128*m+48*(m+1);var f=this.boosterSelectionFrame.height-48-64;for(var g in o=0,n.default){var y=cc.instantiate(this.StartSelectionItem).getComponent("StartSelectionItem");y.node.parent=this.boosterSelectionFrame,y.node.x=o%4*176-264,y.node.y=f-176*Math.floor(o/4),y.loadItem("booster",l({id:g},n.default[g],p[g])),y.onItemClicked=this.onSelectionItemClicked.bind(this),this.boosterSelectionList[g]=y,p[g].selected&&this.boosterSelectionQueue.push(g),o++}},hide:function(){var t=this;this.animating||(this.animating=!0,cc.tween(this.backer).to(.4,{opacity:0},{easing:"sineOut"}).start(),cc.tween(this.popup).to(.4,{scale:0,opacity:0},{easing:"quadOut"}).call(function(){t.animating=!1,t.node.active=!1,t.onClosed&&t.onClosed()}).start())},reloadBoosters:function(){var t=a.default.getBoosters(),e=0;for(var i in t){if(e===c)break;var o=t[i];o.selected&&(e++,this.innerFrame.getChildByName("BoosterItem_"+e).getComponent("BoosterItem").loadBooster({type:i,number:o.amount}))}for(;e<c;)e++,this.innerFrame.getChildByName("BoosterItem_"+e).getComponent("BoosterItem").setLocked()},reloadCat:function(){this.catView.loadCat(a.default.getSelectedCat())},onCatChangeClicked:function(){var t=this;if(!this.animating){if(this.animating=!0,this.catSelectionPopup.active=!0,this.catSelectionConfirmButton.active=!0,this.backer.zIndex=1,a.default.getSelectedCat()){var e=o.default.getCat(a.default.getSelectedCat());this.catDescriptionLabel.string=e.getCurrentSkillDesc(),this.catDescriptionFrame.active=!0,this.catDescriptionFrame.opacity=0,cc.tween(this.catDescriptionFrame).to(.3,{opacity:255},{easing:"quadOut"}).start()}else this.catDescriptionFrame.active=!1;this.catSelectionFrame.opacity=0,this.catSelectionFrame.scale=0,cc.tween(this.catSelectionFrame).to(.3,{scale:1,opacity:255},{easing:"backOut"}).call(function(){t.animating=!1}).start()}},onBoosterChangeClicked:function(){var t=this;this.animating||(this.animating=!0,this.boosterSelectionPopup.active=!0,this.boosterSelectionConfirmButton.active=!0,this.backer.zIndex=1,this.boosterSelectionFrame.opacity=0,this.boosterSelectionFrame.scale=0,cc.tween(this.boosterSelectionFrame).to(.3,{scale:1,opacity:255},{easing:"backOut"}).call(function(){t.animating=!1}).start())},onCatConfirmClicked:function(){var t=this;this.animating||(this.animating=!0,this.backer.zIndex=-1,this.catDescriptionFrame.active=!1,this.catSelectionConfirmButton.active=!1,this.reloadCat(),cc.tween(this.catSelectionFrame).to(.4,{scale:0,opacity:0},{easing:"cubicOut"}).call(function(){t.catSelectionPopup.active=!1,t.animating=!1}).start())},onBoosterConfirmClicked:function(){var t=this;this.animating||(this.animating=!0,this.backer.zIndex=-1,this.boosterSelectionConfirmButton.active=!1,this.reloadBoosters(),cc.tween(this.boosterSelectionFrame).to(.4,{scale:0,opacity:0},{easing:"cubicOut"}).call(function(){t.boosterSelectionPopup.active=!1,t.animating=!1}).start())},onSelectionItemClicked:function(t){if(!this.animating)if("cat"===t.type){if(t.setSelected(!t.data.selected),t.data.selected){var e,i=o.default.getCat(a.default.getSelectedCat());null==(e=this.catSelectionList[null==i?void 0:i.id])||e.setSelected(!1);var s=o.default.getCat(t.data.id);this.catDescriptionFrame.active=!0,this.catDescriptionLabel.string=s.getCurrentSkillDesc()}else this.catDescriptionFrame.active=!1;a.default.updateSelectedCat(t.data.selected?t.data.id:null)}else if("booster"===t.type){var n=a.default.getBoosters();if(t.data.selected)t.setSelected(!1),n[t.data.id].selected=!1,this.boosterSelectionQueue.splice(this.boosterSelectionQueue.indexOf(t.data.id),1);else{if(this.boosterSelectionQueue.length>=c){var r=this.boosterSelectionQueue[0];this.boosterSelectionQueue.splice(0,1),this.boosterSelectionList[r].setSelected(!1),n[r].selected=!1}t.setSelected(!0),n[t.data.id].selected=!0,this.boosterSelectionQueue.push(t.data.id)}a.default.saveBoostersState()}}}),cc._RF.pop()},{"../constants":"constants","../models/catModels":"catModels","../staticData/boosters":"boosters","../staticData/cats":"cats","../userState":"userState"}],SubsceneController:[function(t,e){"use strict";cc._RF.push(e,"aa749nrC1VOrIpHfytA/mmC","SubsceneController"),cc.Class({extends:cc.Component,properties:{HomePrefab:{default:null,type:cc.Prefab},ShopPrefab:{default:null,type:cc.Prefab},CatPrefab:{default:null,type:cc.Prefab},BagPrefab:{default:null,type:cc.Prefab}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.scaleContainer=this.node.getChildByName("scaleContainer"),this.subsceneContainer=this.scaleContainer.getChildByName("Subscenes"),this.topUI=this.scaleContainer.getChildByName("TopUI").getComponent("TopUI"),this.bottomUI=this.scaleContainer.getChildByName("BotUI").getComponent("BottomUI"),this.settingsPopup=this.scaleContainer.getChildByName("SettingsPopup").getComponent("SettingsPopup"),this.subsceneMap={home:{prefab:this.HomePrefab,component:"HomeSubscene",object:null,showTopUI:!0},shop:{prefab:this.ShopPrefab,component:"ShopSubscene",object:null,showTopUI:!1},cat:{prefab:this.CatPrefab,component:"CatSubscene",object:null,showTopUI:!1},bag:{prefab:this.BagPrefab,component:"BagSubscene",object:null,showTopUI:!1}},this.bottomUI.node.on("buttonClicked",this.onButtonUIClicked.bind(this)),this.animating=!1},switchScene:function(t,e,i){var a=this;void 0===e&&(e=null),void 0===i&&(i=!1);var o=this.subsceneMap[t];if(o&&o.prefab&&o.component){if(this.currentId){var s=this.subsceneMap[this.currentId].object;s.node.zIndex=0,i?(this.animating=!0,cc.tween(s.node).to(.3,{opacity:0},{easing:"quadOut"}).call(function(){s.node.active=!1,a.animating=!1}).start()):s.node.active=!1,"shop"===this.currentId||"bag"===this.currentId?this.topUI.show(i):"shop"!==t&&"bag"!==t||this.topUI.hide(i),this.subsceneMap[t].showTopUI!==this.subsceneMap[this.currentId]&&(this.subsceneMap[t].showTopUI&&this.topUI.show(i),this.subsceneMap[t].showTopUI||this.topUI.hide(i))}if(!o.object){var n=cc.instantiate(o.prefab).getComponent(o.component);n.node.setParent(this.subsceneContainer),o.object=n}o.object.node.active=!0,o.object.node.zIndex=-1,o.object.node.opacity=255,o.object.onOpened&&o.object.onOpened(e),this.currentId=t,this.bottomUI.selectButton(t,i),this.updateScreenSize(this.app.FRAME,this.cachedUIScale)}},updateScreenSize:function(t,e){if(this.cachedUIScale=e||1,this.currentId&&this.subsceneMap[this.currentId].object){var i=this.subsceneMap[this.currentId].object;i.node.width=this.scaleContainer.width,i.node.height=this.scaleContainer.height,i.updateScreenSize(t,this.cachedUIScale)}},onButtonUIClicked:function(t){this.animating||("settings"!==t?this.switchScene(t,null,!0):this.settingsPopup.show(!0))}}),cc._RF.pop()},{}],TopUI:[function(t,e){"use strict";cc._RF.push(e,"8435f+OPBNDjqSGt1PzG2MK","TopUI");var i,a=(i=t("../userState"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this.node.getChildByName("content");this.coinLabel=t.getChildByName("coinLabel").getComponent(cc.Label),this.fishLabel=t.getChildByName("fishLabel").getComponent(cc.Label),this.heartLabel=t.getChildByName("heartLabel").getComponent(cc.Label)},onEnable:function(){this.updateLabels()},show:function(t){var e=this;void 0===t&&(t=!1),this.node.active=!0,t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:255},{easing:"quadOut"}).call(function(){e.animating=!1}).start()):this.node.opacity=255},hide:function(t){var e=this;void 0===t&&(t=!1),t?(this.animating=!0,cc.tween(this.node).to(.3,{opacity:0},{easing:"quadOut"}).call(function(){e.node.active=!1,e.animating=!1}).start()):(this.node.active=!1,this.node.opacity=0)},updateLabels:function(){this.fishLabel.string=a.default.getFish(),this.coinLabel.string=a.default.getCoin(),this.heartLabel.string=0},updateScreenSize:function(t,e){this.node.scale=e,this.node.getChildByName("backer").width=this.node.width/e,this.node.getChildByName("content").scale=.6+1/e*.4}}),cc._RF.pop()},{"../userState":"userState"}],TutorialController:[function(t,e){"use strict";cc._RF.push(e,"d55e8YdBvpJAJFvXizqFVvb","TutorialController");var i=o(t("../constants.js")),a=o(t("../staticData/tutorials.js"));function o(t){return t&&t.__esModule?t:{default:t}}var s=i.default.GAMEPLAY.TILE_SIZE;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.boardAnchor=this.node.getChildByName("BoardAnchor"),this.paw=this.boardAnchor.getChildByName("Paw"),this.labelFrame=this.boardAnchor.getChildByName("LabelFrame"),this.label=this.labelFrame.getChildByName("label").getComponent(cc.Label),this.container=this.boardAnchor.getChildByName("Container"),this.masks=[];for(var t=0;t<4;t++)this.masks[t]=t?this.masks[t-1].getChildByName("Mask"):this.boardAnchor.getChildByName("Mask");this.cover=this.masks[3].getChildByName("Cover"),this.objectiveFrame=this.node.getChildByName("ObjectiveFrame"),this.objectiveCover=this.objectiveFrame.getChildByName("Cover"),this.objectiveArrow=this.objectiveFrame.getChildByName("Arrow"),this.objectiveLabelFrame=this.objectiveFrame.getChildByName("LabelFrame"),this.boosterFrame=this.node.getChildByName("BoosterFrame"),this.boosterCover=this.boosterFrame.getChildByName("Cover"),this.boosterContainer=this.boosterFrame.getChildByName("Container"),this.boosterArrow=this.boosterFrame.getChildByName("Arrow"),this.boosterLabelFrame=this.boosterFrame.getChildByName("LabelFrame"),this.boosterLabel=this.boosterLabelFrame.getChildByName("label").getComponent(cc.Label),this.objectiveArrow.zIndex=1,this.objectiveLabelFrame.zIndex=2,this.boosterArrow.zIndex=1,this.boosterLabelFrame.zIndex=2,this.objectiveCover.on("click",this.onObjectiveCoverTapped,this),this.cover.on("click",this.onTapCoverTapped,this),this.pawOriginScale=1,this.objectiveArrowTween=null,this.boosterArrowTween=null,this.pawTween=null},init:function(t,e){this.boardAnchor.active=!1,this.objectiveFrame.active=!1,this.boosterFrame.active=!1,this.gameBoard=e.gameBoard,this.topUI=e.topUI,this.topObjectiveIcon=this.topUI.getChildByName("objectiveIcon"),this.topObjectiveFrame=this.topUI.getChildByName("objectiveFrame"),this.topObjectiveIconOriginY=this.topObjectiveIcon.y,this.topObjectiveFrameOriginY=this.topObjectiveFrame.y,this.bottomUI=e.bottomUI,this.boosterController=e.boosterController,a.default[t]?(this.level=t,this.config=a.default[t],this.hasTutorial=!0,this.isTutorialShowing=!1,this.step=0,this.gameBoard.lockUserInteraction("tutorial")):this.hasTutorial=!1},triggerTutorial:function(){var t=this;if(this.hasTutorial&&!this.isTutorialShowing){this.isTutorialShowing=!0,this.gameBoard.unlockUserInteraction("tutorial");var e=this.config[this.step];if(this.animating=!0,setTimeout(function(){t.animating=!1},600),"objective"===(null==e?void 0:e.type))this.objectiveFrame.active=!0,this.topObjectiveIcon.parent=this.objectiveFrame,this.topObjectiveFrame.parent=this.objectiveFrame,this.topObjectiveIcon.y+=this.topUI.y,this.topObjectiveFrame.y+=this.topUI.y,this.objectiveArrow.y=this.topObjectiveFrame.y-.5*this.topObjectiveIcon.height-120,this.objectiveLabelFrame.y=this.objectiveArrow.y-this.objectiveArrow.height-100,this.objectiveFrame.opacity=0,cc.tween(this.objectiveFrame).to(.3,{opacity:255},{easing:"quadOut"}).call(function(){var e=t.objectiveArrow.y;t.objectiveArrowTween=cc.tween(t.objectiveArrow).repeatForever(cc.tween().to(.4,{y:e+80,scaleY:.8,scaleX:1.2},{easing:"quadOut"}).to(.3,{y:e,scaleY:1,scaleX:1},{easing:"linear"})).start()}).start();else if("booster"===(null==e?void 0:e.type)){this.boosterFrame.active=!0;var i=this.boosterController.boosterItems[null==e?void 0:e.booster].node;i.parent=this.boosterContainer,this.boosterContainer.scale=this.boosterController.node.scale,this.boosterContainer.x=this.bottomUI.x,this.boosterContainer.y=this.bottomUI.y,this.boosterArrow.angle=180,this.boosterArrow.x=i.x*this.boosterContainer.scale,this.boosterArrow.y=this.boosterContainer.y+i.height*this.boosterContainer.scale+50,this.boosterLabelFrame.active=!1,e.label&&(this.boosterLabelFrame.active=!0,this.boosterLabel.string=e.label.text||"",this.boosterLabelFrame.x=0,this.boosterLabelFrame.y=this.boosterArrow.y+.5*this.boosterArrow.height+.5*this.boosterLabelFrame.height+100,this.boosterLabelFrame.width=780);var a=this.boosterArrow.y;this.boosterArrowTween=cc.tween(this.boosterArrow).repeatForever(cc.tween().to(.4,{y:a+80,scaleY:.8,scaleX:1.2},{easing:"quadOut"}).to(.3,{y:a,scaleY:1,scaleX:1},{easing:"linear"})).start()}else if("paintbrush"===(null==e?void 0:e.type)){this.boosterFrame.active=!0,this.boosterController.contentFrame.parent=this.boosterContainer,this.boosterContainer.scale=this.boosterController.node.scale,this.boosterContainer.x=this.bottomUI.x,this.boosterContainer.y=this.bottomUI.y,this.boosterArrow.angle=0;var o=this.boosterController.paintbrushFrame.getChildByName(e.color);this.boosterArrow.x=this.boosterController.contentFrame.x*this.boosterContainer.scale+this.boosterContainer.x+o.x,this.boosterArrow.y=this.boosterController.contentFrame.y*this.boosterContainer.scale+this.boosterContainer.y+o.y-.5*o.height-100,this.boosterLabelFrame.active=!1,e.label&&(this.boosterLabelFrame.active=!0,this.boosterLabel.string=e.label.text||"",this.boosterLabelFrame.x=0,this.boosterLabelFrame.y=this.boosterArrow.y-.5*this.boosterArrow.height-.5*this.boosterLabelFrame.height-50,this.boosterLabelFrame.width=780);var n=this.boosterArrow.y;this.boosterArrowTween=cc.tween(this.boosterArrow).repeatForever(cc.tween().to(.4,{y:n+80,scaleY:.8,scaleX:1.2},{easing:"quadOut"}).to(.3,{y:n,scaleY:1,scaleX:1},{easing:"linear"})).start()}else{this.boardAnchor.active=!0;for(var r=0;r<4;r++)this.masks[r].width=0,this.masks[r].height=0;if(null!=e&&e.masks)for(var l=0;l<4;l++)if(e.masks[l]&&(this.masks[l].width=s*(e.masks[l].width||1),this.masks[l].height=s*(e.masks[l].height||1),this.masks[l].x=this.gameBoard.boardXToViewX(e.masks[l].x||0)-.5*s+.5*this.masks[l].width,this.masks[l].y=this.gameBoard.boardYToViewY(e.masks[l].y||0)+.5*s-.5*this.masks[l].height),l)for(var c=l-1;c>=0;)this.masks[l].x-=this.masks[c].x,this.masks[l].y-=this.masks[c].y,c--;this.labelFrame.active=!1,e.label&&(this.labelFrame.active=!0,this.label.string=e.label.text||"",this.labelFrame.x=e.label.x||0,this.labelFrame.y=e.label.y||0,this.labelFrame.width=e.label.width||780),"tapBooster"===(null==e?void 0:e.type)&&(this.boosterController.contentFrame.parent=this.container,this.container.scale=1/this.boardAnchor.scale*this.boosterController.node.scale,this.container.x=1*(this.bottomUI.x-this.boardAnchor.x)/this.boardAnchor.scale,this.container.y=1*(this.bottomUI.y-this.boardAnchor.y)/this.boardAnchor.scale),this.boardAnchor.opacity="tapBooster"===e.type?255:0,this.paw.active=!1,cc.tween(this.boardAnchor).to(.3,{opacity:255},{easing:"quadOut"}).call(function(){if(e.move)if("swap"===e.type){t.paw.active=!0;var i=[t.gameBoard.boardXToViewX(e.move.from.x),t.gameBoard.boardYToViewY(e.move.from.y)],a=[t.gameBoard.boardXToViewX(e.move.to.x),t.gameBoard.boardYToViewY(e.move.to.y)];t.paw.x=i[0]+300,t.paw.y=i[1]-500,t.paw.opacity=0,t.pawTween=cc.tween(t.paw).to(.5,{x:i[0],y:i[1],opacity:255},{easing:"sineOut"}).delay(.1).repeatForever(cc.tween().to(.3,{x:a[0],y:a[1]},{easing:"quadOut"}).delay(.2).to(.4,{x:i[0],y:i[1]},{easing:"linear"}).delay(.2)).start()}else if("tap"===e.type||"tapBooster"===e.type){t.paw.active=!0;var o=[t.gameBoard.boardXToViewX(e.move.from.x),t.gameBoard.boardYToViewY(e.move.from.y)];t.paw.x=o[0]+300,t.paw.y=o[1]-500,t.paw.opacity=0,t.pawTween=cc.tween(t.paw).to(.5,{x:o[0],y:o[1],opacity:255},{easing:"sineOut"}).delay(.1).repeatForever(cc.tween().to(.2,{x:o[0]-30,y:o[1]+30,scale:1.1*t.pawOriginScale},{easing:"quadOut"}).delay(.1).to(.3,{x:o[0],y:o[1],scale:t.pawOriginScale},{easing:"linear"}).delay(.1)).start()}}).start()}this.updateScreenSize()}},validateMove:function(t,e,i){if(!this.hasTutorial)return!0;if(!this.isTutorialShowing)return!0;if(this.animating)return!1;if(!e)return!1;var a=this.config[this.step];if(a.type!==t)return!1;if("tap"===t){if(e.boardX===a.move.from.x&&e.boardY===a.move.from.y)return!0}else if("swap"===t){if(!i)return!1;if(e.boardX===a.move.from.x&&e.boardY===a.move.from.y&&i.boardX===a.move.to.x&&i.boardY===a.move.to.y)return!0;if(e.boardX===a.move.to.x&&e.boardY===a.move.to.y&&i.boardX===a.move.from.x&&i.boardY===a.move.from.y)return!0}return!1},validateBooster:function(t){if(!this.hasTutorial)return!0;if(!this.isTutorialShowing)return!0;if(this.animating)return!1;if(this.boosterController.isActive)return!1;var e=this.config[this.step];return"booster"===e.type&&e.booster===t},validatePaintbrush:function(t){if(!this.hasTutorial)return!0;if(!this.isTutorialShowing)return!0;if(this.animating)return!1;var e=this.config[this.step];return"paintbrush"===e.type&&e.color===t},stepUp:function(t){var e,i,a,o=this;if(!this.hasTutorial)return!0;if(!this.isTutorialShowing)return!0;if(this.animating)return!1;var s=this.config[this.step];if(s.type!==t)return!1;"objective"===s.type&&(this.topObjectiveIcon.parent=this.topUI,this.topObjectiveFrame.parent=this.topUI,this.topObjectiveIcon.y=this.topObjectiveIconOriginY,this.topObjectiveFrame.y=this.topObjectiveFrameOriginY),"booster"===s.type&&(this.boosterController.boosterItems[null==s?void 0:s.booster].node.parent=this.boosterController.container),"tapBooster"===s.type&&(this.boosterController.contentFrame.parent=this.boosterController.overlay),"paintbrush"===s.type&&(this.boosterController.contentFrame.parent=this.boosterController.overlay),null==(e=this.objectiveArrowTween)||e.stop(),null==(i=this.boosterArrowTween)||i.stop(),null==(a=this.pawTween)||a.stop();var n=this.boardAnchor;switch(s.type){case"objective":n=this.objectiveFrame;break;case"booster":case"paintbrush":n=this.boosterFrame}return this.animating=!0,cc.tween(n).to(.3,{opacity:0},{easing:"quadOut"}).call(function(){n.active=!1,n.opacity=255,o.animating=!1}).start(),this.step++,this.isTutorialShowing=!1,this.gameBoard.lockUserInteraction("tutorial"),this.step>=this.config.length&&(this.hasTutorial=!1,this.gameBoard.unlockUserInteraction("tutorial")),!0},onObjectiveCoverTapped:function(){this.stepUp("objective")},onTapCoverTapped:function(){this.stepUp("tapAny")},updateScreenSize:function(){this.boardAnchor.scale=this.gameBoard.view.scale,this.boardAnchor.width=this.gameBoard.view.width,this.boardAnchor.height=this.gameBoard.view.height,this.boardAnchor.y=this.gameBoard.view.y,this.labelFrame.scale=1/this.boardAnchor.scale,this.paw.scale=1/this.boardAnchor.scale,this.pawOriginScale=this.paw.scale,this.cover.width=this.node.width,this.cover.height=this.node.height,this.cover.x=0,this.cover.y=-this.boardAnchor.y/this.boardAnchor.scale,this.cover.scale=1/this.boardAnchor.scale,this.boosterCover.width=this.node.width,this.boosterCover.height=this.node.height,this.boosterCover.x=0,this.boosterCover.y=-this.boardAnchor.y/this.boardAnchor.scale,this.boosterCover.scale=1/this.boardAnchor.scale,this.objectiveCover.width=this.node.width,this.objectiveCover.height=this.node.height;for(var t=0;t<4;t++)this.cover.x-=this.masks[t].x,this.cover.y-=this.masks[t].y}}),cc._RF.pop()},{"../constants.js":"constants","../staticData/tutorials.js":"tutorials"}],YardGlow:[function(t,e){"use strict";cc._RF.push(e,"0eb78QXX3hOEI8byyLLimCa","YardGlow"),cc.Class({extends:cc.Component,properties:{bed:{default:null,type:cc.SpriteFrame},cushion:{default:null,type:cc.SpriteFrame},featherToy:{default:null,type:cc.SpriteFrame},hamburgerCushion:{default:null,type:cc.SpriteFrame},paperBag1:{default:null,type:cc.SpriteFrame},paperBag2:{default:null,type:cc.SpriteFrame},plushDoll:{default:null,type:cc.SpriteFrame},pot:{default:null,type:cc.SpriteFrame},rubberBallRainbow:{default:null,type:cc.SpriteFrame},rubberBallRed:{default:null,type:cc.SpriteFrame},stretchingBoard:{default:null,type:cc.SpriteFrame},swimRing:{default:null,type:cc.SpriteFrame},swing:{default:null,type:cc.SpriteFrame},tent:{default:null,type:cc.SpriteFrame},tower:{default:null,type:cc.SpriteFrame},tunnel:{default:null,type:cc.SpriteFrame}},setGlowShape:function(t){this.image=this.node.getChildByName("image").getComponent(cc.Sprite),this.image.spriteFrame=this[t]}}),cc._RF.pop()},{}],YardItemView:[function(t,e){"use strict";cc._RF.push(e,"006c6dDDvZMsp4jBcjEmlxD","YardItemView"),cc.Class({extends:cc.Component,properties:{bed:{default:null,type:cc.SpriteFrame},cushion:{default:null,type:cc.SpriteFrame},featherToy:{default:null,type:cc.SpriteFrame},hamburgerCushion:{default:null,type:cc.SpriteFrame},paperBag1:{default:null,type:cc.SpriteFrame},paperBag2:{default:null,type:cc.SpriteFrame},plushDoll:{default:null,type:cc.SpriteFrame},pot:{default:null,type:cc.SpriteFrame},rubberBallRainbow:{default:null,type:cc.SpriteFrame},rubberBallRed:{default:null,type:cc.SpriteFrame},stretchingBoard:{default:null,type:cc.SpriteFrame},swimRing:{default:null,type:cc.SpriteFrame},swing:{default:null,type:cc.SpriteFrame},tent:{default:null,type:cc.SpriteFrame},tower:{default:null,type:cc.SpriteFrame},tunnel:{default:null,type:cc.SpriteFrame}},loadItem:function(t){this.node.getComponent(cc.Sprite).spriteFrame=this[t]}}),cc._RF.pop()},{}],YardItem:[function(t,e){"use strict";cc._RF.push(e,"4d5b0vf9HpKDoge/BCGmito","YardItem");var i=l(t("../commands/CatCommands")),a=l(t("../models/catModels")),o=l(t("../staticData/cats")),s=l(t("../constants")),n=l(t("../helpers")),r=l(t("../userState"));function l(t){return t&&t.__esModule?t:{default:t}}function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var h=s.default.DEBUG,d=s.default.TIME_SPAN,u=h.FEEDING_ENVIRONMENT?20:d.ONE_SECOND;cc.Class({extends:cc.Component,properties:{bed:{default:null,type:cc.SpriteFrame},cushion:{default:null,type:cc.SpriteFrame},featherToy:{default:null,type:cc.SpriteFrame},hamburgerCushion:{default:null,type:cc.SpriteFrame},paperBag1:{default:null,type:cc.SpriteFrame},paperBag2:{default:null,type:cc.SpriteFrame},plushDoll:{default:null,type:cc.SpriteFrame},pot:{default:null,type:cc.SpriteFrame},rubberBallRainbow:{default:null,type:cc.SpriteFrame},rubberBallRed:{default:null,type:cc.SpriteFrame},stretchingBoard:{default:null,type:cc.SpriteFrame},swimRing:{default:null,type:cc.SpriteFrame},swing:{default:null,type:cc.SpriteFrame},tent:{default:null,type:cc.SpriteFrame},tower:{default:null,type:cc.SpriteFrame},tunnel:{default:null,type:cc.SpriteFrame},heart_effect:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.home=cc.find("Canvas").getComponent("Home"),this.image=this.node.getChildByName("image").getComponent(cc.Sprite),this.cat=this.node.getChildByName("cat").getComponent("CatView"),this.bubble=this.node.getChildByName("bubble"),this.bubbleLabel=this.bubble.getChildByName("label").getComponent(cc.Label),this.heartContainer=this.node.getChildByName("heartContainer"),this.timelabel=this.node.getChildByName("timeLabel").getComponent(cc.Label),this.deletebutton=this.node.getChildByName("closeButton").getComponent(cc.Button),this.image.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.deletebutton.node.on("click",this.onDeleteClicked,this),this.cat.node.on(cc.Node.EventType.TOUCH_END,this.onCatTouchEnd,this),this.x=-1,this.y=-1,this.willShowTimer=h.FEEDING_ENVIRONMENT},update:function(t){this.elapsedTime-=t,this.elapsedTime<0&&(this.updateDataState(),this.elapsedTime=.4),this.heartElapsedTime-=t,this.heartElapsedTime<0&&this.state.playingCat&&(this.state.playingCat&&!this.editMode&&a.default.getCat(this.state.playingCat).isFull()&&this.playSingleHeartEffect(2),this.heartElapsedTime=.6*Math.random())},refreshFeedingInfo:function(){if(this.state.playingCat){var t=a.default.getCat(this.state.playingCat);t.isMaxed()?this.bubbleLabel.string="MAXED!":this.bubbleLabel.string=(t.data.dailyFed||0)+"/"+t.config.feedablePerDay}},updateDataState:function(){if(this.state.playingCat=this.state.playingCat||null,this.state.nextUpdate=this.state.nextUpdate||Date.now()+this.config.interval*u,this.cat.node.active=this.state.playingCat&&!this.editMode,this.state.nextUpdate-Date.now()<0)if(this.state.playingCat)this.state.nextUpdate-Date.now()<-this.config.interval*u?this.state.nextUpdate=Date.now()+o.default[this.state.playingCat].playTime*u:this.setYardIdle();else{var t=c({},this.config.attract);for(var e in r.default.getYard())t[r.default.getYard()[e].playingCat]&&delete t[r.default.getYard()[e].playingCat];if(0===Object.keys(t).length)console.warn("no Free cat"),this.setYardIdle();else{var i=null,a=0;for(var s in t)a+=t[s];var l=Math.random()*a;for(var h in t){if(l<t[h]){i=h;break}l-=t[h]}i?(this.state.playingCat=i,this.state.nextUpdate=Date.now()+o.default[i].playTime*u,this.cat.node.active=!this.editMode,this.bubble.active=!this.editMode,this.cat.loadCat(i)):this.setYardIdle(),this.refreshFeedingInfo()}}this.timelabel.string=n.default.formatTimeString(Math.max(this.state.nextUpdate-Date.now(),0))},setYardIdle:function(){this.state.playingCat=null,this.state.nextUpdate=Date.now()+this.config.interval*u,this.cat.node.active=!1,this.bubble.active=!1},playSingleHeartEffect:function(t){void 0===t&&(t=1);var e=new cc.Node;e.addComponent(cc.Sprite).spriteFrame=this.heart_effect,e.x=128*Math.random()-64,e.y=90*Math.random()-30,e.scale=.3*Math.random()+.7,this.heartContainer.addChild(e),cc.tween(e).to(Math.random()*t*.3+.7*t,{opacity:30,y:e.y+30*Math.random()+60,x:e.x-5+5*Math.random()},{easing:"sineOut"}).call(function(){e.destroy()}).start()},setConfig:function(t){this.id=t.id,this.config=t,this.config.size=this.config.size||{x:1,y:1},this.config.offset=this.config.offset||{x:0,y:0},this.config.buttonOffset=this.config.buttonOffset||{x:0,y:0},this.config.catOffset=this.config.catOffset||{x:0,y:0},this.config.labelOffset=this.config.labelOffset||{x:0,y:0},this.state=r.default.getYard()[this.id],this.app=cc.find("app").getComponent("app"),this.home=cc.find("Canvas").getComponent("Home"),this.image=this.node.getChildByName("image").getComponent(cc.Sprite),this.deletebutton=this.node.getChildByName("closeButton").getComponent(cc.Button),this.cat=this.node.getChildByName("cat").getComponent("CatView"),this.bubble=this.node.getChildByName("bubble"),this.bubbleLabel=this.bubble.getChildByName("label").getComponent(cc.Label),this.heartContainer=this.node.getChildByName("heartContainer"),this.timelabel=this.node.getChildByName("timeLabel").getComponent(cc.Label),this.image.spriteFrame=this[t.id],this.deletebutton.node.x=.5*this.image.node.width+this.config.buttonOffset.x,this.deletebutton.node.y=.5*this.image.node.height+this.config.buttonOffset.y,this.cat.node.x=this.config.catOffset.x,this.cat.node.y=this.config.catOffset.y,this.timelabel.node.x=this.config.labelOffset.x,this.timelabel.node.y=this.config.labelOffset.y,this.bubble.x=this.config.catOffset.x+54,this.bubble.y=this.config.catOffset.y+140,this.heartContainer.x=this.config.catOffset.x,this.heartContainer.y=this.config.catOffset.y,this.cat.loadCat(this.state.playingCat),this.timelabel.node.active=this.willShowTimer,this.deletebutton.node.active=!1,this.bubble.active=null!==this.state.playingCat,this.elapsedTime=0,this.heartElapsedTime=0,this.editMode=!1,this.refreshFeedingInfo()},exitEditMode:function(){this.editMode=!1,this.deletebutton.node.active=!1,this.cat.node.active=this.state.playingCat,this.bubble.active=this.state.playingCat,this.timelabel.node.active=this.willShowTimer},enterEditMode:function(){this.editMode=!0,this.deletebutton.node.active=!0,this.cat.node.active=!1,this.bubble.active=!1,this.timelabel.node.active=!1},onTouchStart:function(t){var e=t.getLocation(),i=this.image.node.convertToNodeSpaceAR(e);i.x+=.5*this.image.node.width,i.y+=.5*this.image.node.height,this.onItemTouched&&this.onItemTouched(t,this,i),t.stopPropagation()},onDeleteClicked:function(){this.onItemDeleted&&this.onItemDeleted(this)},onCatTouchEnd:function(){if(!this.editMode&&this.state.playingCat){var t=i.default.feed(this.state.playingCat,h.FEEDING_ENVIRONMENT?10:1);t.dailyFeedChanged&&(this.playSingleHeartEffect(),this.refreshFeedingInfo(),this.home.topUI.updateLabels()),t.intimacyChanged&&(this.home.giftPopup.show(t.cat),this.app.catRefreshRequest=!0)}}}),cc._RF.pop()},{"../commands/CatCommands":"CatCommands","../constants":"constants","../helpers":"helpers","../models/catModels":"catModels","../staticData/cats":"cats","../userState":"userState"}],YardView:[function(t,e){"use strict";cc._RF.push(e,"51fc0tBq/FAQZ6SB7dAaYfD","YardView");var i=s(t("../helpers")),a=s(t("../staticData/yard")),o=s(t("../userState"));function s(t){return t&&t.__esModule?t:{default:t}}function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}cc.Class({extends:cc.Component,properties:{WireframeCell:{default:null,type:cc.SpriteFrame},YardItem:{default:null,type:cc.Prefab},material_glow:{default:null,type:cc.Material}},onLoad:function(){this.app=cc.find("app").getComponent("app"),this.home=this.node.parent.getComponent("HomeSubscene"),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this._destX=this.node.x,this._prevTouchX=0,this._screenX=0,this._viewPos={},this.glowTimer=0,this.pressingTime=0,this.isPressing=!1,this.editMode=!1,this.selectingItem=null,this.isDragging=!1,this.draggingOffset=null,this.scrollView=this.node.getChildByName("scrollView"),this.yardItemGlow=this.scrollView.getChildByName("YardGlow").getComponent("YardGlow"),this.wireframe=this.scrollView.getChildByName("wireframe"),this.wireframe.x=.5*-this.scrollView.width,this.wireframe.y=.5*this.scrollView.height-800,this.loadWireframe(),this.wireframe.active=!1,this.scrollView.x=-690,this._destX=-690,this.yardItemGlow.node.zIndex=a.default.patternSize.x*a.default.patternSize.y,this.yardItemGlow.node.active=!1},onEnable:function(){this.app.yardViewRefreshRequest&&(this.loadItems(),this.app.yardViewRefreshRequest=!1),this.elapsedTime=3},update:function(t){if(this.isDragging){var e=this.app.FRAME.width,a=this._screenX-.5*(1024-e),o=.15625*e;a<o?this._destX+=.3*(o-a):a>e-o&&(this._destX-=.3*(o-(e-a)))}this.scrollView.x=i.default.lerp(this.scrollView.x,this._destX,8*t);var s=.5*(this.scrollView.width-this.node.width/this.node.scale),n=Math.max(Math.min(this.scrollView.x,s),-s);if(this._destX=n!==this.scrollView.x?this.scrollView.x:this._destX,this.scrollView.x=n,this.isPressing&&(this.pressingTime+=t),this.isPressing&&this.pressingTime>.5&&(this.isPressing=!1,this.editMode||this.home.enterEditMode(!0)),this.editMode&&this.isDragging&&this.selectingItem){var r=this.convertToWireframeCoord(this._viewPos,this.draggingOffset);this.isCoordValid(r,this.selectingItem.config,this.selectingItem)&&this.placeItem(this.selectingItem,r)}this.editMode&&this.yardItemGlow.node.active&&this.selectingItem&&(this.yardItemGlow.node.x=this.selectingItem.node.x,this.yardItemGlow.node.y=this.selectingItem.node.y),this.yardItemGlow.node.active&&(this.glowTimer+=.7*t,this.material_glow.setProperty("hl_timer",this.glowTimer)),this.elapsedTime-=t,this.elapsedTime<0&&(this.updateDataState(),this.elapsedTime=3)},updateDataState:function(){o.default.saveYard()},loadWireframe:function(){this.wireFrameCells=[];for(var t=a.default.pattern,e=0;e<t.length;e++){this.wireFrameCells[e]=[];for(var i=0;i<t[e].length;i++){var o=new cc.Node;o.addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=this.WireframeCell,o.x=200*i+100,o.y=200*-e-100,o.width=200,o.height=200,o.color=a.default.colors[t[e][i]].color,o.opacity=a.default.colors[t[e][i]].opacity,this.wireframe.addChild(o),this.wireFrameCells[e][i]={tile:o,type:t[e][i],occupiedBy:null}}}},loadItems:function(){this.data=o.default.getYard();for(var t=a.default.pattern,e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)this.wireFrameCells[e][i].occupiedBy=null;if(this.yardItems)for(var s in this.yardItems)this.yardItems[s].node.destroy();for(var r in this.yardItems={},this.data){var l=this.data[r],c=a.default.items[r];if(c&&this.isCoordValid(l,c)){var h=cc.instantiate(this.YardItem).getComponent("YardItem");h.setConfig(n({id:r},c)),h.onItemTouched=this.onItemTouched.bind(this),h.onItemDeleted=this.onItemDeleted.bind(this),this.scrollView.addChild(h.node),this.yardItems[r]=h,this.placeItem(h,l)}}var d=!1;for(var u in this.data){var p=this.data[u];if(-1===p.x&&-1===p.y){d=!0;var m=this.findValidRandomCoord(u);if(!m){delete this.data[u],this.app.suppliesRefreshRequest=!0;continue}this.data[u].x=m.x,this.data[u].y=m.y;var f=a.default.items[u],g=cc.instantiate(this.YardItem).getComponent("YardItem");g.setConfig(n({id:u},f)),g.onItemTouched=this.onItemTouched.bind(this),g.onItemDeleted=this.onItemDeleted.bind(this),this.scrollView.addChild(g.node),this.yardItems[u]=g,this.placeItem(g,m)}}d&&o.default.saveYard()},saveYardState:function(){o.default.saveYard(),this.app.suppliesRefreshRequest=!0},enterEditMode:function(t){for(var e in void 0===t&&(t=!1),this.editMode=!0,this.wireframe.active=!0,t?(this.wireframe.opacity=0,cc.tween(this.wireframe).to(.4,{opacity:255},{easing:"quadOut"}).start()):this.wireframe.opacity=255,this.yardItems)this.yardItems[e].enterEditMode();this.selectingItem&&(this.yardItemGlow.node.active=!0,this.glowTimer=0)},exitEditMode:function(t){var e=this;for(var i in void 0===t&&(t=!1),this.editMode=!1,this.selectingItem=null,this.yardItemGlow.node.active=!1,t?cc.tween(this.wireframe).to(.4,{opacity:0},{easing:"quadOut"}).call(function(){e.wireframe.active=!1}).start():this.wireframe.active=!1,this.yardItems)this.yardItems[i].exitEditMode()},isCoordValid:function(t,e,i){void 0===i&&(i=null);for(var o=0;o<e.size.y;o++)for(var s=0;s<e.size.x;s++){if(t.y-o<0)return!1;if(t.x+s>=a.default.patternSize.x)return!1;var n=this.wireFrameCells[t.y-o][t.x+s];if(n.occupiedBy&&n.occupiedBy!==i)return!1;if("none"===n.type)return!1;if(n.type!==e.type)return!1}return!0},findValidRandomCoord:function(t){for(var e=a.default.items[t],i=[],o=0;o<a.default.patternSize.y;o++)for(var s=0;s<a.default.patternSize.x;s++){var n={x:s,y:o};this.isCoordValid(n,e)&&i.push(n)}return 0===i.length?null:i[Math.floor(Math.random()*i.length)]},freeUpSpace:function(t){if(t.x>=0!=null&&t.y>=0)for(var e=0;e<t.config.size.y&&t.y-e>=0;e++)for(var i=0;i<t.config.size.x&&t.x+i<a.default.patternSize.x;i++)this.wireFrameCells[t.y-e][t.x+i].occupiedBy=null},placeItem:function(t,e){this.freeUpSpace(t),e.y-=t.config.size.y-1;var i=this.coordToPosition(e);t.node.x=i.x+100*t.config.size.x+t.config.offset.x,t.node.y=i.y-100*t.config.size.y+t.config.offset.y,t.node.zIndex=e.y*a.default.patternSize.x+(a.default.patternSize.x-e.x),t.x=e.x,t.y=e.y;for(var o=0;o<t.config.size.y&&t.y-o>=0;o++)for(var s=0;s<t.config.size.x&&t.x+s<a.default.patternSize.x;s++)this.wireFrameCells[t.y-o][t.x+s].occupiedBy=t;this.data[t.config.id].x=e.x,this.data[t.config.id].y=e.y},convertToWireframeCoord:function(t,e){e=e||new cc.Vec2;var i=Math.floor((t.x-this.scrollView.x+.5*this.scrollView.width)/200),o=Math.floor(-(t.y-this.wireframe.y)/200),s=Math.floor(e.x/200),n=Math.floor(e.y/200);return{x:Math.max(0,Math.min(i-s,a.default.patternSize.x-1)),y:Math.max(0,Math.min(o+n,a.default.patternSize.y-1))}},coordToPosition:function(t){return{x:this.wireframe.x+200*t.x,y:this.wireframe.y-200*t.y}},selectItem:function(t,e){this.selectingItem=t,this.yardItemGlow.setGlowShape(this.selectingItem.config.id),this.home.editModeDragNotification(!0),this.editMode&&(this.yardItemGlow.node.active=!0,this.glowTimer=0),this.draggingOffset=e},onItemTouched:function(t,e,i){this.onTouchStart(t,e,i)},onTouchStart:function(t,e,i){var a=t.getLocation();this._viewPos=this.node.convertToNodeSpaceAR(a),this._prevTouchX=this._viewPos.x,this._screenX=t.getLocationInView().x,this.isPressing=!0,this.pressingTime=0,e&&(this.isDragging=!0,this.selectItem(e,i))},onTouchMove:function(t){var e=t.getLocation();this._viewPos=this.node.convertToNodeSpaceAR(e),this.isDragging&&this.editMode||(this._destX+=2.2*(this._viewPos.x-this._prevTouchX)),this._prevTouchX=this._viewPos.x,this._screenX=t.getLocationInView().x,t.getDelta().magSqr()>10&&(this.isPressing=!1)},onTouchEnd:function(){this.isPressing=!1,this.isDragging=!1,this.draggingOffset=null,this.home.editModeDragNotification(!1),this.selectingItem=null,this.yardItemGlow.node.active=!1},onTouchCancel:function(){this.isPressing=!1,this.isDragging=!1,this.draggingOffset=null,this.home.editModeDragNotification(!1),this.selectingItem=null,this.yardItemGlow.node.active=!1},onItemDeleted:function(t){this.selectingItem===t&&(this.yardItemGlow.node.active=!1,this.home.editModeDragNotification(!1),this.selectingItem=null),delete this.data[t.config.id],delete this.yardItems[t.config.id],t.node.destroy()},updateScreenSize:function(){this.node.width=this.node.parent.width}}),cc._RF.pop()},{"../helpers":"helpers","../staticData/yard":"yard","../userState":"userState"}],app:[function(t,e){"use strict";cc._RF.push(e,"967d1HZ3u1MqZOZ0TlE2/L0","app");var i=o(t("simplex-noise")),a=o(t("./Scheduler.js"));function o(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;if(this.IS_DEVELOPMENT=cc.debug.isDisplayStats(),this.initDone)return console.error("app.js - already initiated");this.info("app.js - onLoad"),this.IS_DEVELOPMENT&&(console.log("DEBUG MODE"),globalThis.app=this),cc.game.addPersistRootNode(this.node),this.initDone=!0,this.screenLocker=null,this.visibleScenes=[],this.CANVAS={width:null,height:null},this.FRAME={width:null,height:null,ratio:null},this.screenLocker=cc.find("screenLocker"),this.spinner=this.screenLocker.getChildByName("spinnerFrame"),cc.game.addPersistRootNode(this.screenLocker),this.screenLocker.active=!1,this.screenLocker.zIndex=999,cc.view.setResizeCallback(function(){t.updateScreenSize()});var e=cc.find("Canvas");this.CANVAS.width=e.width,this.CANVAS.height=e.height,this.now=0,this.noise=new i.default,this.scheduler=new a.default(this),this.yardViewRefreshRequest=!1,this.boostersRefreshRequest=!1,this.suppliesRefreshRequest=!1,this.catRefreshRequest=!1,globalThis.GAMESNACKS&&GAMESNACKS.gameReady()},onEnable:function(){this.info("app.js - onEnable")},start:function(){this.info("app.js - start")},update:function(t){this.now+=1e3*t,this.scheduler.active&&this.scheduler.onUpdate()},onDisable:function(){this.info("app.js - onDisable")},onDestroy:function(){this.info("app.js - onDestroy")},info:function(){this.IS_DEVELOPMENT&&console.info.apply(this,arguments)},lockScreen:function(t){void 0===t&&(t=!1),this.screenLocker.active=!0,this.spinner.active=t},unlockScreen:function(){this.screenLocker.active=!1,this.spinner.active=!1},updateScreenSize:function(){this.info("---- updateScreenSize");var t=cc.view.getFrameSize();this.FRAME.ratio=t.width/t.height,this.FRAME.ratio>1?(this.FRAME.width=this.CANVAS.width,this.FRAME.height=Math.ceil(this.CANVAS.height/this.FRAME.ratio)):(this.FRAME.width=Math.ceil(this.CANVAS.height*this.FRAME.ratio),this.FRAME.height=this.CANVAS.height),console.log("--- FRAME",this.FRAME);for(var e=0;e<this.visibleScenes.length;e++){var i=this.visibleScenes[e];i.updateScreenSize&&i.updateScreenSize(this.FRAME)}},setSceneVisible:function(t){if(-1!==this.visibleScenes.indexOf(t))return console.error("scene is already registered as visible");this.visibleScenes.push(t),this.updateScreenSize()},setSceneHidden:function(t){var e=this.visibleScenes.indexOf(t);if(-1===e)return console.error("scene is not registered as visible");this.visibleScenes.splice(e,1)},changeScene:function(t,e){var i=this;cc.game.addPersistRootNode(t.node),this.lockScreen(!0),cc.director.loadScene(e,function(){cc.tween(t.node).to(.5,{opacity:0},{easing:"quadInOut"}).call(function(){cc.game.removePersistRootNode(t.node),t.node.destroy(),i.unlockScreen()}).start()})},reloadScene:function(t){var e=this,i=cc.director.getScene().getChildByName("Canvas"),a=cc.director.getScene().name;cc.game.addPersistRootNode(i),this.lockScreen(!0),cc.director.loadScene("Empty",function(){cc.game.removePersistRootNode(i),i.destroy(),i=cc.director.getScene().getChildByName("Canvas"),cc.game.addPersistRootNode(i),cc.director.loadScene(a,function(){cc.game.removePersistRootNode(i),i.destroy(),e.unlockScreen(),t&&t()})})}}),cc._RF.pop()},{"./Scheduler.js":"Scheduler","simplex-noise":1}],boosters:[function(t,e,i){"use strict";cc._RF.push(e,"8b54bSTPD9NaIaWU/c9bH/9","boosters"),i.__esModule=!0,i.default=void 0,i.default={hammer:{name:"Hammer",description:"Pops one Cube or obstacle of your choice"},airplane:{name:"Airplane",description:"Pops the row of the selected Cube"},rocket:{name:"Rocket",description:"Pops the column of the selected Cube"},fairystick:{name:"Fairystick",description:"Clears all Cubes with the same color as the selected Cube."},paintbrush:{name:"Paintbrush",description:"Changes the color of the selected Cube to the selected color"},wheel:{name:"Wheel",description:"Shuffles all of the cubes on the screen"}},e.exports=i.default,cc._RF.pop()},{}],bumper:[function(t,e,i){"use strict";cc._RF.push(e,"7f4bfdkpMhCc4mclTjIwv/I","bumper"),i.__esModule=!0,i.default=void 0;var a=n(t("../../constants.js")),o=n(t("../../helpers.js")),s=n(t("tween-functions"));function n(t){return t&&t.__esModule?t:{default:t}}var r=a.default.GAMEPLAY,l=r.Z_INDEX,c=r.TILE_SIZE,h=r.ITEM_SCALE,d={properties:{doorClosed:{default:null,type:cc.SpriteFrame},doorOpened:{default:null,type:cc.SpriteFrame},mouse:{default:null,type:cc.SpriteFrame},mouseFX:{default:null,type:cc.Prefab}},is:function(t){return"mouseDoor"===t},init:function(t,e){switch(t.isBlockingCascade=!0,t.isSensitive=!0,t.node.zIndex=l.BLOCKER_ITEM,e.type){case"mouseDoor":t._addLayers({doorOpened:t.doorOpened}),t._addLayers({doorClosed:t.doorClosed})}t.layers.doorOpened.active=!1,t.currentLayerId="doorClosed"},gotHit:function(t,e,i){d["gotHit_"+t.type](t,e,i)},gotHit_mouseDoor:function(t,e,i){t.onUpdate||(t.onUpdate={});var a=function(){t.onDestroyCb&&t.onDestroyCb(t.type),i()};if(t.onUpdate.hitInProgress){var o=t.onUpdate.hitInProgress.data;return o.mousesRemaining++,"close"===o.animationStep?(o.animationStep="open",o.nextAnimationStep=t.app.now+2*(100-o.doorOpeningPercentage)):"mouse"===o.animationStep&&(o.nextAnimationStep=Math.min(t.app.now+200,o.nextAnimationStep)),void o.resolveList.push(a)}t.layers.doorOpened.active=!0;var s={doorOpeningPercentage:0,animationStep:"open",mousesRemaining:1,animationStart:t.app.now,nextAnimationStep:t.app.now+200,resolveList:[a]};t.onUpdate.hitInProgress={data:s,update:function(e,i){if(t.app.now>=i.nextAnimationStep){if("open"===i.animationStep)t.layers.doorClosed.opacity=0,i.animationStep="mouse";else if("close"===i.animationStep)return t.layers.doorClosed.opacity=255,t.layers.doorOpened.active=!1,delete t.onUpdate.hitInProgress,void t._onUpdateCleanup();"mouse"===i.animationStep&&(i.mousesRemaining<1?(i.animationStep="close",i.nextAnimationStep=t.app.now+300,i.animationStart=t.app.now):(d.createMouse(t,i.resolveList.shift(1)),i.mousesRemaining--,i.mousesRemaining>0?i.nextAnimationStep=t.app.now+200:i.nextAnimationStep=t.app.now+500))}if("open"===i.animationStep||"close"===i.animationStep){i.doorOpeningPercentage=Math.min(1,(t.app.now-i.animationStart)/(i.nextAnimationStep-i.animationStart));var a="open"===i.animationStep?1-i.doorOpeningPercentage:i.doorOpeningPercentage;t.layers.doorClosed.opacity=255*a}}}},createMouse:function(t,e){var i=t.gameBoard,a=i.boardXToViewX(t.boardX),n=t.boardX<t.gameBoard.width/2?1:-1,r=cc.instantiate(t.mouseFX);t.gameBoard.view.addChild(r),r.zIndex=l.CRATE_EXPLOSION,r.x=t.node.x,r.y=t.node.y,r.scale=1.22*h,r.scaleX*=n;var d=r.getComponent(sp.Skeleton);d.timeScale=1,d.setAnimation(0,"mouse_jump",!1),d.setCompleteListener(function(){d.setCompleteListener(null),d.setAnimation(0,"mouse_running",!0)});var u=7e3*(.8+.4*Math.random());i.movingSprites.push({onTick:function(t,e){var a=i.app.now-t.startTime,l=e*u,h=t.startX+s.default.easeInBack(a,0,3*c,325)*n-r.x;r.x+=Math.min(l,h),a>800&&(r.opacity=Math.max(0,1050-a)/250*255,0===r.opacity&&(r.parent.removeChild(r),r.destroy(),o.default.removeFromArray(t,i.movingSprites),t.resolve()))},startTime:i.app.now,startX:a,resolve:e})}},u=d;i.default=u,e.exports=i.default,cc._RF.pop()},{"../../constants.js":"constants","../../helpers.js":"helpers","tween-functions":3}],cabinet:[function(t,e,i){"use strict";cc._RF.push(e,"bf7eaiu7/VPmrBW1i8BCg9G","cabinet"),i.__esModule=!0,i.default=void 0;var a=s(t("../../constants.js")),o=s(t("../../helpers.js"));function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=r(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function r(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var h=a.default.GAMEPLAY,d=h.Z_INDEX,u=h.TILE_SIZE,p=h.ITEM_SIZE,m=h.ITEM_SCALE,f={milkCabinet:"milkCabinet:bottomLeft",milkShelf:"milkShelf:1",jamCabinet:"jamCabinet:topLeft"},g={"milkCabinet:topLeft":{x:0,y:1},"milkCabinet:topRight":{x:-1,y:1},"milkCabinet:bottomLeft":{x:0,y:0},"milkCabinet:bottomRight":{x:-1,y:0},"milkShelf:1":{x:0,y:0},"milkShelf:2":{x:-1,y:0},"milkShelf:3":{x:-2,y:0},"milkShelf:4":{x:-3,y:0},"milkShelf:5":{x:-4,y:0},"milkShelf:6":{x:-5,y:0},"milkShelf:7":{x:-6,y:0},"milkShelf:8":{x:-7,y:0},"milkShelf:9":{x:-8,y:0},"milkShelf:2right":{x:-1,y:0},"milkShelf:3right":{x:-2,y:0},"milkShelf:4right":{x:-3,y:0},"milkShelf:5right":{x:-4,y:0},"milkShelf:6right":{x:-5,y:0},"milkShelf:7right":{x:-6,y:0},"milkShelf:8right":{x:-7,y:0},"milkShelf:9right":{x:-8,y:0},"jamCabinet:topLeft":{x:0,y:0},"jamCabinet:topRight":{x:-1,y:0},"jamCabinet:bottomLeft":{x:0,y:-1},"jamCabinet:bottomRight":{x:-1,y:-1}},y={properties:{woodenCabinet:{default:null,type:cc.SpriteFrame},milkBottle:{default:null,type:cc.SpriteFrame},milkShelfLeft:{default:null,type:cc.SpriteFrame},milkShelfCenter:{default:null,type:cc.SpriteFrame},milkShelfRight:{default:null,type:cc.SpriteFrame},jam1:{default:null,type:cc.SpriteFrame},jam2:{default:null,type:cc.SpriteFrame},jam3:{default:null,type:cc.SpriteFrame},jam4:{default:null,type:cc.SpriteFrame},jam5:{default:null,type:cc.SpriteFrame}},preParsePattern:function(t,e){for(var i=0;i<t.height;i++)if(0!==i)for(var a=0;a<t.width;a++){var o=e[i-1][a];if(o)if("milkCabinet"===o){var s="milkCabinet"===e[i-1][a+1],n="milkCabinet"===e[i-1+1][a],r="milkCabinet"===e[i-1+1][a+1];if(!s||!n||!r)throw new Error("Invalid milkCabinet pattern: must be a 2x2 square");e[i-1][a]="milkCabinet:topLeft",e[i-1][a+1]="milkCabinet:topRight",e[i-1+1][a]="milkCabinet:bottomLeft",e[i-1+1][a+1]="milkCabinet:bottomRight"}else if("milkShelfLeft"===o)for(var l=1;l<=9;l++){var c=e[i-1][a+l-1];if(e[i-1][a+l-1]="milkShelf:"+l,"milkShelfRight"===c){e[i-1][a+l-1]+="right";break}}else if("string"==typeof o&&"jamCabinet"===o.substr(0,10)&&"jamCabinet:"!==o.substr(0,11)){var h="jamCabinet"===e[i-1][a+1].substr(0,10),d="jamCabinet"===e[i-1+1][a].substr(0,10),u="jamCabinet"===e[i-1+1][a+1].substr(0,10);if(!h||!d||!u)throw new Error("Invalid jamCabinet pattern: must be a 2x2 square");e[i-1][a]="jamCabinet:topLeft:"+e[i-1][a].substr(-1),e[i-1][a+1]="jamCabinet:topRight:"+e[i-1][a+1].substr(-1),e[i-1+1][a]="jamCabinet:bottomLeft:"+e[i-1+1][a].substr(-1),e[i-1+1][a+1]="jamCabinet:bottomRight:"+e[i-1+1][a+1].substr(-1)}}},is:function(t){return!!f[t]||!!g[t]||"jamCabinet:"===t.substr(0,11)},init:function(t,e){t.isBlockingCascade=!0,t.isSensitive=!0,t.node.zIndex=d.BLOCKER_ITEM;var i=e.type;t.cabinetData={master:null,isMaster:null,bottles:null,gotHitBy:null,mainType:null,subType:null,color:null,prevHitResolve:null};var a=i.split(":");if(t.cabinetData.mainType=a[0],t.cabinetData.subType=a[1],"jamCabinet"===t.cabinetData.mainType&&(t.cabinetData.color=a[2],t.type=i=e.type=a[0]+":"+a[1]),t.cabinetData.isMaster=i===f[t.cabinetData.mainType],t.cabinetData.isMaster){if(t.cabinetData.master=t,t.cabinetData.gotHitBy={},t.linkedGamesItems=[t],"milkCabinet"===t.cabinetData.mainType){t._addLayers({woodenCabinet:t.woodenCabinet}),t.layers.woodenCabinet.width=2*u,t.layers.woodenCabinet.height=2*u,t.layers.woodenCabinet.x=p/2*m,t.layers.woodenCabinet.y=p/2*m,t.currentLayerId="woodenCabinet",b(t.layers[t.currentLayerId]);var s=t.milkBottle.getOriginalSize(),r=p,l=r/s.height*s.width,h={spriteFrame:t.milkBottle,width:l,height:r,view:t.gameBoard.view,zIndex:d.BOTTLES_AND_JARS},v=t.gameBoard.boardXToViewX(t.boardX)+u/2,C=t.gameBoard.boardYToViewY(t.boardY)+u/2,S=.5*u,w=.48*u,B=.02*u,I=.02*u;t.cabinetData.bottles=[],t.cabinetData.bottles.push(o.default.createSprite(c({},h,{x:v-S+B,y:C+w+I}))),t.cabinetData.bottles.push(o.default.createSprite(c({},h,{x:v+B,y:C+w+I}))),t.cabinetData.bottles.push(o.default.createSprite(c({},h,{x:v+S+B,y:C+w+I}))),t.cabinetData.bottles.push(o.default.createSprite(c({},h,{x:v-S+B,y:C-w+I}))),t.cabinetData.bottles.push(o.default.createSprite(c({},h,{x:v+B,y:C-w+I}))),t.cabinetData.bottles.push(o.default.createSprite(c({},h,{x:v+S+B,y:C-w+I})));for(var x,F=n(t.cabinetData.bottles);!(x=F()).done;)b(x.value)}else"jamCabinet"===t.cabinetData.mainType&&(t._addLayers({woodenCabinet:t.woodenCabinet}),t.layers.woodenCabinet.width=2*u,t.layers.woodenCabinet.height=2*u,t.layers.woodenCabinet.x=p/2*m,t.layers.woodenCabinet.y=-p/2*m,t.currentLayerId="woodenCabinet",b(t.layers[t.currentLayerId]));for(var k in g)if(0===k.indexOf(t.cabinetData.mainType+":")){var _=-g[k].x,T=-g[k].y;if(0!==_||0!==T){_+=t.boardX,T+=t.boardY;var N=t.gameBoard.board[T]&&t.gameBoard.board[T][_];N&&N.cabinetData&&N.type===k&&y.addChildToMaster(t,N)}}}else{var M=t.boardX+g[t.type].x,O=t.boardY+g[t.type].y,P=t.gameBoard.board[O]&&t.gameBoard.board[O][M];if(!P)return;if(P.type!==f[t.cabinetData.mainType])throw new Error("A cabinet master does not have the right type);");y.addChildToMaster(P,t)}if("milkShelf"===t.cabinetData.mainType){var E;if("milkShelf:1"===i)t._addLayers(((E={})[i]=t.milkShelfLeft,E));else if("right"===i.substr(-5)){var R;t._addLayers(((R={})[i]=t.milkShelfRight,R))}else{var L;t._addLayers(((L={})[i]=t.milkShelfCenter,L))}t.currentLayerId=i,t.layers[i].width=u,t.layers[i].height=u,b(t.layers[t.currentLayerId]);var D=t.cabinetData.master;D.cabinetData.bottles||(D.cabinetData.bottles=[]);var A=t.milkBottle.getOriginalSize(),j=1.05*p,U=j/A.height*A.width,Y=o.default.createSprite({spriteFrame:t.milkBottle,width:U,height:j,view:t.gameBoard.view,zIndex:d.FLYING_MISSILE,x:t.gameBoard.boardXToViewX(t.boardX),y:t.gameBoard.boardYToViewY(t.boardY)});D.cabinetData.bottles.push(Y),b(Y)}if("jamCabinet"===t.cabinetData.mainType){var X,G=t.cabinetData.master;G.cabinetData.bottles||(G.cabinetData.bottles=[]);var q="jam"+t.cabinetData.color,V=t[q].getOriginalSize(),H=1.05*p,z=H/V.height*V.width,W=(t.gameBoard.boardXToViewX(t.boardX),t.gameBoard.boardYToViewY(t.boardY),o.default.createSprite({spriteFrame:t[q],width:z,height:H,view:t.gameBoard.view,zIndex:d.FLYING_MISSILE,x:t.gameBoard.boardXToViewX(t.boardX),y:t.gameBoard.boardYToViewY(t.boardY)}));b(W),W.jamColor=t.cabinetData.color,W.associatedGameObject=t,G.cabinetData.bottles.push(W),t.objectiveTypes=((X={})["jam"+t.cabinetData.color]=!0,X)}"milkShelf"!==t.cabinetData.mainType&&"milkCabinet"!==t.cabinetData.mainType||(t.objectiveTypes={milkBottle:!0})},gotHit:function(t,e,i){if(!t.cabinetData.isMaster)return t.cabinetData.master?y.gotHit(t.cabinetData.master,e,i):(console.error("unable to forward a cabinet gotHit to its master"),i());if(t.cabinetData.gotHitBy[e.uid])return i();if(t.cabinetData.gotHitBy[e.uid]=!0,t.isDying)return i();t.onUpdate&&t.onUpdate.shaking&&t.onUpdate.shaking.data.resolve(t.onUpdate.shaking.data);var a="milkBottle",o=null;if("jamCabinet"===t.cabinetData.mainType){var s=e.type.substr(-1),r=t.cabinetData.master;if(0===e.type.indexOf("sensitive:")){for(var l=0;l<r.cabinetData.bottles.length;l++)if(r.cabinetData.bottles[l].jamColor===s){o=l;break}if(null===o)return i()}else o=Math.floor(Math.random()*r.cabinetData.bottles.length);a="jam"+r.cabinetData.bottles[o].jamColor}if(null===o&&(o=0),t.cabinetData.prevHitResolve){var c=t.cabinetData.prevHitResolve.resolve;t.cabinetData.prevHitResolve=null,c()}var h=Math.random()+"_"+Date.now(),d=0,u=function(){t.cabinetData.prevHitResolve&&t.cabinetData.prevHitResolve.comboId===h&&0==--d&&(t.cabinetData.prevHitResolve=null,i())};t.cabinetData.prevHitResolve={subResolve:u,resolve:i,comboId:h};var p=t.cabinetData.bottles.splice(o,1)[0];if(t.lifePoints=t.cabinetData.bottles.length,p.associatedGameObject&&p.associatedGameObject.objectiveTypes&&(p.associatedGameObject.objectiveTypes={}),t.lifePoints)d++,y.animateMilkBottleDestroy(t.gameBoard,p,u);else{t.isDying=!0;for(var m,f=n(t.linkedGamesItems);!(m=f()).done;){var g=m.value;g!==t&&(g.isDying||(g.lifePoints=0,g.isDying=!0,d++,g._defaultExplode(e,u)))}y.animateMilkBottleDestroy(t.gameBoard,p),d++,t._defaultExplode(e,u)}t.onUpdate||(t.onUpdate={}),t.onUpdate.shaking={data:{shakeUntil:t.app.now+300,resolve:function(){if("jamCabinet"===t.cabinetData.mainType||"milkCabinet"===t.cabinetData.mainType)t.layers[t.currentLayerId].x=t.layers[t.currentLayerId].initialX,t.layers[t.currentLayerId].y=t.layers[t.currentLayerId].initialY;else if("milkShelf"===t.cabinetData.mainType&&t.linkedGamesItems)for(var e,i=n(t.linkedGamesItems);!(e=i()).done;){var a=e.value;a.layers[a.currentLayerId].x=a.layers[a.currentLayerId].initialX,a.layers[a.currentLayerId].y=a.layers[a.currentLayerId].initialY}for(var o,s=n(t.cabinetData.bottles);!(o=s()).done;){var r=o.value;r.x=r.initialX,r.y=r.initialY}delete t.onUpdate.shaking,t._onUpdateCleanup()}},update:function(e,i){if(t.app.now>=i.shakeUntil)return i.resolve(i);var a=10*t.app.noise.noise2D(t.app.now/100,20*t.uid),o=10*t.app.noise.noise2D(t.app.now/100,30*t.uid);if(t.layers[t.currentLayerId]){if("jamCabinet"===t.cabinetData.mainType||"milkCabinet"===t.cabinetData.mainType)t.layers[t.currentLayerId].x=t.layers[t.currentLayerId].initialX+a,t.layers[t.currentLayerId].y=t.layers[t.currentLayerId].initialY+o;else if("milkShelf"===t.cabinetData.mainType&&t.linkedGamesItems)for(var s,r=n(t.linkedGamesItems);!(s=r()).done;){var l=s.value;l.layers[l.currentLayerId].x=l.layers[l.currentLayerId].initialX+a,l.layers[l.currentLayerId].y=l.layers[l.currentLayerId].initialY+o}for(var c,h=n(t.cabinetData.bottles);!(c=h()).done;){var d=c.value;d.x=d.initialX+a,d.y=d.initialY+o}}}},t.onDestroyCb&&t.onDestroyCb(a)},addChildToMaster:function(t,e){e.cabinetData.master=t,t.linkedGamesItems.push(e);for(var i,a=n(t.linkedGamesItems);!(i=a()).done;){var o=i.value;o!==t&&(o.linkedGamesItems=t.linkedGamesItems)}},animateMilkBottleDestroy:function(t,e,i){e.zIndex=d.FLYING_MISSILE,t.movingSprites.push({onTick:function(i,a){i.velocityY-=17e3*a,e.x+=a*i.velocityX,e.y+=a*i.velocityY,e.angle+=i.r*a,(e.y<-1024||e.x>1024||e.x<-1024)&&(e.opacity=Math.max(0,e.opacity-=512*a),e.opacity||(e.parent.removeChild(e),e.destroy(),o.default.removeFromArray(i,t.movingSprites),i.resolve&&i.resolve()))},velocityX:(700*Math.random()+700)*(Math.random()>.5?-1:1),velocityY:3e3*Math.random()+3e3,r:(800*Math.random()+800)*(Math.random()>.5?-1:1),resolve:i})}};function b(t){t.initialX=t.x,t.initialY=t.y}var v=y;i.default=v,e.exports=i.default,cc._RF.pop()},{"../../constants.js":"constants","../../helpers.js":"helpers"}],catModels:[function(t,e,i){"use strict";cc._RF.push(e,"434d1JeWHtFTIsvLaqHTwsK","catModels"),i.__esModule=!0,i.default=void 0;var a=n(t("../userState")),o=n(t("../staticData/cats")),s=n(t("../staticData/yard"));function n(t){return t&&t.__esModule?t:{default:t}}var r={};function l(t){return o.default[t]?(r[t]||(r[t]=new c(t)),r[t]):null}var c=function(){function t(t){for(var e in this.id=t,this.number=Object.keys(o.default).indexOf(t)+1,this.data=a.default.getCats()[t],this.config=o.default[t],this.intimacyCap=this.config.feedLevels[3],this.favorites=[],s.default.items)s.default.items[e].attract[t]&&this.favorites.push(e)}var e=t.prototype;return e.getIntimacyLevel=function(){for(var t=this.data.fishFed,e=0,i=1;i<=3;i++){if(t<this.config.feedLevels[i])return e;e=i}return 3},e.isFull=function(){return this.data.dailyFed>=this.config.feedablePerDay},e.isMaxed=function(){return 3===this.getIntimacyLevel()},e.getCurrentSkillDesc=function(){return this.config.skillDescs[this.getIntimacyLevel()]||"No skill yet: feed cat to unlock."},t}(),h={getCat:l,getAllCats:function(){var t=[];for(var e in o.default){var i=l(e);i&&t.push(i)}return t},flush:function(){r={}}};i.default=h,e.exports=i.default,cc._RF.pop()},{"../staticData/cats":"cats","../staticData/yard":"yard","../userState":"userState"}],cats:[function(t,e,i){"use strict";cc._RF.push(e,"cbcddRbkZRO5bc8eg13jjFA","cats"),i.__esModule=!0,i.default=void 0,i.default={bella:{name:"Bella",playTime:600,feedablePerDay:100,feedLevels:{1:200,2:500,3:900},skillDescs:{1:"Increase the 1 step at the beginning of the game.",2:"Increase the 2 step at the beginning of the game.",3:"Increase the 3 step at the beginning of the game."}},milo:{name:"Milo",playTime:720,feedablePerDay:100,feedLevels:{1:200,2:500,3:900},skillDescs:{1:"Set 1 Frisbee at the start of the game in a random position.",2:"Set 2 Frisbees at the start of the game in a random position.",3:"Set 3 Frisbees at the start of the game in a random position."}},dora:{name:"Dora",playTime:660,feedablePerDay:100,feedLevels:{1:200,2:500,3:900},skillDescs:{1:"Set 1 Rocket at the start of the game in a random position.",2:"Set 2 Rockets at the start of the game in a random position.",3:"Set 3 Rockets at the start of the game in a random position."}},lily:{name:"Lily",playTime:780,feedablePerDay:150,feedLevels:{1:400,2:1e3,3:1800},skillDescs:{1:"Set 1 Bomb at the start of the game in a random position.",2:"Set 2 Bombs at the start of the game in a random position.",3:"Set 3 Bombs at the start of the game in a random position."}},leo:{name:"Leo",playTime:660,feedablePerDay:150,feedLevels:{1:400,2:1e3,3:1800},skillDescs:{1:"Temporary add 1 Hammer at the beginning of the game.",2:"Temporary add 2 Hammers at the beginning of the game.",3:"Temporary add 3 Hammers at the beginning of the game."}},max:{name:"Max",feedablePerDay:150,playTime:540,feedLevels:{1:400,2:1e3,3:1800},skillDescs:{1:"Temporary add 1 Wheel at the beginning of the game.",2:"Temporary add 2 Wheels at the beginning of the game.",3:"Temporary add 3 Wheels at the beginning of the game."}},luna:{name:"Luna",playTime:360,feedablePerDay:200,feedLevels:{1:600,2:1500,3:2700},skillDescs:{1:"Get 2 extra steps when the player loses the game",2:"Get 4 extra steps when the player loses the game",3:"Get 6 extra steps when the player loses the game"}},bob:{name:"Bob",playTime:840,feedablePerDay:200,feedLevels:{1:600,2:1500,3:2700},skillDescs:{1:"Set 1 sunflower at the start of the game in a random position.",2:"Set 2 sunflowers at the start of the game in a random position.",3:"Set 3 sunflowers at the start of the game in a random position."}}},e.exports=i.default,cc._RF.pop()},{}],constants:[function(t,e,i){"use strict";cc._RF.push(e,"d9ff9AXm9hFEpdxsArFgTnl","constants"),i.__esModule=!0,i.default=void 0;i.default={DEBUG:{TEST_LEVEL:null,SKIP_SELECTION_POPUP:!1,FEEDING_ENVIRONMENT:!1},FORCE_ENABLE_QA:!0,IPAD_RATIO:.75,MAX_BOOSTER_SELECTION:3,TIME_SPAN:{ONE_SECOND:1e3,ONE_MINUTE:6e4,ONE_HOUR:36e5,ONE_DAY:864e5},GAMEPLAY:{TILE_SIZE:256,ITEM_SIZE:200,DYNAMIC_USER_INTERACTION:!0,ITEM_SCALE:1.28*.9,BOOSTER_SCALE:2,NO_MOVE_DETECTION_DELAY:2e3,HINT_DELAY:6e3,NO_MOVE_FIX_DURATION:1.5,GRAVITY:9.80665/20*2/1,LOGIC_UPDATE_INTERVAL:25,ITEM_SWITCH_DURATION:.1,ITEM_EXPLODE_DURATION:.03,ITEM_TRANSFORM_DURATION:.4,ITEMS_GATHERING_DURATION:.2,POWERUP_SPAWN_DURATION:.3,BOMB_EXPLOSION_DURATION:.4,BOMB_RADIUS:2,MISSILE_VELOCITY:6e3,BOOSTER_PROJECTILE_VELOCITY:3e3,DISCOBALL_DELAY_BETWEEN_ITEMS:75,SNIPER_SPEED:2e3,SNIPER_ROTATION_SPEED:100,SNIPER_EXPLOSION_DURATION:200,SNIPER_TAKE_OFF_DURATION:150,DISCO_PULSE_SPEED:200,DISCO_PULSE_SCALE:5,DISCO_GLOW_APPEARANCE_DURATION:200,RAY_OF_LIGHT_SCALE:1/6,GROUP_TYPE_PRIORITY:{three:1,four_v:2,four_h:2,square:3,cross:4,five:5},GROUP_TYPE_POWERUP:{four_v:"missiles1",four_h:"missiles2",square:"sniper",cross:"bomb",five:"discoball"},GAME_ITEM_TYPE:{basic1:"basic1",basic2:"basic2",basic3:"basic3",basic4:"basic4",basic5:"basic5",missiles1:"missiles1",missiles2:"missiles2",discoball:"discoball",sniper:"sniper",bomb:"bomb"},ITEM_SHATTER_COLOR:{basic1:"red",basic2:"yellow",basic3:"green",basic4:"blue",basic5:"purple",blocker1a:"purple",blocker1b:"purple",missiles1:"purple",missiles2:"purple",discoball:"purple",sniper:"purple",bomb:"blue"},Z_INDEX:{BACKGROUND:0,UNDERLAY_ITEM1:1,UNDERLAY_ITEM2:2,UNDERLAY_ITEM3:3,UNDERLAY_ITEM4:4,UNDERLAY_ITEM5:5,BLOCKER_ITEM:6,ITEM:7,BORDER:8,BOTTLES_AND_JARS:9,FLYING_MISSILE:10,DISCOBALL_ROTATING:11,DISOBALL_RAY_OF_LIGHT:12,FLYING_SNIPER:13,ITEM_SHATTER:14,CRATE_EXPLOSION:15,EXPLODING_BOMB:16,BOOSTER_PROJECTILE:17},SPINE_NAMES:{rocketSkinRight:"Rocket_Right",rocketSkinLeft:"Rocket_Left",rocketSkinUp:"Rocket_Up",rocketSkinDown:"Rocket_Down"}}},e.exports=i.default,cc._RF.pop()},{}],development:[function(t,e,i){"use strict";cc._RF.push(e,"0a38deU6XNDLInbRruXSMO0","development"),i.__esModule=!0,i.levelsOrder=i.default=void 0;var a,o=(a=t("./types.js"))&&a.__esModule?a:{default:a},s=o.default.O,n=o.default.r,r=o.default.y,l=o.default.g,c=o.default.b,h=o.default.p,d=o.default.R,u=o.default.A,p=o.default.B,m=o.default.D,f=o.default.M,g=o.default.m,y=o.default.s,b=o.default.x,v=o.default.X,C=o.default.z,S=o.default.a,w=o.default.c,B=o.default.d,I=o.default.e,x=o.default.f,F=o.default.h,k=o.default.i,_=o.default.j,T=o.default.k,N=o.default.l,M=o.default.n,O=o.default.o,P=o.default.q,E=o.default.u,R=o.default.v,L=o.default.w,D=o.default.C,A=o.default.E,j=o.default.F,U=o.default.G,Y=o.default.H,X=o.default.t,G=o.default.I,q=o.default.J,V=o.default.K,H=o.default.L,z=o.default.N,W=o.default.P,J=o.default.Q,Q=o.default.S,Z=o.default.\u00d2,K=o.default.\u00d3,$=o.default.\u00d4,tt=o.default.\u00d5,et=o.default.\u00d6;o.default.T,o.default.U,i.levelsOrder=["d14","d15","d16","d17","d18","d19","d20"];var it={d1:{objectives:[{type:b,amount:15},{type:X,amount:9}],rewards:{supply:"bed"},turns:30,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,C,d,d,d,d,d,C,s],[C,C,d,d,d,d,d,C,C],[d,d,d,d,d,d,d,d,d],[s,d,d,d,C,d,d,d,s],[s,d,d,d,d,d,d,d,s],[d,d,d,d,d,d,d,d,d],[d,d,C,C,d,C,C,d,d],[X,X,X,X,X,X,X,X,X],[s,d,C,C,d,C,C,d,s]]},d2:{objectives:[{type:b,amount:42}],rewards:{supply:"swing"},turns:30,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C],[C,C,C,s,s,s,C,C,C],[C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C]]},d3:{objectives:[{type:p,amount:10},{type:y,amount:10},{type:m,amount:5}],rewards:{supply:"tent"},turns:30,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d],[d,d,d,d,d,d,d,d,d]]},d4:{objectives:[{type:c,amount:40},{type:r,amount:40}],rewards:{supply:"pot"},turns:15,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[n,r,l,c,r,c,l,r,n],[r,l,c,r,l,r,c,n,l],[l,l,r,c,n,l,r,l,r],[n,c,r,n,r,l,n,c,n],[c,r,c,l,l,n,l,r,l],[n,n,r,l,r,c,r,n,n],[l,r,l,c,n,r,c,n,c],[c,c,l,r,c,l,r,l,r],[n,r,n,c,n,n,r,l,c]]},d5:{objectives:[{type:h,amount:8},{type:n,amount:20}],rewards:{supply:"cushionBlue"},turns:22,spawnPattern:[h,h,d,d,d,d,d,h,h],pattern:[[h,h,s,s,s,s,s,h,h],[h,s,s,s,s,s,s,s,h],[s,s,l,c,n,n,c,s,s],[s,s,c,r,r,l,r,s,s],[s,s,c,c,y,n,c,s,s],[s,s,n,r,n,r,l,s,s],[s,s,n,n,l,c,c,s,s],[h,s,s,s,s,s,s,s,h],[h,h,s,s,s,s,s,h,h]]},d14:{isDebug:!0,objectives:[{type:S,amount:9},{type:k,amount:9},{type:N,amount:9}],turns:999,spawnPattern:[u,u,u,u,u,u,u,u,u],pattern:[[S,I,P,c,n,r,N,k,b],[S,I,P,r,l,c,N,k,b],[S,I,P,c,n,m,N,k,b],[S,I,P,r,l,c,N,k,b],[S,I,P,m,n,r,N,k,b],[w,x,E,r,l,c,M,_,v],[w,x,E,c,n,r,M,_,v],[B,F,R,r,l,c,O,T,C],[B,F,R,c,n,r,O,T,C]]},d15:{isDebug:!0,objectives:[{type:L,amount:15}],turns:999,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,s,l,c,r,c,l,s,s],[s,l,c,r,l,r,c,n,s],[D,l,r,c,n,l,r,l,D],[D,c,r,n,r,l,n,c,D],[D,r,c,l,l,n,l,r,D],[D,D,D,D,D,D,D,D,D],[l,r,l,c,n,r,c,n,c],[c,c,l,r,c,l,r,l,r]]},d16:{isDebug:!0,objectives:[{type:L,amount:9},{type:A,amount:63}],turns:35,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[c,r,l,c,r,r,l,r,c],[l,l,c,l,r,c,r,r,l],[D,D,D,D,D,D,D,D,D],[r,l,r,c,n,l,r,l,r],[n,c,r,n,r,g,n,c,c],[c,r,c,l,f,n,l,r,l],[c,r,l,c,r,c,l,r,c],[l,l,c,r,p,r,p,n,l],[f,l,r,c,n,l,r,l,r]],underlayPattern:[[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j]]},d17:{isDebug:!0,objectives:[{type:U,amount:100}],turns:35,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[U,r,l,c,r,y,l,r,U],[U,l,c,r,l,r,c,r,U],[U,l,r,c,n,l,r,l,U],[n,c,r,g,r,l,n,c,n],[l,r,c,g,l,y,l,r,l],[n,c,r,g,r,l,n,c,n],[l,r,l,g,n,r,c,n,c],[c,c,l,r,c,l,r,l,r],[U,U,U,U,U,U,U,U,U]]},d18:{isDebug:!0,objectives:[{type:r,amount:20},{type:G,amount:24},{type:b,amount:1}],turns:999,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[r,r,l,c,r,r,l,r,l],[c,l,c,r,l,r,c,r,c],[l,l,r,c,b,l,r,l,r],[n,c,r,n,r,l,n,c,n],[l,Y,Y,l,c,r,c,r,l],[n,Y,Y,c,r,r,c,r,r],[l,Y,Y,c,Y,Y,Y,Y,c],[c,Y,Y,l,Y,Y,Y,Y,r],[l,l,r,c,n,l,r,l,r]]},d19:{isDebug:!0,objectives:[{type:Z,amount:5},{type:K,amount:5},{type:$,amount:5},{type:tt,amount:5},{type:et,amount:4}],turns:999,spawnPattern:[u,u,u,u,u,u,u,u,u],pattern:[[r,r,l,c,r,r,l,r,l],[c,l,c,r,l,r,c,l,c],[r,r,l,c,r,c,l,r,l],[n,z,z,n,c,l,J,J,n],[r,z,z,c,r,r,J,J,l],[c,H,W,r,l,r,H,H,c],[c,H,W,r,l,c,W,W,c],[l,z,J,c,b,l,Q,Q,r],[l,W,H,c,n,l,Q,Q,r]]},d20:{isDebug:!0,objectives:[{type:G,amount:21},{type:A,amount:13}],turns:999,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[r,r,l,c,r,r,l,r,l],[c,l,c,r,l,r,c,r,c],[l,q,V,q,q,q,V,l,r],[n,c,r,n,r,l,n,c,n],[l,q,q,q,q,q,q,V,l],[r,q,V,c,r,Y,Y,r,l],[c,l,c,r,l,Y,Y,r,c],[l,c,l,c,c,l,r,l,r],[l,c,l,c,n,l,r,l,r]],underlayPattern:[[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,j,j,j,j,j,j,j,s],[s,j,j,s,s,j,j,s,s],[s,s,s,s,s,j,j,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s]]},d999991:{isDebug:!0,objectives:[{type:S,amount:9},{type:k,amount:9},{type:N,amount:9}],turns:999,spawnPattern:[u,u,u,u,u,u,u,u,u],pattern:[[S,I,P,c,n,r,N,k,b],[S,I,P,r,l,c,N,k,b],[S,I,P,c,n,m,N,k,b],[S,I,P,r,l,c,N,k,b],[S,I,P,m,n,r,N,k,b],[w,x,E,r,l,c,M,_,v],[w,x,E,c,n,r,M,_,v],[B,F,R,r,l,c,O,T,C],[B,F,R,c,n,r,O,T,C]]},d999992:{isDebug:!0,objectives:[{type:n,amount:9999},{type:r,amount:9999},{type:l,amount:9999}],turns:999,spawnPattern:[u,u,u,u,u,u],pattern:[[u,u,u,u,u,u],[u,C,C,C,C,u],[u,C,C,C,C,u],[u,C,C,C,C,u],[u,C,C,C,C,u],[u,u,u,u,u,u]]},d999993:{isDebug:!0,objectives:[{type:n,amount:9999},{type:r,amount:9999},{type:l,amount:9999}],turns:999,spawnPattern:[u,u,u,u,u,u],pattern:[[u,u,u,u,u,u],[C,C,C,C,C,C],[C,C,C,C,C,C],[C,C,C,C,C,C],[C,C,C,C,C,C],[C,C,C,C,C,C]]},d999994:{isDebug:!0,objectives:[{type:L,amount:9},{type:A,amount:63}],turns:35,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[c,r,l,c,r,r,l,r,c],[l,l,c,l,r,c,r,r,l],[D,D,D,D,D,D,D,D,D],[r,l,r,c,n,l,r,l,r],[n,c,r,n,r,g,n,c,c],[c,r,c,l,f,n,l,r,l],[c,r,l,c,r,c,l,r,c],[l,l,c,r,p,r,p,n,l],[f,l,r,c,n,l,r,l,r]],underlayPattern:[[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j]]},d999995:{isDebug:!0,objectives:[{type:l,amount:500}],turns:999,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[r,r,l,c,r,n,l,r,l],[c,l,n,r,l,r,c,n,c],[n,n,l,c,n,c,l,r,l],[l,r,l,c,r,n,l,r,l],[l,D,D,D,D,D,D,D,c],[n,n,n,c,n,c,l,l,l],[r,r,l,c,r,n,f,r,l],[c,l,n,r,l,r,c,n,c],[n,n,l,c,n,c,l,r,l]]},d999990:{isDebug:!0,objectives:[{type:K,amount:100}],turns:999,spawnPattern:[u,u,u,u,u,u,u,u,u],pattern:[[y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y],[r,r,l,c,r,c,l,r,l],[n,z,z,n,c,l,J,J,n],[r,z,z,c,r,r,J,J,l],[c,H,W,r,l,r,H,H,c],[c,H,W,r,l,c,W,W,c],[l,z,J,c,b,l,Q,Q,r],[l,W,H,c,n,l,Q,Q,r]]}};i.default=it,cc._RF.pop()},{"./types.js":"types"}],helpers:[function(t,e,i){"use strict";var a;cc._RF.push(e,"b60edYhHv5Jr7wV/brGUH7+","helpers"),i.__esModule=!0,i.default=void 0;var o=((a=t("./constants"))&&a.__esModule?a:{default:a}).default.TIME_SPAN,s={removeFromArray:function(t,e){var i=e.indexOf(t);-1===i&&console.error("removeFromArray: element is not part of array",t,e),e.splice(i,1)},getAngleFromVector:function(t,e){var i=180*Math.atan2(-e,t)/Math.PI;return(450+Math.round(i))%360},getVectorFromAngleAndLength:function(t,e){return t=t*Math.PI/180,{x:e*Math.sin(t),y:e*Math.cos(t)}},createSprite:function(t){var e=t.spriteFrame,i=t.view,a=t.width,o=t.height,s=t.scale,n=t.x,r=t.y,l=t.zIndex,c=t.angle,h=new cc.Node;return h.addComponent(cc.Sprite).spriteFrame=e,void 0!==i&&i.addChild(h),void 0!==l&&(h.zIndex=l),void 0!==a&&(h.width=a),void 0!==o&&(h.height=o),void 0!==s&&(h.scale=s),void 0!==n&&(h.x=n),void 0!==r&&(h.y=r),void 0!==c&&(h.angle=c),h},shuffleArray:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),a=[t[i],t[e]];t[e]=a[0],t[i]=a[1]}},generatePatternWithoutMatch:function(t,e){for(var i=[],a=0;a<e;a++){i[a]=[];for(var o=0;o<e;o++){var s={r:!0,y:!0,g:!0,b:!0};o>1&&i[a][o-2]===i[a][o-1]&&delete s[i[a][o-2]],a>1&&i[a-2][o]==i[a-2][o]&&delete s[i[a-2][o]];var n=Object.keys(s),r=n[Math.floor(Math.random()*n.length)];i[a][o]=r}}return i},lerp:function(t,e,i){return(1-i)*t+i*e},deepCopy:function(t){try{return JSON.parse(JSON.stringify(t))}catch(e){return console.error("Unable to deep copy item",t,e),null}},formatTimeString:function(t){var e=Math.floor(t/o.ONE_HOUR),i=t-e*o.ONE_HOUR,a=Math.floor(i/o.ONE_MINUTE);i=t-a*o.ONE_MINUTE;var s=Math.floor(i/o.ONE_SECOND),n=function(t){return String(t).padStart(2,"0")};return n(e)+":"+n(a)+":"+n(s)}};i.default=s,e.exports=i.default,cc._RF.pop()},{"./constants":"constants"}],levelModel:[function(t,e,i){"use strict";cc._RF.push(e,"14851boWtxHeookXTtppg2M","levelModel"),i.__esModule=!0,i.default=void 0;var a,o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var n=a?Object.getOwnPropertyDescriptor(t,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}(t("../staticData/levels/levels"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}function r(){return o.levelsOrder}function l(t,e){if(!e)return null;var i=n({},e,{id:t});return c(i),i.levelNumber=o.levelsOrder.indexOf(t)+1,i}function c(t){for(var e=Math.max.apply(Math,t.pattern.map(function(t){return t.length}));t.spawnPattern.length<e;)t.spawnPattern.push(["basic1","basic2","basic3","basic4"])}var h={getLevel:function(t){return(a=a||{})[t]=a[t]||l(t,o.default[t]),a[t]},getLevelMap:r,hasNextLevel:function(t){var e=r(),i=e.indexOf(t);return i>=0&&i<e.length-1}};i.default=h,e.exports=i.default,cc._RF.pop()},{"../staticData/levels/levels":"levels"}],levels:[function(t,e,i){"use strict";cc._RF.push(e,"e14e8nGZn5OSbJDuo5kV6Sr","levels"),i.__esModule=!0,i.levelsOrder=i.default=void 0;var a,o=n(t("./main.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var n=a?Object.getOwnPropertyDescriptor(t,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}n(t("./development.js")),(a=t("./types.js"))&&a.__esModule;var l=[].concat(o.levelsOrder);i.levelsOrder=l;var c=r({},o.default);i.default=c,cc._RF.pop()},{"./development.js":"development","./main.js":"main","./types.js":"types"}],main:[function(t,e,i){"use strict";cc._RF.push(e,"8e97aiUaPNNZLM6thB+34SV","main"),i.__esModule=!0,i.levelsOrder=i.default=void 0;var a,o=(a=t("./types.js"))&&a.__esModule?a:{default:a},s=o.default.O,n=o.default.r,r=o.default.y,l=o.default.g,c=o.default.b,h=o.default.p,d=o.default.R,u=(o.default.A,o.default.B),p=(o.default.D,o.default.M,o.default.m),m=o.default.s,f=o.default.x,g=o.default.X,y=o.default.z,b=(o.default.a,o.default.c,o.default.d,o.default.e,o.default.f,o.default.h,o.default.i,o.default.j,o.default.k,o.default.l,o.default.n,o.default.o,o.default.q,o.default.u,o.default.v,o.default.w),v=o.default.C,C=o.default.E,S=o.default.F,w=o.default.G,B=o.default.H,I=o.default.t,x=o.default.I,F=o.default.J,k=o.default.K,_=o.default.L,T=o.default.N,N=o.default.P,M=o.default.Q,O=(o.default.S,o.default.\u00d2),P=o.default.\u00d3,E=o.default.\u00d4,R=o.default.\u00d5,L=(o.default.\u00d6,o.default.T,o.default.U);i.levelsOrder=["t1","t2","t3","t4","t5","1","2","3","4","5","6","7","8","9","10","t101","t102","t103","t104","t105","t106","t107","t108","t109","t110","t111","t112","t113","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28"];var D={t1:{objectives:[{type:r,amount:15}],rewards:{star:1,coin:100},turns:15,spawnPattern:[d,d,d,d,d,d,d],pattern:[[r,n,r,n,c,l,n],[n,r,l,c,r,l,c],[n,c,n,r,l,n,r],[l,n,c,r,l,r,n],[r,l,n,l,n,c,l],[c,r,c,n,c,l,r],[r,c,l,r,r,n,n]]},t2:{objectives:[{type:c,amount:18},{type:n,amount:18}],rewards:{star:1,coin:100},turns:20,spawnPattern:[d,d,{sequence:[c,l,n,r,n,c,l,r,c,d]},d,{sequence:[n,d]},{sequence:[r,d]},{sequence:[r,c,l,d]},d],pattern:[[r,n,r,r,c,n,n,r],[n,l,l,n,n,l,c,l],[l,r,c,r,l,c,l,n],[r,n,r,l,r,r,n,l],[l,c,n,c,n,l,l,c],[l,r,c,l,r,c,l,r],[c,l,n,c,l,r,r,c],[c,n,c,r,c,n,l,r]]},t3:{objectives:[{type:r,amount:30},{type:c,amount:20}],rewards:{star:1,coin:100},turns:20,spawnPattern:[d,d,{sequence:[r,l,l,r,c,d]},{sequence:[c,n,c,n,c,r,d]},{sequence:[n,c,n,r,c,n,l,r,d]},{sequence:[l,n,n,r,n,r,l,c,l,l,d]},{sequence:[c,n,r,n,l,n,l,d]},d,d],pattern:[[r,l,l,n,c,l,l,r,l],[n,c,l,n,r,n,c,n,c],[c,r,n,l,c,l,r,c,n],[r,c,c,r,n,l,r,c,r],[l,n,c,l,l,n,l,n,c],[r,r,l,n,n,r,n,r,r],[c,n,l,l,r,l,c,l,c],[l,c,c,n,c,r,l,r,n],[r,n,r,c,l,l,n,c,c]]},t4:{objectives:[{type:h,amount:7}],rewards:{star:1,coin:100},turns:20,spawnPattern:[h,h,d,{sequence:[n,l,n,d]},{sequence:[r,l,r,d]},{sequence:[n,l,d]},d,h,h],pattern:[[h,h,s,s,s,s,s,h,h],[h,s,s,s,s,s,s,s,h],[s,s,r,c,n,n,c,s,s],[s,s,c,r,l,r,n,s,s],[s,s,c,r,r,l,c,s,s],[s,s,n,c,l,r,n,s,s],[s,s,n,n,l,l,c,s,s],[h,s,s,s,s,s,s,s,h],[h,h,s,s,s,s,s,h,h]]},t5:{objectives:[{type:n,amount:60},{type:c,amount:30}],rewards:{star:1,coin:100},turns:25,spawnPattern:[d,d,{sequence:[r,d]},{sequence:[n,d]},d,{sequence:[n,d]},{sequence:[c,d]},d,d],pattern:[[s,s,n,c,c,r,l,s,s],[s,n,l,r,r,l,n,c,s],[n,c,n,c,n,l,r,l,r],[c,r,l,n,r,c,l,n,c],[r,n,r,r,l,r,r,n,r],[n,l,n,n,l,n,l,r,c],[c,l,c,r,n,r,n,c,l],[s,r,r,l,c,r,n,r,s],[s,s,c,r,l,n,c,s,s]]},1:{objectives:[{type:f,amount:35}],rewards:{star:1,coin:100},turns:16,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[l,c,l,c,n,n,s,s,s],[l,n,n,l,c,c,s,s,s],[n,l,c,n,n,l,s,s,s],[f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f],[s,s,s,r,c,l,c,n,f],[s,s,s,r,l,n,l,n,f],[s,s,s,f,f,f,f,f,f]]},2:{objectives:[{type:I,amount:44},{type:f,amount:36}],rewards:{star:1,coin:100},turns:24,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[g,g,I,I,I,I,I,g,g],[g,g,I,I,I,I,I,g,g],[g,g,I,I,I,I,I,g,g],[g,g,I,I,I,I,I,g,g],[g,g,I,I,u,I,I,g,g],[g,g,I,I,I,I,I,g,g],[g,g,I,I,I,I,I,g,g],[g,g,I,I,I,I,I,g,g],[g,g,I,I,I,I,I,g,g]]},3:{objectives:[{type:f,amount:18}],rewards:{star:1,coin:100},turns:25,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[y,n,c,r,l,n,r,n,y],[y,r,r,n,s,r,c,r,y],[y,l,r,c,s,r,c,r,y],[y,n,c,c,s,l,n,l,y],[y,n,n,l,s,n,c,c,y],[y,l,r,l,s,r,l,r,y],[y,c,n,n,s,c,l,n,y],[y,n,c,c,s,c,n,n,y],[y,n,l,c,s,r,n,r,y]]},4:{objectives:[{type:I,amount:27},{type:f,amount:18}],rewards:{star:1,coin:100},turns:22,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[n,c,n,g,g,g,r,l,r],[c,n,n,g,g,g,l,r,c],[r,m,c,g,g,g,l,m,r],[n,r,n,g,g,g,n,c,n],[s,s,s,g,g,g,s,s,s],[s,s,s,g,g,g,s,s,s],[I,I,I,I,I,I,I,I,I],[I,I,I,I,I,I,I,I,I],[I,I,I,I,I,I,I,I,I]]},5:{objectives:[{type:I,amount:8},{type:f,amount:9}],rewards:{star:1,coin:100},turns:15,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,s,s,s,I,s,s,s,s],[s,s,s,r,I,r,s,s,s],[s,s,l,l,I,c,c,s,s],[s,r,n,l,I,c,n,n,s],[y,c,l,n,I,r,c,n,y],[s,y,l,l,I,n,c,y,s],[s,s,y,l,I,c,y,s,s],[s,s,s,y,I,y,s,s,s],[s,s,s,s,y,s,s,s,s]]},6:{objectives:[{type:I,amount:10},{type:f,amount:18}],rewards:{star:2,coin:120},turns:22,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[n,r,l,c,s,c,l,r,n],[r,l,c,r,s,r,c,n,l],[I,r,l,l,s,c,c,r,I],[I,r,n,l,s,c,n,n,I],[I,c,l,n,I,r,c,n,I],[I,c,l,l,I,n,c,r,I],[s,s,s,s,s,s,s,s,s],[f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f]]},7:{objectives:[{type:f,amount:32}],rewards:{star:2,coin:120},turns:24,spawnPattern:[d,d,d,d,d,d,d,d],pattern:[[r,n,l,c,g,g,g,g],[c,r,r,c,g,g,g,g],[l,n,c,n,g,g,g,g],[r,c,n,r,g,g,g,g],[y,y,y,y,n,n,c,n],[y,y,y,y,r,c,r,c],[y,y,y,y,l,r,l,r],[y,y,y,y,c,l,r,r]]},8:{objectives:[{type:I,amount:6},{type:f,amount:12}],rewards:{star:2,coin:120},turns:20,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,s,g,s,I,s,g,s,s],[s,s,g,s,I,s,g,s,s],[s,n,g,l,I,c,g,l,s],[s,r,g,l,I,c,g,n,s],[s,c,g,n,I,r,g,n,s],[s,l,g,l,I,n,g,c,s],[s,s,s,s,s,s,s,s,s],[r,n,r,n,n,r,c,n,c],[s,c,n,l,l,c,n,c,s]]},9:{objectives:[{type:I,amount:28},{type:C,amount:28}],rewards:{star:2,coin:120},turns:25,spawnPattern:[L,L,L,L,L,L,L,L,L],pattern:[[s,s,I,I,s,I,I,s,s],[I,I,I,I,s,I,I,I,I],[I,I,I,I,s,I,I,I,I],[I,I,I,I,s,I,I,I,I],[s,s,s,s,s,s,s,s,s],[n,c,r,r,n,h,h,c,h],[n,n,h,r,r,h,c,h,c],[r,h,n,h,h,n,c,n,r],[h,c,h,r,r,c,h,h,r]],underlayPattern:[[s,s,C,C,s,C,C,s,s],[C,C,C,C,s,C,C,C,C],[C,C,C,C,s,C,C,C,C],[C,C,C,C,s,C,C,C,C],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s]]},10:{objectives:[{type:I,amount:26},{type:C,amount:26},{type:f,amount:28}],rewards:{star:2,coin:120},turns:22,spawnPattern:[L,L,L,L,L,L,L,L,L],pattern:[[I,I,I,s,s,s,I,I,I],[I,f,f,h,h,n,f,f,I],[I,f,f,r,h,h,f,f,I],[I,f,f,c,n,h,f,f,I],[I,f,f,n,h,c,f,f,I],[I,f,f,r,r,h,f,f,I],[I,f,f,c,n,r,f,f,I],[I,f,f,c,n,n,f,f,I],[I,I,I,s,s,s,I,I,I]],underlayPattern:[[C,C,C,s,s,s,C,C,C],[C,s,s,s,s,s,s,s,C],[C,s,s,s,s,s,s,s,C],[C,s,s,s,s,s,s,s,C],[C,s,s,s,s,s,s,s,C],[C,s,s,s,s,s,s,s,C],[C,s,s,s,s,s,s,s,C],[C,s,s,s,s,s,s,s,C],[C,C,C,s,s,s,C,C,C]]},11:{objectives:[{type:f,amount:14},{type:b,amount:23},{type:w,amount:40}],rewards:{star:2,coin:120},turns:22,spawnPattern:[d,d,d,d,d,d,d],pattern:[[l,l,c,l,c,c,r],[f,f,f,f,f,f,f],[f,f,f,f,f,f,f],[b,b,b,b,b,b,b],[b,b,b,b,b,b,b],[w,b,b,b,b,b,w],[s,w,b,b,b,w,s],[s,s,w,b,w,s,s],[s,s,s,w,s,s,s]]},12:{objectives:[{type:I,amount:36},{type:x,amount:21}],rewards:{star:2,coin:120},turns:24,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,s,r,c,l,c,c,s,s],[r,r,l,l,c,n,n,r,n],[I,I,I,I,I,I,I,I,I],[s,F,F,F,F,F,F,k,s],[I,I,I,I,I,I,I,I,I],[s,F,F,F,F,F,F,k,s],[I,I,I,I,I,I,I,I,I],[s,F,F,F,F,F,F,k,s],[I,I,I,I,I,I,I,I,I]]},13:{objectives:[{type:f,amount:48},{type:w,amount:50}],rewards:{star:2,coin:120},turns:25,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,g,f,f,n,f,f,g,s],[s,g,f,f,n,f,f,g,s],[s,g,f,f,c,f,f,g,s],[s,g,f,f,n,f,f,g,s],[w,g,f,f,r,f,f,g,w],[w,g,f,f,l,f,f,g,w],[w,g,f,f,r,f,f,g,w],[w,g,f,f,r,f,f,g,w],[w,w,w,s,s,s,w,w,w]]},14:{objectives:[{type:f,amount:36},{type:x,amount:36}],rewards:{star:2,coin:120},turns:24,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,s,g,g,l,g,g,s,s],[s,s,f,f,l,f,f,s,s],[B,B,f,f,n,f,f,B,B],[B,B,f,f,l,f,f,B,B],[B,B,f,f,r,f,f,B,B],[B,B,f,f,c,f,f,B,B],[B,B,f,f,r,f,f,B,B],[B,B,f,f,c,f,f,B,B],[s,s,g,g,c,g,g,s,s]]},15:{objectives:[{type:I,amount:24},{type:x,amount:18},{type:b,amount:20}],rewards:{star:2,coin:120},turns:30,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,s,n,r,r,c,c,l,c],[s,s,B,B,I,I,I,I,n],[s,s,B,B,I,I,I,I,n],[v,b,I,I,B,B,I,I,r],[v,b,I,I,B,B,I,I,n],[v,b,I,I,I,I,B,B,r],[v,b,I,I,I,I,B,B,r],[v,b,b,b,b,b,s,s,s],[v,b,b,b,b,b,s,s,s]]},16:{objectives:[{type:f,amount:35},{type:C,amount:24},{type:x,amount:24},{type:w,amount:30}],rewards:{star:2,coin:150},turns:36,spawnPattern:[L,L,L,L,L,L,L,L,L],pattern:[[r,r,n,r,h,c,c,n,c],[h,c,h,h,r,n,h,r,n],[f,f,f,f,f,f,f,f,f],[B,B,B,B,f,B,B,B,B],[B,B,B,B,f,B,B,B,B],[s,s,s,s,s,s,s,s,s],[f,f,f,f,w,f,f,f,f],[f,f,f,f,w,f,f,f,f],[f,f,f,f,w,f,f,f,f]],underlayPattern:[[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[C,C,C,C,s,C,C,C,C],[C,C,C,C,s,C,C,C,C],[C,C,C,C,s,C,C,C,C]]},17:{objectives:[{type:O,amount:4},{type:P,amount:4},{type:E,amount:4},{type:R,amount:4},{type:f,amount:53}],rewards:{star:2,coin:150},turns:22,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[_,T,f,n,r,n,f,_,T],[N,M,f,n,n,l,f,N,M],[g,f,f,c,r,l,f,f,g],[g,f,f,n,r,c,f,f,g],[g,f,f,f,f,f,f,f,g],[g,f,f,f,f,f,f,f,g],[g,f,f,f,f,f,f,f,g],[_,T,f,f,f,f,f,_,T],[N,M,g,g,g,g,g,N,M]]},18:{objectives:[{type:O,amount:2},{type:P,amount:2},{type:E,amount:2},{type:R,amount:2},{type:x,amount:44}],rewards:{star:2,coin:150},turns:22,spawnPattern:[d,d,d,d,d,d,d,d],pattern:[[B,B,n,l,n,n,B,B],[B,B,l,n,r,n,B,B],[B,B,l,l,n,r,B,B],[B,B,n,l,l,n,B,B],[B,B,c,c,r,r,B,B],[B,B,n,r,c,n,B,B],[F,F,F,F,F,F,F,k],[s,s,_,T,_,T,s,s],[s,s,N,M,N,M,s,s]]},19:{objectives:[{type:f,amount:32},{type:C,amount:32},{type:b,amount:9},{type:w,amount:40}],rewards:{star:2,coin:150},turns:28,spawnPattern:[L,L,L,L,L,L,L,L,L],pattern:[[w,f,f,f,f,c,r,r,b],[w,f,f,f,f,n,c,r,b],[w,f,f,f,f,h,c,n,b],[w,f,f,f,f,c,h,r,b],[s,s,s,s,s,h,n,h,b],[w,f,f,f,f,h,r,n,b],[w,f,f,f,f,n,c,n,b],[w,f,f,f,f,n,c,c,b],[w,f,f,f,f,r,n,c,b]],underlayPattern:[[s,S,S,S,S,s,s,s,s],[s,C,C,C,C,s,s,s,s],[s,C,C,C,C,s,s,s,s],[s,C,C,C,C,s,s,s,s],[s,s,s,s,s,s,s,s,s],[s,C,C,C,C,s,s,s,s],[s,C,C,C,C,s,s,s,s],[s,C,C,C,C,s,s,s,s],[s,S,S,S,S,s,s,s,s]]},20:{objectives:[{type:I,amount:6},{type:b,amount:36},{type:x,amount:24}],rewards:{star:2,coin:150},turns:28,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[I,c,r,c,r,c,r,c,I],[I,r,c,r,c,r,c,r,I],[I,c,r,c,r,c,r,c,I],[b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b],[B,B,B,B,s,B,B,B,B],[B,B,B,B,s,B,B,B,B]]},21:{objectives:[{type:I,amount:27},{type:b,amount:36}],rewards:{star:2,coin:150},turns:26,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[r,c,c,r,c,r,r,c,c],[I,I,I,I,I,I,I,I,I],[I,I,I,I,I,I,I,I,I],[I,I,I,I,I,I,I,I,I],[n,n,l,n,l,l,n,l,l],[b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b],[v,v,v,v,v,v,v,v,v]]},22:{objectives:[{type:O,amount:8},{type:P,amount:8},{type:E,amount:8},{type:R,amount:8},{type:f,amount:16}],rewards:{star:2,coin:150},turns:20,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[_,T,g,c,c,n,g,_,T],[N,M,g,n,c,n,g,N,M],[_,T,g,r,l,l,g,_,T],[N,M,g,r,n,n,g,N,M],[_,T,g,n,c,l,g,_,T],[N,M,g,r,c,l,g,N,M],[_,T,g,l,r,n,g,_,T],[N,M,g,r,c,r,g,N,M]]},23:{objectives:[{type:f,amount:59},{type:w,amount:54}],rewards:{star:2,coin:150},turns:30,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,c,c,n,c,n,n,c,s],[s,g,f,f,f,f,f,g,s],[y,g,f,f,f,f,f,g,y],[y,g,f,f,f,f,f,g,y],[y,g,f,f,f,f,f,g,y],[y,g,f,f,f,f,f,g,y],[y,g,f,f,f,f,f,g,y],[s,g,f,f,f,f,f,g,s],[s,w,w,w,w,w,w,w,s]]},24:{objectives:[{type:O,amount:12},{type:P,amount:12},{type:I,amount:16},{type:b,amount:12}],rewards:{star:2,coin:150},turns:28,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[b,_,T,I,n,I,_,T,b],[b,T,_,I,r,I,T,_,b],[s,s,s,I,n,I,s,s,s],[b,_,T,I,n,I,_,T,b],[b,T,_,I,r,I,T,_,b],[s,s,s,I,r,I,s,s,s],[b,_,T,I,n,I,_,T,b],[b,T,_,I,n,I,T,_,b]]},25:{objectives:[{type:I,amount:34},{type:b,amount:20},{type:w,amount:45},{type:C,amount:34}],rewards:{star:2,coin:150},turns:24,spawnPattern:[L,L,L,L,L,L,L,L,L],pattern:[[n,r,h,h,n,I,n,h,n],[n,h,r,r,c,c,r,c,h],[I,I,I,I,I,I,I,I,I],[I,I,I,I,I,I,I,I,I],[b,I,I,I,I,I,I,I,b],[b,b,I,I,I,I,I,b,b],[b,b,b,I,I,I,b,b,b],[b,b,b,b,I,b,b,b,b],[w,w,w,w,w,w,w,w,w]],underlayPattern:[[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C],[s,C,C,C,C,C,C,C,s],[s,s,C,C,C,C,C,s,s],[s,s,s,C,C,C,s,s,s],[s,s,s,s,C,s,s,s,s],[s,s,s,s,s,s,s,s,s]]},26:{objectives:[{type:O,amount:9},{type:P,amount:9},{type:E,amount:9},{type:R,amount:9},{type:I,amount:36}],rewards:{star:3,coin:180},turns:24,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[I,I,I,I,I,I,l,r,l],[I,I,I,I,I,I,r,l,r],[I,I,I,I,I,I,l,r,l],[_,T,_,T,_,T,I,I,I],[N,M,N,M,N,M,I,I,I],[_,T,_,T,_,T,I,I,I],[N,M,N,M,N,M,I,I,I],[_,T,_,T,_,T,I,I,I],[N,M,N,M,N,M,I,I,I]]},27:{objectives:[{type:x,amount:24},{type:I,amount:24},{type:w,amount:60}],rewards:{star:3,coin:180},turns:28,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[B,B,r,I,I,I,l,r,w],[B,B,l,I,I,I,r,c,w],[B,B,n,I,I,I,c,r,w],[B,B,l,I,I,I,r,n,w],[B,B,r,I,I,I,l,r,w],[B,B,r,I,I,I,r,c,w],[B,B,l,I,I,I,l,c,w],[B,B,r,I,I,I,n,l,w]]},28:{objectives:[{type:x,amount:24},{type:I,amount:21},{type:b,amount:18},{type:C,amount:49}],rewards:{star:3,coin:180},turns:24,spawnPattern:[L,L,L,L,L,L,L,L,L],pattern:[[b,n,r,r,h,r,n,h,b],[b,B,B,I,I,I,B,B,b],[b,B,B,I,I,I,B,B,b],[b,n,h,I,I,I,r,h,b],[b,c,c,I,I,I,h,r,b],[b,h,c,I,I,I,r,r,b],[b,B,B,I,I,I,B,B,b],[b,B,B,I,I,I,B,B,b],[b,n,r,n,c,n,n,h,b]],underlayPattern:[[s,s,s,s,s,s,s,s,s],[s,C,C,C,C,C,C,C,s],[s,C,C,C,C,C,C,C,s],[s,C,C,C,C,C,C,C,s],[s,C,C,C,C,C,C,C,s],[s,C,C,C,C,C,C,C,s],[s,C,C,C,C,C,C,C,s],[s,C,C,C,C,C,C,C,s],[s,s,s,s,s,s,s,s,s]]},t101:{objectives:[{type:f,amount:54}],rewards:{star:1,coin:100},turns:28,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[r,l,c,c,n,r,r,c,n],[c,r,l,l,c,n,n,r,c],[n,l,l,c,l,r,r,c,n],[f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f]]},t102:{objectives:[{type:C,amount:45}],rewards:{star:2,coin:120},turns:24,spawnPattern:[L,L,L,L,L,L,L,L,L],pattern:[[c,h,c,c,n,r,r,c,n],[n,r,h,h,c,n,n,r,c],[h,h,r,c,h,r,r,c,n],[r,n,n,r,n,n,r,n,r],[r,n,c,r,c,c,n,h,r],[c,r,r,c,r,n,r,n,h],[h,n,n,h,r,n,n,c,h],[h,c,f,r,h,h,r,h,n]],underlayPattern:[[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s],[C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C],[s,s,s,s,s,s,s,s,s],[s,s,s,s,s,s,s,s,s]]},t103:{objectives:[{type:x,amount:24}],rewards:{star:2,coin:120},turns:20,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[r,l,c,c,n,r,r,c,n],[n,r,l,l,c,n,n,r,c],[c,l,B,B,l,B,B,c,n],[r,r,B,B,n,B,B,n,r],[c,l,n,r,l,l,n,c,c],[c,l,B,B,n,B,B,c,r],[r,c,B,B,n,B,B,n,r],[r,l,c,l,c,l,c,l,l],[c,r,c,r,l,r,l,n,r]]},t104:{objectives:[{type:w,amount:70}],rewards:{star:3,coin:150},turns:26,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[w,r,r,n,r,n,r,c,w],[w,r,c,l,c,n,n,r,w],[w,n,r,n,l,r,r,n,w],[w,r,l,r,n,c,n,n,w],[w,n,c,n,r,r,n,c,w],[w,n,n,l,r,l,l,n,w],[w,c,l,c,c,r,n,r,w],[w,c,c,n,c,r,c,l,w],[w,w,w,w,w,w,w,w,w]]},t105:{objectives:[{type:I,amount:54}],rewards:{star:3,coin:150},turns:22,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[I,I,I,s,s,s,I,I,I],[I,I,I,s,s,s,I,I,I],[I,I,I,l,c,r,I,I,I],[I,I,I,n,r,c,I,I,I],[I,I,I,l,r,c,I,I,I],[I,I,I,l,n,l,I,I,I],[I,I,I,c,r,c,I,I,I],[I,I,I,s,s,s,I,I,I],[I,I,I,s,s,s,I,I,I]]},t106:{objectives:[{type:O,amount:4},{type:P,amount:4},{type:E,amount:4},{type:R,amount:4}],rewards:{star:3,coin:150},turns:22,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,s,n,r,n,n,l,s,s],[s,s,I,r,c,l,c,s,s],[n,I,_,T,r,_,T,c,n],[r,r,N,M,n,N,M,n,c],[l,n,l,l,r,c,c,r,n],[r,n,_,T,r,_,T,l,r],[l,l,N,M,l,N,M,n,l],[s,s,l,r,n,r,I,s,s],[s,s,n,c,c,r,I,s,s]]},t107:{objectives:[{type:b,amount:76}],rewards:{star:3,coin:150},turns:30,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[p,b,b,b,b,b,b,b,p],[b,b,b,b,b,b,b,b,b],[b,b,b,b,u,b,b,b,b],[b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b],[b,b,p,b,b,b,p,b,b]]},t108:{objectives:[{type:f,amount:24}],rewards:{star:1,coin:100},mandatoryBoosters:{hammer:!0},bonusBoosters:{hammer:3},turns:24,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,r,l,r,n,l,n,c,s],[c,n,r,c,n,r,l,l,r],[f,f,f,f,f,f,f,f,f],[s,c,r,c,n,l,r,l,s],[s,s,s,f,f,f,s,s,s],[s,s,s,f,f,f,s,s,s],[s,s,s,f,f,f,s,s,s],[s,s,s,g,g,g,s,s,s],[s,s,s,g,g,g,s,s,s]]},t109:{objectives:[{type:f,amount:32},{type:x,amount:32}],rewards:{star:1,coin:100},mandatoryBoosters:{airplane:!0},bonusBoosters:{airplane:3},turns:24,spawnPattern:[d,d,d,d,d,d,d,d],pattern:[[r,c,l,r,c,l,n,c],[c,r,r,c,n,c,l,l],[f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f],[F,F,F,F,F,F,F,k],[f,f,f,f,f,f,f,f],[f,f,f,f,f,f,f,f],[B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B]]},t110:{objectives:[{type:f,amount:41},{type:x,amount:24}],rewards:{star:1,coin:100},mandatoryBoosters:{rocket:!0},bonusBoosters:{rocket:3},turns:24,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[f,f,f,f,f,f,f,f,f],[f,B,B,f,f,f,B,B,f],[f,B,B,f,f,f,B,B,f],[s,s,r,l,f,l,r,s,s],[s,s,r,c,f,r,l,s,s],[s,s,n,r,f,l,n,s,s],[f,B,B,f,f,f,B,B,f],[f,B,B,f,f,f,B,B,f],[f,f,f,f,f,f,f,f,f]]},t111:{objectives:[{type:f,amount:39},{type:x,amount:33}],rewards:{star:2,coin:120},mandatoryBoosters:{wheel:!0},bonusBoosters:{wheel:3},turns:28,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,B,B,f,l,f,B,B,s],[f,B,B,l,c,l,B,B,f],[f,f,l,l,c,l,l,f,f],[f,f,f,c,l,c,f,f,f],[f,f,f,f,l,f,f,f,f],[F,F,F,F,F,F,F,F,k],[f,f,f,f,f,f,f,f,f],[f,B,B,f,f,f,B,B,f],[s,B,B,f,f,f,B,B,s]]},t112:{objectives:[{type:x,amount:24},{type:w,amount:40},{type:l,amount:60}],rewards:{star:2,coin:120},mandatoryBoosters:{fairystick:!0},bonusBoosters:{fairystick:3},turns:25,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,s,l,c,l,c,l,s,s],[s,s,r,c,n,l,l,s,s],[w,B,B,n,c,n,B,B,w],[w,B,B,c,l,c,B,B,w],[w,n,c,l,l,n,l,n,w],[w,B,B,l,c,n,B,B,w],[w,B,B,n,l,c,B,B,w],[s,s,l,r,r,l,l,s,s],[s,s,w,w,w,w,w,s,s]]},t113:{objectives:[{type:f,amount:35},{type:x,amount:24}],rewards:{star:3,coin:150},mandatoryBoosters:{paintbrush:!0},bonusBoosters:{paintbrush:3},turns:26,spawnPattern:[d,d,d,d,d,d,d,d,d],pattern:[[s,s,f,c,f,f,f,s,s],[s,s,f,c,f,f,f,s,s],[B,B,f,n,c,c,f,B,B],[B,B,g,g,g,g,g,B,B],[B,B,g,g,g,g,g,B,B],[B,B,g,g,g,g,g,B,B],[s,s,y,y,y,y,y,s,s],[s,s,y,y,y,y,y,s,s]]}};i.default=D,cc._RF.pop()},{"./types.js":"types"}],shop:[function(t,e,i){"use strict";cc._RF.push(e,"a5d3etgZOlFU7ShfHXc6QKS","shop"),i.__esModule=!0,i.default=void 0;var a,o=(a=t("./boosters"))&&a.__esModule?a:{default:a},s={fish:{name:"Fish",quantity:1,price:1,description:"A single fish"},fish5:{name:"Fish x5",quantity:5,price:5,description:"A pack of fish"},fish10:{name:"Fish x10",quantity:10,price:10,description:"A plenty of fish"},hammer:{name:o.default.hammer.name,quantity:1,price:400,description:o.default.hammer.description},airplane:{name:o.default.airplane.name,quantity:1,price:800,description:o.default.airplane.description},rocket:{name:o.default.rocket.name,quantity:1,price:800,description:o.default.rocket.description},fairystick:{name:o.default.fairystick.name,quantity:1,price:800,description:o.default.fairystick.description},paintbrush:{name:o.default.paintbrush.name,quantity:1,price:400,description:o.default.paintbrush.description},wheel:{name:o.default.wheel.name,quantity:1,price:400,description:o.default.wheel.description}};i.default=s,e.exports=i.default,cc._RF.pop()},{"./boosters":"boosters"}],simpleCrate:[function(t,e,i){"use strict";var a;cc._RF.push(e,"fa738Oak3FPYJNDVjkJX82x","simpleCrate"),i.__esModule=!0,i.default=void 0;var o=((a=t("../../constants.js"))&&a.__esModule?a:{default:a}).default.GAMEPLAY,s=o.Z_INDEX,n=o.ITEM_SCALE,r={Red:":basic1",Yellow:":basic2",Green:":basic3",Blue:":basic4",Purple:":basic5",Brick:null},l={crateRed1:"redbox",crateRed2:"redbox",crateRed3:"redbox",crateGreen1:"greenbox",crateGreen2:"greenbox",crateGreen3:"greenbox",crateBlue1:"bluebox",crateBlue2:"bluebox",crateBlue3:"bluebox",crateYellow1:"yellowbox",crateYellow2:"yellowbox",crateYellow3:"yellowbox",cratePurple1:"purplebox",cratePurple2:"purplebox",cratePurple3:"purplebox",crateBrown1:"woodbox",crateBrown2:"woodbox",crateBrown3:"woodbox"},c={properties:{crateBrown1:{default:null,type:cc.SpriteFrame},crateBrown2:{default:null,type:cc.SpriteFrame},crateBrown3:{default:null,type:cc.SpriteFrame},crateRed1:{default:null,type:cc.SpriteFrame},crateRed2:{default:null,type:cc.SpriteFrame},crateRed3:{default:null,type:cc.SpriteFrame},crateYellow1:{default:null,type:cc.SpriteFrame},crateYellow2:{default:null,type:cc.SpriteFrame},crateYellow3:{default:null,type:cc.SpriteFrame},crateGreen1:{default:null,type:cc.SpriteFrame},crateGreen2:{default:null,type:cc.SpriteFrame},crateGreen3:{default:null,type:cc.SpriteFrame},crateBlue1:{default:null,type:cc.SpriteFrame},crateBlue2:{default:null,type:cc.SpriteFrame},crateBlue3:{default:null,type:cc.SpriteFrame},cratePurple1:{default:null,type:cc.SpriteFrame},cratePurple2:{default:null,type:cc.SpriteFrame},cratePurple3:{default:null,type:cc.SpriteFrame},crateBrick1:{default:null,type:cc.SpriteFrame},crateBrick2:{default:null,type:cc.SpriteFrame},crateExplosionFX:{default:null,type:cc.Prefab}},is:function(t){return"crateBrown1"===t||"crateBrown2"===t||"crateBrown3"===t||"crateRed1"===t||"crateRed2"===t||"crateRed3"===t||"crateYellow1"===t||"crateYellow2"===t||"crateYellow3"===t||"crateGreen1"===t||"crateGreen2"===t||"crateGreen3"===t||"crateBlue1"===t||"crateBlue2"===t||"crateBlue3"===t||"cratePurple1"===t||"cratePurple2"===t||"cratePurple3"===t||"crateBrick1"===t||"crateBrick2"===t},init:function(t,e){var i;t.isBlockingCascade=!0,t.isSensitive=!0,t.node.zIndex=s.BLOCKER_ITEM;var a=e.type,o=a.substring(5,a.length-1);switch(t.simpleCrateData={color:o},a){case"crate"+o+"1":t._addLayers({1:t["crate"+o+"1"]}),t.currentLayerId="1";break;case"crate"+o+"2":t.lifePoints=2,t._addLayers({1:t["crate"+o+"1"],2:t["crate"+o+"2"]}),t.layers[1].active=!1,t.currentLayerId="2";break;case"crate"+o+"3":t.lifePoints=3,t._addLayers({1:t["crate"+o+"1"],2:t["crate"+o+"2"],3:t["crate"+o+"3"]}),t.layers[1].active=!1,t.layers[2].active=!1,t.currentLayerId="3"}t.objectiveTypes=((i={})["crate"+o+"1"]=!0,i)},gotHit:function(t,e,i){var a=t.simpleCrateData.color;if(void 0!==r[a]&&"sensitive:"===e.type.slice(0,10)&&e.type.slice(-7)!==r[a])return i();t.onUpdate&&t.onUpdate.shaking&&t.onUpdate.shaking.data.resolve();var o=cc.instantiate(t.crateExplosionFX);t.gameBoard.view.addChild(o),o.zIndex=s.CRATE_EXPLOSION,o.x=t.node.x,o.y=t.node.y,o.scale=1.22*n,o.angle=20*Math.random()-10;var c=o.getComponent(sp.Skeleton);if(c.timeScale*=.4*Math.random()+.9,c.setSkin(l[t.type]||"woodbox"),c.setAnimation(0,"woodbox"+t.lifePoints+"_hit",!1),c.setCompleteListener(function(){o.destroy()}),t.lifePoints--,t._checkLifePoints(),0===t.lifePoints)return t._defaultExplode(e,i);t.type="crate"+a+t.lifePoints,t.currentLayerId=t.lifePoints,t.layers[t.currentLayerId].active=!0,t.onUpdate||(t.onUpdate={}),t.layers[t.lifePoints+1].destroy(),delete t.layers[t.lifePoints+1],t.onUpdate.shaking={data:{shakeUntil:t.app.now+300,resolve:function(){t.node.angle=0;var e=t.lifePoints;t.layers[e].x=0,t.layers[e].y=0,delete t.onUpdate.shaking,t._onUpdateCleanup()}},update:function(e,i){if(t.app.now>=i.shakeUntil)return i.resolve();var a=t.lifePoints;t.node.angle=7*t.app.noise.noise2D(t.app.now/100,10*t.uid),t.layers[a].x=7*t.app.noise.noise2D(t.app.now/100,20*t.uid),t.layers[a].y=7*t.app.noise.noise2D(t.app.now/100,30*t.uid)}},i()}};i.default=c,e.exports=i.default,cc._RF.pop()},{"../../constants.js":"constants"}],spinner:[function(t,e){"use strict";cc._RF.push(e,"85526iF82RACoOXl7Iqvj1Z","spinner"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.spinnerSprite=this.node.getChildByName("icon")},start:function(){},update:function(t){this.spinnerSprite.angle-=50*t}}),cc._RF.pop()},{}],supplyModel:[function(t,e,i){"use strict";cc._RF.push(e,"075cezDWiNKQ4WaqOv7yR66","supplyModel"),i.__esModule=!0,i.default=void 0;var a,o=n(t("../staticData/yard")),s=n(t("../userState"));function n(t){return t&&t.__esModule?t:{default:t}}function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}function l(){if(a)return a;for(var t in a={nextItem:null,items:[],star:s.default.getStar()},o.default.items){var e=o.default.items[t];if(a.star<e.star){a.nextItem=t;break}a.star-=e.star,a.items.includes(t)||a.items.push(t)}return a}function c(){a=null,l()}var h={getStarData:l,updateStarData:c,addStar:function(t){var e=r({},l());s.default.updateStar(t),c();var i=a.items.filter(function(t){return e.items.indexOf(t)<0}),n=s.default.getCats(),h=[];return i.forEach(function(t){var e;((null==(e=o.default.items[t])?void 0:e.unlock)||[]).forEach(function(t){h.push(t),n[t].unlocked=!0})}),h.length&&s.default.saveCats(),{items:i,cats:h}}};i.default=h,e.exports=i.default,cc._RF.pop()},{"../staticData/yard":"yard","../userState":"userState"}],tutorials:[function(t,e,i){"use strict";cc._RF.push(e,"199a1JrxjdM/JavlPlJf1px","tutorials"),i.__esModule=!0,i.default=void 0,i.default={t1:[{type:"swap",masks:{0:{x:3,y:2,height:3},1:{x:3,y:2,width:2}},move:{from:{x:3,y:2},to:{x:4,y:2}},label:{text:"Match 3 same colored items to collect them!",y:1e3}},{type:"objective"}],t2:[{type:"swap",masks:{0:{x:3,y:3,height:2},1:{x:2,y:4,width:4}},move:{from:{x:3,y:3},to:{x:3,y:4}},label:{text:"Match 4 same colored items to create a ROCKET!",y:800}},{type:"swap",masks:{0:{x:2,y:4,width:2}},move:{from:{x:3,y:4},to:{x:2,y:4}},label:{text:"Fantastic! Swipe the Rocket to see what it does",y:600,x:-300,width:700}},{type:"swap",masks:{0:{x:6,y:3,height:4},1:{x:6,y:4,width:2}},move:{from:{x:6,y:4},to:{x:7,y:4}},label:{text:"Great! Let's create another ROCKET!",y:0,x:-300,width:620}},{type:"tap",masks:{0:{x:6,y:6}},move:{from:{x:6,y:6}},label:{text:"Now tap on the ROCKET to use it!",y:-400,x:-300,width:600}}],t3:[{type:"swap",masks:{0:{x:5,y:3,height:3},1:{x:3,y:5,width:4}},move:{from:{x:5,y:5},to:{x:6,y:5}},label:{text:"Make L-shape match to create a BOMB!",y:960}},{type:"swap",masks:{0:{x:4,y:5,width:2}},move:{from:{x:5,y:5},to:{x:4,y:5}},label:{text:"Nice! Swap the BOMB to see what it does!",y:420}},{type:"swap",masks:{0:{x:5,y:3,height:4},1:{x:4,y:4,width:3}},move:{from:{x:5,y:3},to:{x:5,y:4}},label:{text:"Awesome! Let's create another BOMB by matching items in T-shape!",y:-800}},{type:"tap",masks:{0:{x:5,y:6}},move:{from:{x:5,y:6}},label:{text:"Now tap on the BOMB to use it!",y:160}}],t4:[{type:"swap",masks:{0:{x:3,y:4,width:2,height:2},1:{x:3,y:4,width:3}},move:{from:{x:5,y:4},to:{x:4,y:4}},label:{text:"Match 4 items in a square to create a FRISBEE!",y:700}},{type:"swap",masks:{0:{x:3,y:5,width:2}},move:{from:{x:3,y:5},to:{x:4,y:5}},label:{text:"Perfect! Swipe the FRISBEE to see what it does!",y:420}},{type:"swap",masks:{0:{x:5,y:5,height:3},1:{x:4,y:6,width:2,height:2}},move:{from:{x:5,y:5},to:{x:5,y:6}},label:{text:"Amazing! Let's create another FRISBEE!",y:480}},{type:"tap",masks:{0:{x:5,y:7}},move:{from:{x:5,y:7}},label:{text:"Now tap on the FRISBEE to use it!",y:260}}],t5:[{type:"swap",masks:{0:{x:4,y:4,height:2},1:{x:2,y:5,width:5}},move:{from:{x:4,y:4},to:{x:4,y:5}},label:{text:"Match 5 items in a line to create a WIND WHEEL!",y:700}},{type:"swap",masks:{0:{x:4,y:5,width:2}},move:{from:{x:4,y:5},to:{x:5,y:5}},label:{text:"Nice! Swap the WIND WHEEL with a item to collect the items of that color!",y:480}}],t101:[{type:"tapAny",masks:{0:{x:0,y:4,width:9,height:6}},label:{text:"Make a match next to the box to break it",y:720}}],t102:[{type:"tapAny",masks:{0:{x:0,y:3,width:9,height:5}},label:{text:"Make a match on the LEAVES to remove it",y:820}}],t103:[{type:"tapAny",masks:{0:{x:2,y:3,width:2,height:2},1:{x:5,y:3,width:2,height:2},2:{x:2,y:6,width:2,height:2},3:{x:5,y:6,width:2,height:2}},label:{text:"Make a match next to the MILK CABINET to break it",y:960}}],t104:[{type:"tapAny",masks:{0:{x:0,y:1,height:8},1:{x:8,y:1,height:8},3:{x:0,y:9,width:9}},label:{text:"Make matches next to a MOUSEDOOR to catch MICE!",y:0}}],t105:[{type:"tapAny",masks:{0:{x:0,y:1,width:3,height:9},1:{x:6,y:1,width:3,height:9}},label:{text:"Break the TEACUP by making a match next to it!",y:720}}],t106:[{type:"tapAny",masks:{0:{x:2,y:3,width:2,height:2},1:{x:5,y:3,width:2,height:2},2:{x:2,y:6,width:2,height:2},3:{x:5,y:6,width:2,height:2}},label:{text:"Break a JAM JAR by making a colored match next to it!",y:960}}],t107:[{type:"tapAny",masks:{0:{x:0,y:1,width:9,height:9}},label:{text:"Hit BRICK WALL with power-ups to break it!",y:0}}],t108:[{type:"booster",booster:"hammer",label:{text:"Tap on HAMMER to select it!"}},{type:"tapBooster",masks:{0:{x:5,y:3}},move:{from:{x:5,y:3}},label:{text:"Tap on the item to clear it from the board!",y:-300}}],t109:[{type:"booster",booster:"airplane",label:{text:"AIRPLANE clears everything in a row!"}},{type:"tapBooster",masks:{0:{x:0,y:3,width:8}},move:{from:{x:0,y:3}},label:{text:"Tap any object to clear its row!",y:-200}}],t110:[{type:"booster",booster:"rocket",label:{text:"Rocket clears everything in a column!"}},{type:"tapBooster",masks:{0:{x:4,y:1,height:9}},move:{from:{x:4,y:9}}}],t111:[{type:"booster",booster:"wheel",label:{text:"WHEEL shuffles all the items on the board!"}},{type:"tapBooster",masks:{0:{x:0,y:1,width:9,height:9}},label:{text:"Tap any object to shuffle!",y:-300}}],t112:[{type:"booster",booster:"fairystick",label:{text:"Tap on FAIRY STICK to select it!"}},{type:"tapBooster",masks:{0:{x:2,y:1},1:{x:4,y:1},2:{x:6,y:1},3:{x:5,y:2,width:2}},label:{text:"Select a GREEN cube to clear"}}],t113:[{type:"booster",booster:"paintbrush",label:{text:"Tap on PAINT BRUSH to select it!"}},{type:"paintbrush",color:"basic4",label:{text:"Choose color of blue"}},{type:"tapBooster",masks:{0:{x:3,y:3}},move:{from:{x:3,y:3}},label:{text:"Select the cube whose color you want to change",y:-300}}]},e.exports=i.default,cc._RF.pop()},{}],types:[function(t,e,i){"use strict";cc._RF.push(e,"71e73R4nDpOO4DemLj8xY54","types"),i.__esModule=!0,i.default=void 0;var a="basic1",o="basic2",s="basic3",n="basic4",r="basic5",l={O:null,r:a,y:o,g:s,b:n,p:r,R:[a,o,s,n],A:[a,o,s,n,r],B:"bomb",D:"discoball",M:"missiles1",m:"missiles2",s:"sniper",x:"crateBrown1",X:"crateBrown2",z:"crateBrown3",a:"crateRed1",c:"crateRed2",d:"crateRed3",e:"crateYellow1",f:"crateYellow2",h:"crateYellow3",i:"crateGreen1",j:"crateGreen2",k:"crateGreen3",l:"crateBlue1",n:"crateBlue2",o:"crateBlue3",q:"cratePurple1",u:"cratePurple2",v:"cratePurple3",w:"crateBrick1",C:"crateBrick2",E:"shrub1",F:"shrub2",G:"mouseDoor",H:"milkCabinet",t:"movableDestructible1",I:"milkBottle",J:"milkShelfLeft",K:"milkShelfRight",L:"jamCabinet1",N:"jamCabinet2",P:"jamCabinet3",Q:"jamCabinet4",S:"jamCabinet5","\xd2":"jam1","\xd3":"jam2","\xd4":"jam3","\xd5":"jam4","\xd6":"jam5",T:[a,s,n,r],U:[a,o,n,r]};i.default=l,e.exports=i.default,cc._RF.pop()},{}],underlay:[function(t,e,i){"use strict";var a;cc._RF.push(e,"c3d9dNyxtdLaqpqhO+C2BgA","underlay"),i.__esModule=!0,i.default=void 0;var o=((a=t("../../constants.js"))&&a.__esModule?a:{default:a}).default.GAMEPLAY.Z_INDEX,s={properties:{shrub1:{default:null,type:cc.SpriteFrame},shrub2:{default:null,type:cc.SpriteFrame}},is:function(t){return"shrub1"===t||"shrub2"===t},init:function(t,e){var i;t.node.zIndex=o["UNDERLAY_ITEM"+(Math.floor(5*Math.random())+1)],t.objectiveTypes=((i={}).shrub1=!0,i);var a=e.type,s=a.substring(0,a.length-1);switch(t.underlayData={subType:s},a){case s+"1":t._addLayers({1:t[s+"1"]}),t.currentLayerId="1";break;case s+"2":t.lifePoints=2,t._addLayers({1:t[s+"1"],2:t[s+"2"]}),t.layers[1].active=!1,t.currentLayerId="2"}for(var n=1;n<=2;n++)t.layers[n]&&(t.layers[n].width=270,t.layers[n].height=270,t.layers[n].angle=90*Math.floor(4*Math.random()))},gotHit:function(t,e,i){if(t.onUpdate&&t.onUpdate.shaking&&t.onUpdate.shaking.data.resolve(),t.lifePoints--,t._checkLifePoints(),0===t.lifePoints)return t._defaultExplode(e,i);t.type=""+t.underlayData.subType+t.lifePoints,t.currentLayerId=t.lifePoints,t.layers[t.currentLayerId].active=!0,t.onUpdate||(t.onUpdate={}),t.onUpdate.shaking={data:{shakeUntil:t.app.now+300,resolve:function(){t.node.angle=0;var e=t.lifePoints;t.layers[e].x=t.layers[e+1].x=0,t.layers[e].y=t.layers[e+1].y=0,t.layers[e+1].destroy(),delete t.layers[e+1],delete t.onUpdate.shaking,t._onUpdateCleanup()}},update:function(e,i){if(t.app.now>=i.shakeUntil)return i.resolve();var a=t.lifePoints;t.node.angle=7*t.app.noise.noise2D(t.app.now/100,10*t.uid),t.layers[a+1].x=t.layers[a].x=7*t.app.noise.noise2D(t.app.now/100,20*t.uid),t.layers[a+1].y=t.layers[a].y=7*t.app.noise.noise2D(t.app.now/100,30*t.uid),t.layers[a+1].opacity=(i.shakeUntil-t.app.now)/300*256}},i()}};i.default=s,e.exports=i.default,cc._RF.pop()},{"../../constants.js":"constants"}],userState:[function(t,e,i){"use strict";cc._RF.push(e,"cdc8d8RhNRBCLNThbisByEb","userState"),i.__esModule=!0,i.default=void 0,s(t("./staticData/boosters"));var a=s(t("./constants")),o=s(t("./models/levelModel"));function s(t){return t&&t.__esModule?t:{default:t}}var n=a.default.TIME_SPAN,r=null,l=null,c=null,h=null,d=null,u={coin:0,fish:0,star:0,selectedCat:null,level:null,dailyUpdate:0};function p(){if(!r){var t=localStorage.getItem("userStates");t?r=JSON.parse(t):(r=JSON.parse(JSON.stringify(u)),m())}return r}function m(){localStorage.setItem("userStates",JSON.stringify(r))}function f(){var t=o.default.getLevelMap(),e=p().level;return null!==e&&-1!==t.indexOf(e)||(p().level=t[0],m()),p().level}var g={hammer:{amount:3,selected:!0,unlocked:!0},airplane:{amount:3,selected:!0,unlocked:!0},rocket:{amount:3,selected:!1,unlocked:!0},fairystick:{amount:0,selected:!1,unlocked:!1},paintbrush:{amount:0,selected:!1,unlocked:!1},wheel:{amount:0,selected:!1,unlocked:!1}};function y(){localStorage.setItem("boosters",JSON.stringify(l))}var b={bella:{unlocked:!1,fishFed:0,dailyFed:0},bob:{unlocked:!1,fishFed:0,dailyFed:0},dora:{unlocked:!1,fishFed:0,dailyFed:0},leo:{unlocked:!1,fishFed:0,dailyFed:0},lily:{unlocked:!1,fishFed:0,dailyFed:0},luna:{unlocked:!1,fishFed:0,dailyFed:0},max:{unlocked:!1,fishFed:0,dailyFed:0},milo:{unlocked:!1,fishFed:0,dailyFed:0}};function v(){if(!c){var t=localStorage.getItem("cats");t?c=JSON.parse(t):(c=JSON.parse(JSON.stringify(b)),C())}return c}function C(){localStorage.setItem("cats",JSON.stringify(c))}var S={music:.5,sfx:.5};function w(){localStorage.setItem("settings",JSON.stringify(h))}function B(){localStorage.setItem("yardPlacements",JSON.stringify(d))}var I={getStates:p,saveStates:m,updateDailyState:function(){var t=p().dailyUpdate||0;if(Date.now()-t>n.ONE_DAY){console.warn("refresh daily state");var e=v();for(var i in e)e[i].dailyFed=0;return C(),p().dailyUpdate=Math.round(Date.now()/n.ONE_DAY)*n.ONE_DAY,m(),!0}return!1},getSettings:function(){if(!h){var t=localStorage.getItem("settings");t?h=JSON.parse(t):(h=JSON.parse(JSON.stringify(S)),w())}return h},saveSettings:w,getCoin:function(){return p().coin},updateCoin:function(t){p().coin=Math.max(p().coin+t,0),m()},getFish:function(){return p().fish},updateFish:function(t){p().fish=Math.max(p().fish+t,0),m()},getStar:function(){return p().star},updateStar:function(t){p().star=Math.max(p().star+t,0),m()},getSelectedCat:function(){return p().selectedCat},updateSelectedCat:function(t){p().selectedCat=t,m()},getProgression:f,stepProgression:function(t){var e=o.default.getLevelMap(),i=f(),a=e.indexOf(i);a<0||(a=Math.min(Math.max(a+t,0),e.length-1),p().level=e[a],m())},getBoosters:function(){if(!l){var t=localStorage.getItem("boosters");t?l=JSON.parse(t):(l=JSON.parse(JSON.stringify(g)),y())}return l},saveBoostersState:y,getCats:v,saveCats:C,getYard:function(){if(!d){var t=localStorage.getItem("yardPlacements");t?d=JSON.parse(t):(d={},B())}return d},saveYard:B,clear:function(){r=null,l=null,c=null,h=null,d=null,localStorage.clear()}};i.default=I,e.exports=i.default,cc._RF.pop()},{"./constants":"constants","./models/levelModel":"levelModel","./staticData/boosters":"boosters"}],yardModel:[function(t,e){"use strict";cc._RF.push(e,"a10e4uDHl5GI53INdE66dty","yardModel"),cc._RF.pop()},{}],yard:[function(t,e,i){"use strict";cc._RF.push(e,"d18035ArTRGVoA19C73IMkX","yard"),i.__esModule=!0,i.default=void 0;var a="none",o="normal",s="water",n="tree",r={none:{color:new cc.Color(0,0,0),opacity:128},normal:{color:new cc.Color(0,0,0),opacity:28},water:{color:new cc.Color(0,0,220),opacity:66},tree:{color:new cc.Color(255,0,0),opacity:128}},l=[[a,a,a,o,o,o,a,a,o,o,o,n,a,a,a,o,o,o,o,o],[a,a,o,o,o,a,a,o,o,o,o,o,o,a,a,a,o,o,o,o],[a,a,a,o,a,a,o,o,o,o,o,o,s,s,s,s,a,o,o,a],[a,a,a,a,a,a,o,o,o,o,o,o,s,s,s,s,o,o,o,o]],c={pattern:l,patternSize:{x:l[0].length,y:l.length},colors:r,items:{rubberBallRed:{name:"Red Ball",type:o,size:{x:1,y:1},offset:{x:0,y:-40},catOffset:{x:-81,y:57},labelOffset:{x:0,y:-72},star:1,interval:900,unlock:["bella"],attract:{bella:100}},pot:{name:"Pot",type:o,size:{x:1,y:1},offset:{x:0,y:25},buttonOffset:{x:-30,y:-50},catOffset:{x:0,y:70},labelOffset:{x:0,y:-109},star:4,interval:900,unlock:["milo"],attract:{bella:80,milo:20}},stretchingBoard:{name:"Stretching Board",type:o,size:{x:2,y:1},offset:{x:0,y:-20},buttonOffset:{x:-25,y:-25},catOffset:{x:0,y:90},labelOffset:{x:0,y:-73},star:4,interval:780,attract:{bella:50,milo:50}},bed:{name:"Bed",type:o,size:{x:1,y:1},buttonOffset:{x:-20,y:-10},catOffset:{x:0,y:90},labelOffset:{x:0,y:-73},star:7,interval:780,unlock:["dora","luna"],attract:{dora:80,luna:20}},swing:{name:"Swing",type:n,size:{x:1,y:1},offset:{x:0,y:247},buttonOffset:{x:-20,y:-235},catOffset:{x:0,y:-60},labelOffset:{x:0,y:-220},star:8,interval:780,attract:{dora:50,milo:50}},paperBag1:{name:"Paper Bag 1",type:o,size:{x:1,y:1},buttonOffset:{x:-25,y:-25},catOffset:{x:0,y:-11.5},labelOffset:{x:0,y:-106.5},star:8,interval:600,unlock:["lily"],attract:{lily:100}},paperBag2:{name:"Paper Bag 2",type:o,size:{x:1,y:1},buttonOffset:{x:-25,y:-25},catOffset:{x:0,y:97},labelOffset:{x:0,y:-95},star:8,interval:600,attract:{lily:80,luna:20}},cushion:{name:"Cushion",type:o,size:{x:1,y:1},offset:{x:0,y:-40},buttonOffset:{x:-20,y:-10},catOffset:{x:0,y:20},labelOffset:{x:0,y:-106.5},star:8,interval:600,unlock:["leo"],attract:{leo:100}},rubberBallRainbow:{name:"Rainbow Ball",type:o,size:{x:1,y:1},buttonOffset:{x:-20,y:-20},catOffset:{x:90,y:33},labelOffset:{x:0,y:-95.5},star:11,interval:480,attract:{leo:80,luna:20}},swimRing:{name:"Swim Ring",type:s,size:{x:1,y:1},buttonOffset:{x:-35,y:-35},catOffset:{x:8,y:72},labelOffset:{x:0,y:-125},star:12,interval:480,attract:{leo:50,milo:50}},hamburgerCushion:{name:"Hamburger Cushion",type:o,size:{x:1,y:1},buttonOffset:{x:-25,y:-25},catOffset:{x:0,y:128},labelOffset:{x:0,y:-115},star:12,interval:480,unlock:["max"],attract:{max:100}},tower:{name:"Tower",type:o,size:{x:2,y:1},offset:{x:0,y:112},buttonOffset:{x:-45,y:-45},catOffset:{x:80,y:198},labelOffset:{x:0,y:-215},star:12,interval:360,attract:{max:40,lily:40,luna:20}},plushDoll:{name:"Plush Doll",type:o,size:{x:1,y:1},offset:{x:0,y:-40},catOffset:{x:-96,y:39},labelOffset:{x:0,y:-70},star:12,interval:360,attract:{lily:33,bella:67}},tent:{name:"Tent",type:o,size:{x:2,y:1},offset:{x:0,y:120},buttonOffset:{x:-100,y:-160},catOffset:{x:62,y:3},labelOffset:{x:0,y:-246},star:12,interval:360,unlock:["bob"],attract:{bob:100}},featherToy:{name:"Feather Toy",type:o,size:{x:1,y:1},offset:{x:-20,y:100},buttonOffset:{x:-20,y:-10},catOffset:{x:-53,y:-59},labelOffset:{x:0,y:-190},star:12,interval:360,attract:{bob:67,luna:33}},tunnel:{name:"Tunnel",type:o,size:{x:3,y:1},buttonOffset:{x:-30,y:-15},catOffset:{x:0,y:131},labelOffset:{x:0,y:-113},star:13,interval:360,attract:{bob:40,max:40,luna:20}}}};i.default=c,e.exports=i.default,cc._RF.pop()},{}]},{},["Scheduler","app","CatCommands","ShopCommands","constants","BagBoosterItem","BagSupplyItem","BoosterController","BoosterItem","BottomUI","BottomUIButton","CatItem","CatView","ConfirmationController","GiftPopup","ObjectiveController","ObjectiveItem","PausePopup","ProgressFrame","QAPanel","QuickBagPopup","ResultController","SettingsPopup","ShopConfirmPopup","ShopItem","Slider","StartSelectionItem","StartSelectionPopup","SubsceneController","TopUI","TutorialController","YardGlow","YardItem","YardItemView","YardView","spinner","BagSubscene","CatSubscene","HomeSubscene","ShopSubscene","Debugger","GameBoard","GameItem","bumper","cabinet","simpleCrate","underlay","GameTile","Rnd","SpriteCollection","helpers","catModels","levelModel","supplyModel","yardModel","Game","Home","boosters","cats","development","levels","main","types","shop","tutorials","yard","userState"]);