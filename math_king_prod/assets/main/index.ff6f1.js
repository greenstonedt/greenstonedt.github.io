window.__require=function t(e,i,n){function r(c,a){if(!i[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var d="function"==typeof __require&&__require;if(!a&&d)return d(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){return r(e[c][1][t]||t)},l,l.exports,t,e,i,n)}return i[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({1:[function(t,e){var i="en",n="jp",r={jp:{play:"\u30b9\u30bf\u30fc\u30c8"},en:{play:"Play Now!"}},o=500;function c(){this._isInitialised=!1,this._splashAdShown=!1}function a(t){for(var e in t=t||{})void 0===t[e]&&delete t[e];return t}function s(t,e){console.error(t),(e=e||{}).noBreak?e.noBreak():(e.beforeBreak&&e.beforeBreak(),e.afterBreak&&e.afterBreak())}function d(){if(!navigator.language)return n;let t=navigator.language.toLowerCase().substr(0,2);return r[t]?t:i}c.prototype.initialize=function(t){if(this._isInitialised)console.warn("h5ad: already initialized");else{if(this._isInitialised=!0,t&&void 0!==t.adBreakTimeout&&(o=t.adBreakTimeout),!window.adsbygoogle){var e=document.createElement("script");e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",e.setAttribute("data-ad-client","ca-pub-123456789"),e.setAttribute("data-adbreak-test","on"),e.async=!0,document.head.appendChild(e),window.adsbygoogle=window.adsbygoogle||[],adBreak=window.adBreak=function(t){console.log("adBreak:",t),window.adsbygoogle.push(t)},adConfig=window.adConfig=function(t){console.log("adConfig:",t),window.adsbygoogle.push(t)}}adConfig({preloadAdBreaks:"on",sound:"on"})}},c.prototype.onStart=function(t){if(t=t||{},this._isInitialised||this.initialize({adBreakTimeout:t.adBreakTimeout}),this._splashAdShown)console.warn("h5ad: onStart has already been called");else{this._splashAdShown=!0;var e="";e+=".splahContainer {",e+="    background-color: black;",e+="    position: absolute;",e+="    width: 100%;",e+="    height: 100%;",e+="    text-align: left;",e+="}",e+=".splahContainer .gameIcon {",e+="    position: relative;",e+="    width: 100px;",e+="    height: 100px;",e+="    background-size: 100%;",e+="    transform: translate(-50%, -100%);",e+="    left: 50%;",e+="    top: 31%;",e+="    border-radius: 10px;",e+="    border: 2px white solid;",e+="    border-radius: min(2vh,2vw);",e+="    border: min(0.7vw, 0.7vh) white solid;",e+="    width: min(30vw, 20vh);",e+="    height: min(30vw, 20vh);",e+="}",e+=".splahContainer .startButton {",e+="    background-color: rgb(255, 193, 7);",e+="    padding: 20px 30px;",e+="    border-radius: 13px;",e+="    transform: translate(-50%, 100%);",e+="    left: 50%;",e+="    top: 40%;",e+="    border: 5px solid white;",e+="    position: relative;",e+="    cursor: pointer;",e+="    font-size: 26px;",e+="    font-family: arial, verdana;",e+="    color: white;",e+="    text-align: center;",e+="    transition: all 0.1s;",e+="    width: min(50vw,27vh);",e+="    padding: min(3vw,3vh);",e+="    font-size: min(4vh,9vw);",e+="    border-radius: min(2vh,2vw);",e+="    border: min(1vw, 1vh) white solid;",e+="}",e+=".splahContainer .startButton:hover {",e+="    transform: translate(-50%, 100%) scale(1.1);",e+="    background-color: rgb(255 217 104);",e+="}";var i=document.createElement("style");i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(i);var n=document.createElement("div");t.color&&(n.style.backgroundColor=t.color),n.className="splahContainer";var c=document.createElement("div");c.textContent=r[d()].play,c.className="startButton",n.appendChild(c);var l=document.createElement("div");l.className="gameIcon",t.icon&&(l.style.backgroundImage="url("+t.icon+")"),n.appendChild(l),document.body.appendChild(n),c.onclick=function(){afterBreakCallbackCalled=!1;let e=setTimeout(function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,t.afterBreak&&t.afterBreak())},o);try{adBreak(a({type:"start",name:t.name||"splash_screen",beforeBreak:function(){clearTimeout(e)},afterBreak:function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,t.afterBreak&&t.afterBreak())}}))}catch(i){s(i,t)}setTimeout(function(){document.body.removeChild(n)},200)}}},c.prototype.onNext=function(t){(t=t||{}).type="next",this.adBreak(t)},c.prototype.onBrowse=function(t){(t=t||{}).type="browse",this.adBreak(t)},c.prototype.onPause=function(t){(t=t||{}).type="pause",this.adBreak(t)},c.prototype.adBreak=function(t){if("next"!==(t=t||{}).type&&"browse"!==t.type&&"pause"!==t.type)return console.error("H5ad: unknown type",t.type);let e=setTimeout(function(){t.noBreak&&t.noBreak()},o);try{adBreak(a({type:t.type,name:t.name||t.type,beforeBreak:function(){clearTimeout(e),t.beforeBreak&&t.beforeBreak()},afterBreak:function(){t.afterBreak&&t.afterBreak()}}))}catch(i){s(i,t)}},c.prototype.onMute=function(){adConfig({sound:"off"})},c.prototype.onUnmute=function(){adConfig({sound:"on"})},e.exports=new c},{}],2:[function(t,e){function i(t,e){var i=[],n=[];return null==e&&(e=function(t,e){return i[0]===e?"[Circular ~]":"[Circular ~."+n.slice(0,i.indexOf(e)).join(".")+"]"}),function(r,o){if(i.length>0){var c=i.indexOf(this);~c?i.splice(c+1):i.push(this),~c?n.splice(c,1/0,r):n.push(r),~i.indexOf(o)&&(o=e.call(this,r,o))}else i.push(o);return null==t?o:t.call(this,r,o)}}(e.exports=function(t,e,n,r){return JSON.stringify(t,i(e,r),n)}).getSerialize=i},{}],3:[function(t,e){"use strict";var i=t("json-stringify-safe"),n=function(){var t=4022871197;return function(e){if(e){e=e.toString();for(var i=0;i<e.length;i++){var n=.02519603282416938*(t+=e.charCodeAt(i));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)}t=4022871197}},r=function(t){return function(){var e,r,o=48,c=1,a=o,s=new Array(o),d=0,l=new n;for(e=0;e<o;e++)s[e]=l(Math.random());var u=function(){++a>=o&&(a=0);var t=1768863*s[a]+2.3283064365386963e-10*c;return s[a]=t-(c=0|t)},h=function(t){return Math.floor(t*(u()+11102230246251565e-32*(2097152*u()|0)))};h.string=function(t){var e,i="";for(e=0;e<t;e++)i+=String.fromCharCode(33+h(94));return i};var p=function(){var t=Array.prototype.slice.call(arguments);for(e=0;e<t.length;e++)for(r=0;r<o;r++)s[r]-=l(t[e]),s[r]<0&&(s[r]+=1)};return h.cleanString=function(t){return(t=(t=t.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[\x00-\x1F]/gi,"")).replace(/\n /,"\n")},h.hashString=function(t){for(t=h.cleanString(t),l(t),e=0;e<t.length;e++)for(d=t.charCodeAt(e),r=0;r<o;r++)s[r]-=l(d),s[r]<0&&(s[r]+=1)},h.seed=function(t){null==t&&(t=Math.random()),"string"!=typeof t&&(t=i(t,function(t,e){return"function"==typeof e?e.toString():e})),h.initState(),h.hashString(t)},h.addEntropy=function(){var t=[];for(e=0;e<arguments.length;e++)t.push(arguments[e]);p(d+++(new Date).getTime()+t.join("")+Math.random())},h.initState=function(){for(l(),e=0;e<o;e++)s[e]=l(" ");c=1,a=o},h.done=function(){l=null},void 0!==t&&h.seed(t),h.range=function(t){return h(t)},h.random=function(){return h(Number.MAX_VALUE-1)/Number.MAX_VALUE},h.floatBetween=function(t,e){return h.random()*(e-t)+t},h.intBetween=function(t,e){return Math.floor(h.random()*(e-t+1))+t},h}()};r.create=function(t){return new r(t)},e.exports=r},{"json-stringify-safe":2}],IngameScene:[function(t,e){"use strict";cc._RF.push(e,"41ca6i+HA9Ooqx0Sr36WHSO","IngameScene");var i=t("RiddleFrameController"),n=t("ResultPopup"),r=t("./component/ScoreLabel"),o=t("./constants"),c=t("./lib/helpers"),a=t("./lib/riddleGenerate");cc.Class({extends:cc.Component,properties:{riddleFrameCtor:i,resultPopup:n,notificaitonText:cc.Label,correctMark:cc.Node,timerProgressBar:cc.ProgressBar,timerText:cc.Label,questtionText:cc.Label,scoreText:r,chainText:cc.Label,timerTickSound:cc.AudioClip,correctSound:cc.AudioClip,wrongSound:cc.AudioClip,gameOverSound:cc.AudioClip,levelUpSound:cc.AudioClip},onLoad:function(){this.rand=t("random-seed").create(),this.rand.initState(),this.rand.seed(Math.random()),this.riddleFrameCtor.node.on("answer",this.onResult,this),this.resultPopup.node.on("restart",this.onRestart,this)},start:function(){this.resetAndStartGame(),this.resultPopup.node.active=!0,this.resultPopup.hide(!0)},update:function(t){var e=this;if(this.isPlaying)if(this.timer-=1e3*t,this.timerText.string=c.formatTimer(this.timer+""),this.timerProgressBar.progress=.05+this.timer/o.ROUND_DURATION*.95,this.chainTimer-=1e3*t,this.timerProgressBar.barSprite.node.color=new cc.Color(255,this.timer/o.ROUND_DURATION*255,this.timer/o.ROUND_DURATION*255,255),this.timer<0)this.isPlaying=!1,this.riddleFrameCtor.locked=!0,cc.audioEngine.play(this.gameOverSound,!1,1),this.animateEndGame(function(){e.resultPopup.show(e.score)});else if(this.timer<1e4){var i=this.timer/1e3;i+t>Math.ceil(i)&&(cc.audioEngine.play(this.timerTickSound,!1,.5),cc.tween(this.timerText.node).to(.1,{color:(new cc.Color).fromHEX("#d35400")}).to(.1,{color:(new cc.Color).fromHEX("#ffffff")}).start(),this.timer<5e3&&this.scheduleOnce(function(){cc.audioEngine.play(e.timerTickSound,!1,.5)},.5))}},resetAndStartGame:function(){var t=this;this.reset(),this.animateGoText(function(){t.notificaitonText.node.active=!1,t.riddleFrameCtor.node.active=!0,t.startNewRiddle()})},reset:function(){this.isPlaying=!1,this.questionNumber=0,this.level=0,this.chain=0,this.timer=o.ROUND_DURATION,this.chainTimer=0,this.score=0,this.displayingScore=0,this.chainText.node.active=!1,this.correctMark.active=!1,this.riddleFrameCtor.node.active=!1,this.notificaitonText.node.active=!0,this.notificaitonText.node.setScale(0),this.timerProgressBar.progress=1,this.timerProgressBar.barSprite.node.color=(new cc.Color).fromHEX("#ffffff"),this.timerText.string=c.formatTimer(this.timer+""),this.questtionText.string="\u8cea\u554f "+(this.level+1)+"-"+(this.questionNumber+1),this.scoreText.setScore(this.score,!0)},nextRiddle:function(){this.questionNumber++,this.questionNumber>=o.DIFFICULTY_STEP?(this.questionNumber=0,this.level++,this.timer=o.ROUND_DURATION,this.animateLevelUp(this.startNewRiddle.bind(this))):this.startNewRiddle(),this.animateQuestionInfo()},startNewRiddle:function(){var t=a(this.level+1,this.rand);this.riddleFrameCtor.optainNewRiddle(t),this.isPlaying=!0,this.chainTimer=o.CHAIN_DURATION},animateGoText:function(t){var e=this;cc.tween(this.notificaitonText.node).delay(.4).call(function(){e.notificaitonText.node.setScale(.3),e.notificaitonText.string="READY",cc.audioEngine.play(e.timerTickSound,!1,1)}).to(.35,{scale:{value:1,easing:"sineOut"}}).delay(.2).to(.35,{scale:{value:.35,easing:"sineIn"}}).call(function(){e.notificaitonText.node.setScale(.4),e.notificaitonText.string="GO!",cc.audioEngine.play(e.gameOverSound,!1,1)}).to(.5,{scale:{value:1.3,easing:"sineOut"}}).to(.3,{scale:{value:1.2,easing:"sineIn"}}).call(function(){t()}).start()},animateEndGame:function(t){this.riddleFrameCtor.node.active=!1,this.notificaitonText.node.active=!0,this.notificaitonText.string="\u7d42\u4e86!",this.notificaitonText.node.setScale(.3),this.notificaitonText.node.color=(new cc.Color).fromHEX("#d35400"),this.timerProgressBar.progress=0,cc.tween(this.notificaitonText.node).to(.4,{scale:{value:1,easing:"sineOut"}}).delay(.5).call(function(){t()}).start()},animateLevelUp:function(t){var e=this;cc.audioEngine.play(this.levelUpSound,!1,1),this.riddleFrameCtor.node.active=!1,this.notificaitonText.node.active=!0,this.notificaitonText.string="\u6b21\u306e\u30ec\u30d9\u30eb!",this.notificaitonText.node.setScale(.3),cc.tween(this.notificaitonText.node).to(.4,{scale:{value:1,easing:"sineOut"}}).delay(.4).to(.2,{scale:{value:0,easing:"sineOut"}}).call(function(){e.riddleFrameCtor.node.active=!0,e.notificaitonText.node.active=!1,t()}).start()},animateQuestionInfo:function(){this.questtionText.string="\u8cea\u554f "+(this.level+1)+"-"+(this.questionNumber+1),cc.tween(this.questtionText.node).to(.1,{scale:1.2,color:(new cc.Color).fromHEX("#16a085")}).delay(.05).to(.1,{scale:1,color:(new cc.Color).fromHEX("#ECF0F1")}).start()},animateChainText:function(){var t=this;this.chainText.node.active=!0,this.chainText.node.x=this.scoreText.node.x+this.scoreText.node.width/2,this.chainText.node.setScale(0),this.chainText.string="\u30b9\u30b3\u30a2 x"+this.chain,cc.tween(this.chainText.node).delay(.2).to(.2,{scale:{value:1,easing:"bounceOut"}}).delay(.3).to(.2,{scale:0}).call(function(){t.chainText.node.active=!1}).start()},animateResultText:function(t,e){var i=this;if(cc.audioEngine.play(t?this.correctSound:this.wrongSound,!1,1),t)this.correctMark.y=68,this.correctMark.active=!0,this.correctMark.opacity=0,cc.tween(this.correctMark).delay(.3).to(.2,{position:cc.v2(0,98),opacity:255}).delay(.4).to(.2,{position:cc.v2(0,128),opacity:0}).call(function(){i.correctMark.active=!1,e()}).start(),cc.tween(this.riddleFrameCtor.node).delay(.25).to(.3,{opacity:0}).delay(.75).to(.25,{opacity:255}).call(function(){i.riddleFrameCtor.locked=!1}).start();else{var n=this.riddleFrameCtor.inputText.node.x;cc.tween(this.riddleFrameCtor.inputText.node).delay(.2).to(.06,{x:n+10}).to(.12,{x:n-10}).to(.12,{x:n+10}).to(.06,{x:n}).call(function(){i.riddleFrameCtor.locked=!1,e()}).start(),cc.tween(this.riddleFrameCtor.inputText.node).delay(.1).to(.145,{color:cc.color("#8D7979")}).to(.145,{color:cc.color("#AA1414")}).to(.145,{color:cc.color("#8D7979")}).to(.145,{color:cc.color("#AA1414")}).start()}},onResult:function(t){var e=this;if(this.isPlaying){this.isPlaying=!1,this.riddleFrameCtor.locked=!0;var i="correct"===t;if(i){this.chainTimer>0?this.chain=Math.min(++this.chain,o.MAX_CHAIN):this.chain=0;var n=o.SCORING*Math.max(this.chain,1);this.score+=n,cc.tween(this.scoreText.node).delay(.25).to(.12,{color:(new cc.Color).fromHEX("#402093")}).call(function(){e.scoreText.setScore(e.score),e.chain>1&&e.animateChainText()}).to(.14,{color:(new cc.Color).fromHEX("#16a085")}).to(.16,{color:(new cc.Color).fromHEX("#402093")}).to(.18,{color:(new cc.Color).fromHEX("#16a085")}).to(.2,{color:(new cc.Color).fromHEX("#402093")}).start()}this.animateResultText(i,function(){i?e.nextRiddle():(e.riddleFrameCtor.clearInput(),e.chainTimer=-1,e.isPlaying=!0)})}},onRestart:function(){this.resultPopup.hide(),this.resetAndStartGame()}}),cc._RF.pop()},{"./component/ScoreLabel":"ScoreLabel","./constants":"constants","./lib/helpers":"helpers","./lib/riddleGenerate":"riddleGenerate",ResultPopup:"ResultPopup",RiddleFrameController:"RiddleFrameController","random-seed":3}],InputFrameController:[function(t,e){"use strict";cc._RF.push(e,"34795oJcMBF0ZeRU5Ut18Zv","InputFrameController"),cc.Class({extends:cc.Component,properties:{button_0:cc.Button,button_1:cc.Button,button_2:cc.Button,button_3:cc.Button,button_4:cc.Button,button_5:cc.Button,button_6:cc.Button,button_7:cc.Button,button_8:cc.Button,button_9:cc.Button,button_Plus:cc.Button,button_Minus:cc.Button,button_Multiple:cc.Button,button_Divide:cc.Button,button_C:cc.Button},onLoad:function(){this.isKeyboardShifed=!1,this.button_0.node.on("click",this.onButtonClicked,this),this.button_1.node.on("click",this.onButtonClicked,this),this.button_2.node.on("click",this.onButtonClicked,this),this.button_3.node.on("click",this.onButtonClicked,this),this.button_4.node.on("click",this.onButtonClicked,this),this.button_5.node.on("click",this.onButtonClicked,this),this.button_6.node.on("click",this.onButtonClicked,this),this.button_7.node.on("click",this.onButtonClicked,this),this.button_8.node.on("click",this.onButtonClicked,this),this.button_9.node.on("click",this.onButtonClicked,this),this.button_Plus.node.on("click",this.onButtonClicked,this),this.button_Minus.node.on("click",this.onButtonClicked,this),this.button_Multiple.node.on("click",this.onButtonClicked,this),this.button_Divide.node.on("click",this.onButtonClicked,this),this.button_C.node.on("click",this.onButtonClicked,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},start:function(){},onKeyDown:function(t){cc.director.isPaused()||t.keyCode===cc.macro.KEY.shift&&(this.isKeyboardShifed=!0)},onKeyPressed:function(t){if(!cc.director.isPaused())if(t.keyCode!==cc.macro.KEY.shift)switch(t.keyCode){case cc.macro.KEY[0]:case cc.macro.KEY.num0:this.node.emit("input",0);break;case cc.macro.KEY[1]:case cc.macro.KEY.num1:this.node.emit("input",1);break;case cc.macro.KEY[2]:case cc.macro.KEY.num2:this.node.emit("input",2);break;case cc.macro.KEY[3]:case cc.macro.KEY.num3:this.node.emit("input",3);break;case cc.macro.KEY[4]:case cc.macro.KEY.num4:this.node.emit("input",4);break;case cc.macro.KEY[5]:case cc.macro.KEY.num5:this.node.emit("input",5);break;case cc.macro.KEY[6]:case cc.macro.KEY.num6:this.node.emit("input",6);break;case cc.macro.KEY[7]:case cc.macro.KEY.num7:this.node.emit("input",7);break;case cc.macro.KEY[8]:if(this.isKeyboardShifed){this.node.emit("input","*");break}case cc.macro.KEY.num8:this.node.emit("input",8);break;case cc.macro.KEY[9]:case cc.macro.KEY.num9:this.node.emit("input",9);break;case cc.macro.KEY["+"]:this.node.emit("input","+");break;case cc.macro.KEY.dash:case cc.macro.KEY["-"]:this.node.emit("input","-");break;case cc.macro.KEY["*"]:case cc.macro.KEY.x:this.node.emit("input","*");break;case cc.macro.KEY.forwardslash:case cc.macro.KEY["/"]:this.node.emit("input","/");break;case cc.macro.KEY.numdel:case cc.macro.KEY.Delete:case cc.macro.KEY.backspace:this.node.emit("input","C");break;case cc.macro.KEY.equal:if(this.isKeyboardShifed){this.node.emit("input","+");break}}else this.isKeyboardShifed=!1},onButtonClicked:function(t){if(!cc.director.isPaused())switch(t){case this.button_0:this.node.emit("input",0);break;case this.button_1:this.node.emit("input",1);break;case this.button_2:this.node.emit("input",2);break;case this.button_3:this.node.emit("input",3);break;case this.button_4:this.node.emit("input",4);break;case this.button_5:this.node.emit("input",5);break;case this.button_6:this.node.emit("input",6);break;case this.button_7:this.node.emit("input",7);break;case this.button_8:this.node.emit("input",8);break;case this.button_9:this.node.emit("input",9);break;case this.button_Plus:this.node.emit("input","+");break;case this.button_Minus:this.node.emit("input","-");break;case this.button_Multiple:this.node.emit("input","*");break;case this.button_Divide:this.node.emit("input","/");break;case this.button_C:this.node.emit("input","C");break;default:cc.error("undefined input button")}}}),cc._RF.pop()},{}],LandingScene:[function(t,e){"use strict";cc._RF.push(e,"f81c9Et825BE4flcrHLshzh","LandingScene");var i=t("h5ad"),n=t("./lib/helpers");cc.Class({extends:cc.Component,properties:{clickSound:cc.AudioClip},onLoad:function(){i.onStart({icon:n.getResourceUrl("icon"),color:"#6a7af6"})},start:function(){},onPlayButtonClicked:function(){cc.director.loadScene("ingame"),cc.audioEngine.play(this.clickSound,!1,1)}}),cc._RF.pop()},{"./lib/helpers":"helpers",h5ad:1}],ResultPopup:[function(t,e){"use strict";cc._RF.push(e,"e8a928f/TVLLa/SAULl17y6","ResultPopup"),t("h5ad");var i=t("./lib/helpers");cc.Class({extends:cc.Component,properties:{overlay:cc.Node,frame:cc.Node,scoreText:cc.RichText,clickSound:cc.AudioClip},start:function(){},show:function(t){this.overlay.active=!0,this.frame.active=!0,this.scoreText.string="<b>\u6700\u9ad8\u30b9\u30b3\u30a2: <size=90>"+t+"</size></b>",this.frame.setScale(.3),cc.tween(this.frame).to(.4,{scale:{value:1,easing:"sineInOut"}}).start()},backToMainMenu:function(){cc.director.loadScene("landing")},restartGame:function(){this.node.emit("restart")},hide:function(t){var e=this;t?(this.frame.active=!1,this.frame.setScale(0),this.overlay.active=!1):cc.tween(this.frame).to(.4,{scale:{value:0,easing:"sineInOut"}}).call(function(){e.frame.active=!1,e.overlay.active=!1}).start()},onRestartClicked:function(){var t=this;cc.director.isPaused()||(cc.audioEngine.play(this.clickSound,!1,1),i.showAds("next",!0,function(){t.restartGame()}))}}),cc._RF.pop()},{"./lib/helpers":"helpers",h5ad:1}],RiddleFrameController:[function(t,e){"use strict";cc._RF.push(e,"d5071e/oO5PXr2IjDcs85iC","RiddleFrameController");var i=t("InputFrameController"),n=t("./lib/helpers");cc.Class({extends:cc.Component,properties:{inputCtor:i,leftRiddleText:cc.Label,rightRiddleText:cc.Label,inputText:cc.Label,inputFrame:cc.Sprite,inputSound:cc.AudioClip},onLoad:function(){this.locked=!0,this.inputCtor.node.on("input",this.onInput,this)},start:function(){},onInput:function(t){this.locked||this.currentRiddle&&(isNaN(t)||"operator"===this.currentRiddle.riddlePart?"operator"===this.currentRiddle.riddlePart&&n.isInputOperator(t)?(this.input=t,this.inputText.string=n.getInputCharacter(t),this.node.emit("answer",n.checkAnswer(this.currentRiddle,this.input)?"correct":"incorrect")):"C"===t&&(this.clearInput(),cc.audioEngine.play(this.inputSound,!1,1)):(null===this.input&&(this.input=0),this.input<=99&&(this.input=10*this.input+t,this.inputText.string=this.input>0?this.input.toString():"",this.input.toString().length>=n.getAnswerLength(this.currentRiddle)?this.node.emit("answer",n.checkAnswer(this.currentRiddle,this.input)?"correct":"incorrect"):cc.audioEngine.play(this.inputSound,!1,1))))},clearInput:function(){this.input=null,this.inputText.string=""},optainNewRiddle:function(t){t=t||{},this.currentRiddle={},this.currentRiddle.operand1=t.operand1||0,this.currentRiddle.operand2=t.operand2||0,this.currentRiddle.result=t.result||0,this.currentRiddle.operator=t.operator||"+",this.currentRiddle.riddlePart=t.riddlePart||"operator",this.clearInput();var e="operator"===this.currentRiddle.riddlePart?160:320;switch(this.currentRiddle.riddlePart){case"operand1":this.leftRiddleText.string="",this.rightRiddleText.string=n.getInputCharacter(this.currentRiddle.operator)+" "+this.currentRiddle.operand2+" = "+this.currentRiddle.result;break;case"operand2":this.leftRiddleText.string=this.currentRiddle.operand1+" "+n.getInputCharacter(this.currentRiddle.operator),this.rightRiddleText.string="= "+this.currentRiddle.result;break;case"result":this.leftRiddleText.string=this.currentRiddle.operand1+" "+n.getInputCharacter(this.currentRiddle.operator)+" "+this.currentRiddle.operand2+" =",this.rightRiddleText.string="";break;case"operator":this.leftRiddleText.string=this.currentRiddle.operand1,this.rightRiddleText.string=this.currentRiddle.operand2+" = "+this.currentRiddle.result}this.inputText.string="",this.leftRiddleText._forceUpdateRenderData(),this.rightRiddleText._forceUpdateRenderData(),this.inputFrame.node.width=e;var i=this.leftRiddleText.node.width+this.rightRiddleText.node.width+this.inputFrame.node.width+32;this.leftRiddleText.node.x=(this.leftRiddleText.node.width-i)/2,this.inputFrame.node.x=this.leftRiddleText.node.x+(this.leftRiddleText.node.width+this.inputFrame.node.width)/2+16,this.rightRiddleText.node.x=this.inputFrame.node.x+(this.inputFrame.node.width+this.rightRiddleText.node.width)/2+32,this.inputText.node.x=this.inputFrame.node.x,this.locked=!1}}),cc._RF.pop()},{"./lib/helpers":"helpers",InputFrameController:"InputFrameController"}],ScoreLabel:[function(t,e){"use strict";cc._RF.push(e,"5084cB+tM5CloykXwkNTDDl","ScoreLabel"),cc.Class({extends:cc.Component,properties:{},start:function(){this.label=this.getComponent(cc.RichText),this.displayingScore=0,this.lerpingScore=0,this.score=0,this.label.string="<b>\u30b9\u30b3\u30a2: <size=40>"+this.displayingScore+"</size></b>",this.lerpingTime=0,this.lerpingValue=0},setScore:function(t,e){void 0===e&&(e=!1),this.score=t,e?(this.lerpingTime=0,this.lerpingValue=0,this.lerpingScore=this.score):(this.lerpingTime=20,this.lerpingValue=(this.score-this.lerpingScore)/20)},update:function(){this.lerpingTime<=0?(this.lerpingValue=0,this.lerpingScore=this.score):this.lerpingTime>0&&(this.lerpingScore+=this.lerpingValue,this.lerpingTime--),this.displayingScore!=this.lerpingScore&&(this.displayingScore=Math.floor(this.lerpingScore),this.label.string="<b>\u30b9\u30b3\u30a2: <size=40>"+this.displayingScore+"</size></b>")}}),cc._RF.pop()},{}],constants:[function(t,e){"use strict";cc._RF.push(e,"ae788ZEYsVNlbkaEu3AUFYR","constants"),e.exports={ROUND_DURATION:3e4,MULTIPLE_DIVIDE_INCLUDED_DIFFICULTY:3,CHAIN_DURATION:3e3,DIFFICULTY_STEP:10,SCORING:7,MAX_CHAIN:5},cc._RF.pop()},{}],helpers:[function(t,e){"use strict";cc._RF.push(e,"afb7asBM+VM7IeOCTmPqp3J","helpers");var i=t("h5ad");e.exports.isInputOperator=function(t){return"+"===t||"-"===t||"*"===t||"/"===t},e.exports.getInputCharacter=function(t){return"/"===t?"\xf7":"*"===t?"x":t},e.exports.getAnswerLength=function(t){switch(t.riddlePart){case"operand1":return t.operand1.toString().length;case"operand2":return t.operand2.toString().length;case"result":return t.result.toString().length;case"operator":default:return 1}},e.exports.checkAnswer=function(t,e){switch(t.riddlePart){case"operand1":return parseInt(e)===t.operand1;case"operand2":return parseInt(e)===t.operand2;case"result":return parseInt(e)===t.result;case"operator":if(e===t.operator)return!0;switch(e){case"+":return t.operand1+t.operand2===t.result;case"-":return t.operand1-t.operand2===t.result;case"*":return t.operand1*t.operand2===t.result;case"/":return t.operand1/t.operand2===t.result;default:return!1}}return!1},e.exports.formatDurationDHMSObject=function(t){t=Math.max(0,t);var e=Math.ceil(t/1e3),i=Math.floor(e/60),n=Math.floor(i/60),r=Math.floor(n/24);return{seconds:e%=60,minutes:i%=60,hours:n%=24,days:r}},e.exports.formatTimer=function(t){var e=this.formatDurationDHMSObject(t),i=e.seconds,n=e.minutes,r=e.hours,o=e.days,c=n>9||0===r?n:"0"+n,a=i>9?i:"0"+i;return o>=1?o+":"+r+":"+n+":"+i:r>=1?r+":"+c+":"+a:c+":"+a},e.exports.showAds=function(t,e,n){i.adBreak({type:t,beforeBreak:function(){e&&(cc.director.pause(),cc.audioEngine.pauseAll())},afterBreak:function(){e&&(cc.director.resume(),cc.audioEngine.resumeAll()),n&&n()},noBreak:function(){n&&n()}})},e.exports.getResourceUrl=function(t){var e=cc.resources.getInfoWithPath(t),i=e.uuid;return e.nativeVer&&(i+="."+e.nativeVer),"./assets/resources/native/"+i.substr(0,2)+"/"+i+".png"},cc._RF.pop()},{h5ad:1}],riddleGenerate:[function(t,e){"use strict";cc._RF.push(e,"5373bUE27RLNKrfYsZy6MUA","riddleGenerate");var i=t("../constants");e.exports=function(t,e){var n=e.range(t>=i.MULTIPLE_DIVIDE_INCLUDED_DIFFICULTY?4:2),r=e(4),o=3*t,c=10*t,a=0,s=0,d=0,l="";0===n?(l="+",d=(a=e.intBetween(o,c))-(s=e.intBetween(1,a-1))):1===n?(l="-",a=(s=e.intBetween(o,c))-(d=e.intBetween(1,s-1))):2===n?(l="*",a=e.intBetween(o,c),a=(s=e.intBetween(2,a/2-2))*(d=Math.round(a/s))):3===n&&(l="/",s=e.intBetween(o,c),d=e.intBetween(2,s/2-2),s=(a=Math.round(s/d))*d);var u="result";switch(r){case 0:u="result";break;case 1:u="operand1";break;case 2:u="operand2";break;case 3:u="operator"}return{result:a,operand1:s,operand2:d,operator:l,riddlePart:u}},cc._RF.pop()},{"../constants":"constants"}]},{},["IngameScene","InputFrameController","LandingScene","ResultPopup","RiddleFrameController","ScoreLabel","constants","helpers","riddleGenerate"]);