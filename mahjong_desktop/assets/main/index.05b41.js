window.__require=function e(t,i,n){function o(s,r){if(!i[s]){if(!t[s]){var l=s.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+s+"'")}s=l}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){return o(t[s][1][e]||e)},u,u.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t){var i="en",n="jp",o={jp:{play:"\u30b9\u30bf\u30fc\u30c8"},en:{play:"Play Now!"}},a=500;function s(){this._isInitialised=!1,this._splashAdShown=!1}function r(e){for(var t in e=e||{})void 0===e[t]&&delete e[t];return e}function l(e,t){console.error(e),(t=t||{}).noBreak?t.noBreak():(t.beforeBreak&&t.beforeBreak(),t.afterBreak&&t.afterBreak())}function c(){if(!navigator.language)return n;let e=navigator.language.toLowerCase().substr(0,2);return o[e]?e:i}s.prototype.initialize=function(e){if(this._isInitialised)console.warn("h5ad: already initialized");else{if(this._isInitialised=!0,e&&void 0!==e.adBreakTimeout&&(a=e.adBreakTimeout),!window.adsbygoogle){var t=document.createElement("script");t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t.setAttribute("data-ad-client","ca-pub-123456789"),t.setAttribute("data-adbreak-test","on"),t.async=!0,document.head.appendChild(t),window.adsbygoogle=window.adsbygoogle||[],adBreak=window.adBreak=function(e){console.log("adBreak:",e),window.adsbygoogle.push(e)},adConfig=window.adConfig=function(e){console.log("adConfig:",e),window.adsbygoogle.push(e)}}adConfig({preloadAdBreaks:"on",sound:"on"})}},s.prototype.onStart=function(e){if(e=e||{},this._isInitialised||this.initialize({adBreakTimeout:e.adBreakTimeout}),this._splashAdShown)console.warn("h5ad: onStart has already been called");else{this._splashAdShown=!0;var t="";t+=".splahContainer {",t+="    background-color: black;",t+="    position: absolute;",t+="    width: 100%;",t+="    height: 100%;",t+="    text-align: left;",t+="}",t+=".splahContainer .gameIcon {",t+="    position: relative;",t+="    width: 100px;",t+="    height: 100px;",t+="    background-size: 100%;",t+="    transform: translate(-50%, -100%);",t+="    left: 50%;",t+="    top: 31%;",t+="    border-radius: 10px;",t+="    border: 2px white solid;",t+="    border-radius: min(2vh,2vw);",t+="    border: min(0.7vw, 0.7vh) white solid;",t+="    width: min(30vw, 20vh);",t+="    height: min(30vw, 20vh);",t+="}",t+=".splahContainer .startButton {",t+="    background-color: rgb(255, 193, 7);",t+="    padding: 20px 30px;",t+="    border-radius: 13px;",t+="    transform: translate(-50%, 100%);",t+="    left: 50%;",t+="    top: 40%;",t+="    border: 5px solid white;",t+="    position: relative;",t+="    cursor: pointer;",t+="    font-size: 26px;",t+="    font-family: arial, verdana;",t+="    color: white;",t+="    text-align: center;",t+="    transition: all 0.1s;",t+="    width: min(50vw,27vh);",t+="    padding: min(3vw,3vh);",t+="    font-size: min(4vh,9vw);",t+="    border-radius: min(2vh,2vw);",t+="    border: min(1vw, 1vh) white solid;",t+="}",t+=".splahContainer .startButton:hover {",t+="    transform: translate(-50%, 100%) scale(1.1);",t+="    background-color: rgb(255 217 104);",t+="}";var i=document.createElement("style");i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(i);var n=document.createElement("div");e.color&&(n.style.backgroundColor=e.color),n.className="splahContainer";var s=document.createElement("div");s.textContent=o[c()].play,s.className="startButton",n.appendChild(s);var u=document.createElement("div");u.className="gameIcon",e.icon&&(u.style.backgroundImage="url("+e.icon+")"),n.appendChild(u),document.body.appendChild(n),s.onclick=function(){afterBreakCallbackCalled=!1;let t=setTimeout(function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,e.afterBreak&&e.afterBreak())},a);try{adBreak(r({type:"start",name:e.name||"splash_screen",beforeBreak:function(){clearTimeout(t)},afterBreak:function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,e.afterBreak&&e.afterBreak())}}))}catch(i){l(i,e)}setTimeout(function(){document.body.removeChild(n)},200)}}},s.prototype.onNext=function(e){(e=e||{}).type="next",this.adBreak(e)},s.prototype.onBrowse=function(e){(e=e||{}).type="browse",this.adBreak(e)},s.prototype.onPause=function(e){(e=e||{}).type="pause",this.adBreak(e)},s.prototype.adBreak=function(e){if("next"!==(e=e||{}).type&&"browse"!==e.type&&"pause"!==e.type)return console.error("H5ad: unknown type",e.type);let t=setTimeout(function(){e.noBreak&&e.noBreak()},a);try{adBreak(r({type:e.type,name:e.name||e.type,beforeBreak:function(){clearTimeout(t),e.beforeBreak&&e.beforeBreak()},afterBreak:function(){e.afterBreak&&e.afterBreak()}}))}catch(i){l(i,e)}},s.prototype.onMute=function(){adConfig({sound:"off"})},s.prototype.onUnmute=function(){adConfig({sound:"on"})},t.exports=new s},{}],DataManager:[function(e,t){"use strict";var i;cc._RF.push(t,"6d230WjzGpMpoY8h1MOJbgy","DataManager"),(i=e("./constants"))&&i.__esModule,t.exports.loadData=function(){window.gameData={},cc.resources.load("Data/layout",function(e,t){window.gameData.tableLayout=t.json}),cc.resources.load("Data/tiles",function(e,t){window.gameData.tileTypes=t.json})},t.exports.getLayout=function(){return window.gameData.tableLayout},t.exports.getTileTypes=function(){return window.gameData.tileTypes},cc._RF.pop()},{"./constants":"constants"}],IngamePopupCtor:[function(e,t){"use strict";cc._RF.push(t,"0be6bcpI+hAir+Z+NMC0EJ2","IngamePopupCtor");var i,n=(i=e("./Libs/helpers"))&&i.__esModule?i:{default:i};e("h5ad");var o=e("./DataManager");cc.Class({extends:cc.Component,properties:{overlay:cc.Node,helpPopup:cc.Node,ingameMenu:cc.Node,debriefPopup:cc.Node,debriefFinalScoreText:cc.Label,debriefProgressText:cc.Label,debriefProgressScoreText:cc.Label,debriefRawScoreText:cc.Label},start:function(){},animateOverlayFadeIn:function(){this.overlay.active=!0,this.overlay.opacity=0,cc.tween(this.overlay).to(.2,{opacity:200}).start()},animateOverlayFadeOut:function(){var e=this;this.overlay.opacity=200,cc.tween(this.overlay).to(.3,{opacity:0}).call(function(){e.overlay.active=!1}).start()},animatePopupFadeIn:function(e){e.active=!0,e.displaying=!0,e.opacity=0,cc.tween(e).to(.3,{opacity:255}).start()},animatePopupFadeOut:function(e){e.opacity=255,e.displaying=!1,cc.tween(e).to(.2,{opacity:0}).call(function(){e.active=!1}).start()},reset:function(){this.overlay.active=!1,this.helpPopup.active=!1,this.ingameMenu.active=!1,this.debriefPopup.active=!1},showIngameMenu:function(){this.animateOverlayFadeIn(),this.ingameController.pauseGame(),this.animatePopupFadeIn(this.ingameMenu)},showHelpPopup:function(){this.animateOverlayFadeIn(),this.ingameController.pauseGame(),this.animatePopupFadeIn(this.helpPopup)},showDebriefScreen:function(){this.animateOverlayFadeIn(),this.ingameController.pauseGame(),this.animatePopupFadeIn(this.debriefPopup);var e=1-this.ingameController.tiles.length/o.getLayout().length,t=Math.ceil(this.ingameController.score*e);this.debriefRawScoreText.string=n.default.formatDecimalString(this.ingameController.score),this.debriefProgressScoreText.string=n.default.formatDecimalString(t),this.debriefFinalScoreText.string=n.default.formatDecimalString(this.ingameController.score+t),this.debriefProgressText.string=Math.round(100*e)+"% \u5b8c\u4e86"},onResumeClicked:function(){"on"===o.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.animateOverlayFadeOut(),this.helpPopup.displaying&&this.animatePopupFadeOut(this.helpPopup),this.ingameMenu.displaying&&this.animatePopupFadeOut(this.ingameMenu),this.debriefPopup.displaying&&this.animatePopupFadeOut(this.debriefPopup),this.ingameController.resumeGame()},onQuitClicked:function(){var e=this;cc.director.isPaused()||n.default.showAds("browse",!0,function(){e.ingameController.backToMainMenu()})},onRestartClicked:function(){var e=this;cc.director.isPaused()||("on"===o.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),n.default.showAds("next",!0,function(){e.ingameController.restartGame()}))}}),cc._RF.pop()},{"./DataManager":"DataManager","./Libs/helpers":"helpers",h5ad:1}],IngameSceneCtor:[function(e,t){"use strict";cc._RF.push(t,"09b929JsbZE6LnNEKlAq2xZ","IngameSceneCtor");var i=l(e("./Models/Tile")),n=l(e("./constants")),o=l(e("./Libs/helpers")),a=l(e("./IngameUICtor")),s=l(e("./IngamePopupCtor")),r=l(e("./DataManager"));function l(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{uiController:a.default,popupController:s.default,loadingText:cc.Label,tableNode:cc.Node,bgSound:cc.AudioClip,clickSound:cc.AudioClip,successMatchSound:cc.AudioClip,tileSelectionSound:cc.AudioClip,tileIllegalSound:cc.AudioClip,tickSound:cc.AudioClip},onLoad:function(){this.uiController.ingameController=this,this.popupController.ingameController=this,this.uiController.popupController=this.popupController,this.popupController.uiController=this.uiController,this.uiController.reset(),this.popupController.reset()},start:function(){var e=this;this.tableNode.setScale(n.default.TABLE_SCALE),this.tableNode.x=n.default.TABLE_OFFSET_X,this.tableNode.y=n.default.TABLE_OFFSET_Y,this.timer=n.default.GAME_DURATION,this.score=0,this.hintRemaining=n.default.GAME_HINT_TIMES,this.shuffleRemaining=n.default.GAME_SHUFFLE_TIMES,this.isPlaying=!1,this.isGameBegan=!1,cc.resources.preloadDir("Tiles",cc.SpriteFrame,function(){e.generateTiles(),e.uiController.hideLoadingText(),e.animateShuffleTiles(function(){e.isPlaying=!0,e.uiController.updateTimer(),e.uiController.updateHint(),e.uiController.updateShuffle()})})},update:function(e){if(this.isPlaying&&this.isGameBegan)if(this.timer-=1e3*e,this.uiController.updateTimer(),this.timer<=0)this.animateTimerTick(),this.endGame();else if(this.timer<1e4){var t=this.timer/1e3;t+e>Math.ceil(t)&&this.animateTimerTick()}},animateTimerTick:function(){cc.audioEngine.play(this.tickSound,!1,.5),this.uiController.animateTimeWarning()},animateShuffleTiles:function(e,t){void 0===t&&(t="in");for(var i=[].concat(this.tiles),n=0,o=0;i.length>0;){var a=i.splice(~~(Math.random()*i.length),1)[0],s=cc.v2();if("out"===t){var r=new cc.v2;cc.Vec2.random(r,1200),s=r.multiplyScalar(1+.2*Math.random())}else s=a.node.position,r=new cc.v2,cc.Vec2.random(r,1200),a.node.position=r.multiplyScalar(1+.5*Math.random());cc.tween(a.node).delay(.012*o).to(.6,{position:s}).start(),++n>=9&&(n=0,o++)}this.scheduleOnce(e,.012*o+.6)},restartGame:function(){cc.audioEngine.stopAll(),cc.director.loadScene("ingame")},backToMainMenu:function(){cc.audioEngine.stopAll(),cc.director.loadScene("landing")},generateTiles:function(){var e=this;window.gameData.flowerCounter=0,window.gameData.seasonCounter=0;for(var t=[],n=0;n<r.default.getTileTypes().length;n++)for(var o=0;o<4;o++)t.push(n);t.length===r.default.getLayout().length?(this.tiles=[],r.default.getLayout().forEach(function(n){var o=~~(Math.random()*t.length),a=t[o];t.splice(o,1);var s=new i.default(e.tableNode,a,n);s.node.on("clicked",e.onTileClicked,e),e.tiles.push(s)}),this.remapTiles(),0===this.validPairs.length&&this.shuffleTiles(!0)):cc.error("Invalid data")},remapTiles:function(){var e=this;this.mappedTiles={},this.tiles.forEach(function(t){e.mappedTiles[o.default.getMappedKeyFromTile(t)]=t}),this.validTiles=[],this.tiles.forEach(function(t){for(var i=!0,a=0;a<n.default.RELATIVE_TOP_BLOCKING_TILES.length;a++){var s=n.default.RELATIVE_TOP_BLOCKING_TILES[a],r=t.position.x+s[0],l=t.position.y+s[1],c=t.position.z+s[2];if(e.mappedTiles[o.default.getMappedKeyFromPosition(r,l,c)]){i=!1;break}}if(i){for(var u=!0,h=!0,d=0;d<n.default.RELATIVE_LEFT_BLOCKING_TILES.length;d++){var f=n.default.RELATIVE_LEFT_BLOCKING_TILES[d];if(r=t.position.x+f[0],l=t.position.y+f[1],c=t.position.z+f[2],e.mappedTiles[o.default.getMappedKeyFromPosition(r,l,c)]){u=!1;break}}for(var p=0;p<n.default.RELATIVE_RIGHT_BLOCKING_TILES.length;p++){var g=n.default.RELATIVE_RIGHT_BLOCKING_TILES[p];if(r=t.position.x+g[0],l=t.position.y+g[1],c=t.position.z+g[2],e.mappedTiles[o.default.getMappedKeyFromPosition(r,l,c)]){h=!1;break}}(u||h)&&e.validTiles.push(o.default.getMappedKeyFromTile(t))}}),this.validPairs=[];for(var t=[].concat(this.validTiles);t.length>0;)for(var i=t.splice(0,1)[0],a=0;a<t.length;a++){var s=t[a];if(this.mappedTiles[s].type===this.mappedTiles[i].type){s=t.splice(a,1)[0],this.validPairs.push([i,s]);break}}this.uiController.updateIngameData()},selectTile:function(e){"on"===r.default.sound&&cc.audioEngine.play(this.tileSelectionSound,!1,1),this.selectedTiles&&this.deselectTile(),this.deHighlightHint(),this.selectedTiles=e,this.selectedTiles.highlight()},scoreTilePair:function(e,t){if(e.type===t.type){"on"===r.default.sound&&cc.audioEngine.play(this.successMatchSound,!1,1);var i=e.type;this.addScore(i),e.destroy(),t.destroy(),this.tiles.splice(this.tiles.indexOf(e),1),this.tiles.splice(this.tiles.indexOf(t),1),this.deselectTile(),this.isGameBegan||(this.isGameBegan=!0,this.timer-=1e3),0===this.tiles.length?this.endGame():(this.remapTiles(),this.checkNoMoreMove())}},addScore:function(e){var t=r.default.getTileTypes()[e][1],i=Math.ceil(.5*t*this.tiles.length);this.score+=i,this.uiController.updateScore()},deselectTile:function(){this.selectedTiles&&this.selectedTiles.dehighlight(),this.selectedTiles=null},highlightHint:function(e,t){this.isHinting&&this.deHighlightHint(),this.isHinting=!0,this.hintPair=[e,t],this.hintPair[0].hintHighlight(),this.hintPair[1].hintHighlight()},deHighlightHint:function(){this.isHinting=!1,this.hintPair&&(this.tiles.includes(this.hintPair[0])&&this.hintPair[0].dehighlight(),this.tiles.includes(this.hintPair[1])&&this.hintPair[1].dehighlight())},shuffleTiles:function(e){var t=this;if(void 0===e&&(e=!1),!e){if(this.isShufling)return;if(!this.isPlaying)return;if(this.shuffleRemaining<=0)return;this.shuffleRemaining--,this.uiController.updateShuffle()}this.deselectTile(),this.deHighlightHint(),this.isShufling=!0,this.isPlaying=!1,this.animateShuffleTiles(function(){var e=0;do{t.remainingLayout=[],t.tiles.forEach(function(e){t.remainingLayout.push([e.position.x,e.position.y,e.position.z])}),t.tiles.forEach(function(e){var i=t.remainingLayout.splice(~~(Math.random()*t.remainingLayout.length),1)[0];e.reposition(i[0],i[1],i[2])}),t.remapTiles(),e++}while(0===t.validPairs.length&&e<10);t.animateShuffleTiles(function(){t.isShufling=!1,t.isPlaying=!0,t.checkNoMoreMove()})},"out")},checkNoMoreMove:function(){var e=this;0===this.validPairs.length&&(this.shuffleRemaining>0?(this.isPlaying=!1,this.uiController.showShuffleNotification("reshuffle"),this.scheduleOnce(function(){e.isPlaying=!0,e.uiController.hideShuffleNotification(),e.shuffleTiles()},1)):(this.isPlaying=!1,this.uiController.showShuffleNotification("end"),this.scheduleOnce(function(){e.isPlaying=!0,e.uiController.hideShuffleNotification(),e.endGame()},1)))},showHintPair:function(){this.isPlaying&&(this.validPairs.length<=0||this.hintRemaining<=0||(this.hintRemaining--,this.uiController.updateHint(),isNaN(this.hintPairIter)&&(this.hintPairIter=0),this.hintPairIter=++this.hintPairIter%this.validPairs.length,this.deselectTile(),this.highlightHint(this.mappedTiles[this.validPairs[this.hintPairIter][0]],this.mappedTiles[this.validPairs[this.hintPairIter][1]])))},endGame:function(){this.isPlaying=!1,this.popupController.showDebriefScreen()},pauseGame:function(){this.isPlaying=!1},resumeGame:function(){this.isPlaying=!0},onTileClicked:function(e){this.isPlaying&&(this.validTiles.includes(o.default.getMappedKeyFromTile(e))?this.selectedTiles?e===this.selectedTiles?this.deselectTile():e.type===this.selectedTiles.type?this.scoreTilePair(e,this.selectedTiles):this.selectTile(e):this.selectTile(e):("on"===r.default.sound&&cc.audioEngine.play(this.tileIllegalSound,!1,1),e.illegalHighlight()))}}),cc._RF.pop()},{"./DataManager":"DataManager","./IngamePopupCtor":"IngamePopupCtor","./IngameUICtor":"IngameUICtor","./Libs/helpers":"helpers","./Models/Tile":"Tile","./constants":"constants"}],IngameUICtor:[function(e,t){"use strict";cc._RF.push(t,"653c2FywYdLE5u3WI75R5Eh","IngameUICtor"),a(e("./IngameSceneCtor")),a(e("./IngamePopupCtor"));var i=a(e("./Libs/helpers")),n=a(e("./constants")),o=a(e("./DataManager"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{pairText:cc.Label,timeText:cc.Label,scoreText:cc.Label,tilesText:cc.Label,shuffleRemainingText:cc.Label,hintRemainingText:cc.Label,loadingText:cc.Label,shuffleNotificationText:cc.Label,shuffleButton:cc.Button,hintButton:cc.Button,helpButton:cc.Button,pauseButton:cc.Button},start:function(){},reset:function(){this.loadingText.node.active=!0,this.shuffleNotificationText.node.active=!1,this.pairText.string="0",this.timeText.string="00:00",this.scoreText.string="0",this.tilesText.string="0",this.shuffleRemainingText.node.opacity=255,this.shuffleRemainingText.string="0x",this.hintRemainingText.node.opacity=255,this.hintRemainingText.string="0x",this.shuffleButton.interactable=!0,this.hintButton.interactable=!0},hideLoadingText:function(){var e=this;cc.tween(this.loadingText.node).to(.4,{opacity:0}).call(function(){e.loadingText.node.active=!1}).start()},animateTimeWarning:function(){cc.tween(this.timeText.node).to(.25,{color:new cc.color(n.default.UI_WARNING_COLOR),scale:1.2}).to(.25,{color:new cc.color(n.default.UI_WHITE_COLOR),scale:1}).start()},disableShuffle:function(){this.shuffleRemainingText.node.opacity=128,this.shuffleButton.interactable=!1},disableHint:function(){this.hintRemainingText.node.opacity=128,this.hintButton.interactable=!1},updateIngameData:function(){this.pairText.string=this.ingameController.validPairs.length,this.tilesText.string=this.ingameController.tiles.length,this.pairText.node.color=this.ingameController.validPairs.length>n.default.LOW_MATCHING_TILE_WARNING_THRESHOLD?cc.color(n.default.UI_WHITE_COLOR):cc.color(n.default.UI_WARNING_COLOR)},updateShuffle:function(){this.shuffleRemainingText.string=this.ingameController.shuffleRemaining+"x",0===this.ingameController.shuffleRemaining&&this.disableShuffle()},updateHint:function(){this.hintRemainingText.string=this.ingameController.hintRemaining+"x",0===this.ingameController.hintRemaining&&this.disableHint()},updateTimer:function(){this.timeText.string=i.default.formatTimer(this.ingameController.timer)},updateScore:function(){this.scoreText.string=i.default.formatDecimalString(this.ingameController.score)},showShuffleNotification:function(e){"reshuffle"===e?this.shuffleNotificationText.string="\u30de\u30c3\u30c1\u53ef\u80fd\u306a\u30da\u30a2\u306f\u3042\u308a\u307e\u305b\u3093\n\u518d\u30b7\u30e3\u30c3\u30d5\u30eb...":"end"===e&&(this.shuffleNotificationText.string="\u30de\u30c3\u30c1\u53ef\u80fd\u306a\u30da\u30a2\u306f\u3042\u308a\u307e\u305b\u3093\n\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc"),this.shuffleNotificationText.node.active=!0,this.shuffleNotificationText.node.opacity=0,this.shuffleNotificationText.node.y=-80,this.shuffleNotificationTween&&this.shuffleNotificationTween.stop(),this.shuffleNotificationTween=cc.tween(this.shuffleNotificationText.node).to(.4,{opacity:255,y:0}).start()},hideShuffleNotification:function(){var e=this;this.shuffleNotificationTween&&this.shuffleNotificationTween.stop(),this.shuffleNotificationTween=cc.tween(this.shuffleNotificationText.node).to(.4,{opacity:0,y:100}).call(function(){e.shuffleNotificationText.node.active=!1}).start()},onHintClicked:function(){"on"===o.default.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.ingameController.showHintPair()},onShuffleClicked:function(){"on"===o.default.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.ingameController.shuffleTiles()},onPauseClicked:function(){"on"===o.default.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.popupController.showIngameMenu()},onHelpClicked:function(){"on"===o.default.sound&&cc.audioEngine.play(this.ingameController.clickSound,!1,1),this.popupController.showHelpPopup()}}),cc._RF.pop()},{"./DataManager":"DataManager","./IngamePopupCtor":"IngamePopupCtor","./IngameSceneCtor":"IngameSceneCtor","./Libs/helpers":"helpers","./constants":"constants"}],LandingSceneCtor:[function(e,t){"use strict";cc._RF.push(t,"ecadavH4rRILZ0IR5weO34P","LandingSceneCtor"),n(e("./constants"));var i=n(e("./DataManager"));function n(e){return e&&e.__esModule?e:{default:e}}var o=e("h5ad"),a=e("./Libs/helpers");cc.Class({extends:cc.Component,properties:{loadingOverlay:cc.Node,clickSound:cc.AudioClip},onLoad:function(){o.onStart({icon:a.getResourceUrl("icon"),color:"#4C693E"}),i.default.loadData()},start:function(){this.loadingOverlay.active=!1},onPlayClicked:function(){"on"===i.default.sound&&cc.audioEngine.play(this.clickSound,!1,1),this.loadingOverlay.active=!0,this.loadingOverlay.opacity=0,cc.tween(this.loadingOverlay).to(.4,{opacity:200}).call(function(){cc.director.loadScene("ingame")}).start()}}),cc._RF.pop()},{"./DataManager":"DataManager","./Libs/helpers":"helpers","./constants":"constants",h5ad:1}],MusicButton:[function(e,t){"use strict";cc._RF.push(t,"66db6+NtctLe5pKkkfqo5gU","MusicButton");var i,n=(i=e("./DataManager"))&&i.__esModule?i:{default:i};cc.Class({extends:cc.Component,properties:{onTexture:cc.SpriteFrame,offTexture:cc.SpriteFrame,sprite:cc.Sprite,bgSound:cc.AudioClip},onLoad:function(){n.default.sound=cc.sys.localStorage.getItem("music"),null===n.default.sound&&(n.default.sound="on"),this.updateMusicToggle()},onMusicClicked:function(){n.default.sound="on"===n.default.sound?"off":"on",this.updateMusicToggle()},updateMusicToggle:function(){this.sprite.spriteFrame="on"===n.default.sound?this.onTexture:this.offTexture,cc.sys.localStorage.setItem("music",n.default.sound),cc.audioEngine.isMusicPlaying()&&"off"===n.default.sound?cc.audioEngine.stopAll():cc.audioEngine.isMusicPlaying()||"on"!==n.default.sound||cc.audioEngine.playMusic(this.bgSound,!0,.4)},start:function(){}}),cc._RF.pop()},{"./DataManager":"DataManager"}],Tile:[function(e,t,i){"use strict";cc._RF.push(t,"efb04ZQ94hEEa50v5D1+G4y","Tile"),i.__esModule=!0,i.default=void 0;var n,o=(n=e("../constants"))&&n.__esModule?n:{default:n},a=e("../DataManager"),s=function(){function e(e,t,i){this.node=new cc.Node("Sprite"),this.view=this.node.addComponent(cc.Sprite),this.node.parent=e,this.node.on(cc.Node.EventType.TOUCH_START,this.onclick.bind(this),this),this.type=t,this.position={},this.position.x=i[1],this.position.y=i[2],this.position.z=i[3];var n=a.getTileTypes()[this.type][0];"Flower"===n?(n=n+"_"+o.default.TILE_FLOWER_THEME[window.gameData.flowerCounter],window.gameData.flowerCounter++):"Season"===n&&(n=n+"_"+o.default.TILE_SEASON_THEME[window.gameData.seasonCounter],window.gameData.seasonCounter++),this.updateWorldPosition(),cc.resources.load("Tiles/"+n,cc.SpriteFrame,function(e,t){t.addRef(),this.view.spriteFrame=t}.bind(this))}var t=e.prototype;return t.updateWorldPosition=function(){this.node.x=this.position.x*(o.default.TILE_WIDTH/2-o.default.TILE_OFFSET_X)+this.position.z*o.default.TILE_STACK_OFFSET_X,this.node.y=this.position.y*(o.default.TILE_HEIGHT/2-o.default.TILE_OFFSET_TOP_Y)-this.position.z*o.default.TILE_STACK_OFFSET_Y,this.node.setContentSize(o.default.TILE_WIDTH,o.default.TILE_HEIGHT),this.node.zIndex=1e3*this.position.z+(1e3-100*this.position.y)+10*this.position.x},t.reposition=function(e,t,i){this.position={},this.position.x=e,this.position.y=t,this.position.z=i,this.updateWorldPosition()},t.hintHighlight=function(){this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).repeat(5,cc.tween().to(.5,{color:new cc.color(o.default.TILE_HINT_COLOR)}).to(.5,{color:new cc.color("#FFFFFF")})).start()},t.illegalHighlight=function(){this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).to(.2,{color:new cc.color(o.default.TILE_ILLEGAL_COLOR)}).to(.2,{color:new cc.color("#FFFFFF")}).start()},t.highlight=function(){this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).to(.2,{color:new cc.color(o.default.TILE_HIGHTLIGHT_COLOR)}).start()},t.dehighlight=function(){this.tween&&(this.tween.stop(),cc.tween(this.node).to(.2,{color:new cc.color("#FFFFFF")}).start())},t.destroy=function(){var e=this;this.tween&&this.tween.stop(),cc.tween(this.node).to(.4,{opacity:{value:0,easing:"sineOut"},y:{value:this.node.y+120,easing:"sineIn"}}).start(),this.view.scheduleOnce(function(){e.node.destroy()},.4)},t.onclick=function(e){e.stopPropagation(),this.node.emit("clicked",this)},e}();i.default=s,t.exports=i.default,cc._RF.pop()},{"../DataManager":"DataManager","../constants":"constants"}],constants:[function(e,t,i){"use strict";cc._RF.push(t,"ad93eoF2JtAnLaSo8UmrzRb","constants"),i.__esModule=!0,i.default=void 0,i.default={GAME_DURATION:6e5,GAME_HINT_TIMES:3,GAME_SHUFFLE_TIMES:3,TABLE_SCALE:.42,TABLE_OFFSET_X:-15,TABLE_OFFSET_Y:-15,TILE_WIDTH:86,TILE_HEIGHT:124,TILE_STACK_OFFSET_X:0,TILE_STACK_OFFSET_Y:-12,TILE_OFFSET_X:2,TILE_OFFSET_TOP_Y:9,TILE_PER_TYPE:4,TILE_SEASON_THEME:["Spring","Summer","Autumn","Winter"],TILE_FLOWER_THEME:["Type1","Type2","Type3","Type4"],TILE_HIGHTLIGHT_COLOR:"#8EB7FF",TILE_HINT_COLOR:"#00FF00",TILE_ILLEGAL_COLOR:"#FF716B",LOW_MATCHING_TILE_WARNING_THRESHOLD:3,UI_WHITE_COLOR:"#FEFEFE",UI_WARNING_COLOR:"#886033",RELATIVE_TOP_BLOCKING_TILES:[[0,0,1],[1,1,1],[1,-1,1],[-1,1,1],[-1,-1,1]],RELATIVE_LEFT_BLOCKING_TILES:[[-2,0,0],[-2,1,0],[-2,-1,0]],RELATIVE_RIGHT_BLOCKING_TILES:[[2,0,0],[2,1,0],[2,-1,0]]},t.exports=i.default,cc._RF.pop()},{}],helpers:[function(e,t){"use strict";cc._RF.push(t,"27317LYnohKlLhuyXz/wavH","helpers");var i=e("h5ad");t.exports.getMappedKeyFromTile=function(e){return this.getMappedKeyFromPosition(e.position.x,e.position.y,e.position.z)},t.exports.getMappedKeyFromPosition=function(e,t,i){return e+"_"+t+"_"+i},t.exports.formatDurationDHMSObject=function(e){e=Math.max(0,e);var t=Math.ceil(e/1e3),i=Math.floor(t/60),n=Math.floor(i/60),o=Math.floor(n/24);return{seconds:t%=60,minutes:i%=60,hours:n%=24,days:o}},t.exports.formatTimer=function(e){var t=this.formatDurationDHMSObject(e),i=t.seconds,n=t.minutes,o=t.hours,a=t.days,s=n>9||0===o?n:"0"+n,r=i>9?i:"0"+i;return a>=1?a+":"+o+":"+n+":"+i:o>=1?o+":"+s+":"+r:s+":"+r},t.exports.formatDecimalString=function(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},t.exports.showAds=function(e,t,n){i.adBreak({type:e,beforeBreak:function(){t&&(cc.director.pause(),cc.audioEngine.pauseAll())},afterBreak:function(){t&&(cc.director.resume(),cc.audioEngine.resumeAll()),n&&n()},noBreak:function(){n&&n()}})},t.exports.getResourceUrl=function(e){var t=cc.resources.getInfoWithPath(e),i=t.uuid;return t.nativeVer&&(i+="."+t.nativeVer),"./assets/resources/native/"+i.substr(0,2)+"/"+i+".png"},cc._RF.pop()},{h5ad:1}]},{},["DataManager","IngamePopupCtor","IngameSceneCtor","IngameUICtor","LandingSceneCtor","helpers","Tile","MusicButton","constants"]);